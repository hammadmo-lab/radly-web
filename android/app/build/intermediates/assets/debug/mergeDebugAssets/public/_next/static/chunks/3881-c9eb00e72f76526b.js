"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3881],{11186:(e,t,r)=>{r.d(t,{bq:()=>f,eb:()=>h,gC:()=>y,l6:()=>d,yv:()=>c});var a=r(95155),n=r(12115),s=r(18261),i=r(24033),l=r(12108),o=r(5917),u=r(64269);let d=s.bL;s.YJ;let c=s.WT,f=n.forwardRef((e,t)=>{let{className:r,children:n,...l}=e;return(0,a.jsxs)(s.l9,{ref:t,className:(0,u.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...l,children:[n,(0,a.jsx)(s.In,{asChild:!0,children:(0,a.jsx)("span",{children:(0,a.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})})]})});f.displayName=s.l9.displayName;let p=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.PP,{ref:t,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",r),...n,children:(0,a.jsx)(l.A,{className:"h-4 w-4"})})});p.displayName=s.PP.displayName;let m=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.wn,{ref:t,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",r),...n,children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})});m.displayName=s.wn.displayName;let y=n.forwardRef((e,t)=>{let{className:r,children:n,position:i="popper",...l}=e;return(0,a.jsx)(s.ZL,{children:(0,a.jsxs)(s.UC,{ref:t,className:(0,u.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:i,...l,children:[(0,a.jsx)(p,{}),(0,a.jsx)(s.LM,{className:(0,u.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,a.jsx)(m,{})]})})});y.displayName=s.UC.displayName,n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.JU,{ref:t,className:(0,u.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...n})}).displayName=s.JU.displayName;let h=n.forwardRef((e,t)=>{let{className:r,children:n,...i}=e;return(0,a.jsxs)(s.q7,{ref:t,className:(0,u.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(s.VF,{children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})}),(0,a.jsx)(s.p4,{children:n})]})});h.displayName=s.q7.displayName,n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.wv,{ref:t,className:(0,u.cn)("-mx-1 my-1 h-px bg-muted",r),...n})}).displayName=s.wv.displayName},11647:(e,t,r)=>{r.d(t,{E:()=>l});var a=r(95155);r(12115);var n=r(83101),s=r(64269);let i=(0,n.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...n}=e;return(0,a.jsx)("div",{className:(0,s.cn)(i({variant:r}),t),...n})}},16023:(e,t,r)=>{r.d(t,{M0:()=>h,OK:()=>g,F2:()=>y,M4:()=>x,Sn:()=>v,hp:()=>b});var a=r(22454),n=r(99776),s=r(80549),i=r(25656);async function l(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=new FormData;n.append("file",e),n.append("profile_name",t),n.append("is_default",String(a));let{createBrowserSupabase:s}=await Promise.resolve().then(r.bind(r,96648)),i=s(),{data:{session:l}}=await i.auth.getSession(),o=null==l?void 0:l.access_token,u={"x-client-key":"0f0a24adba9edfede4bc7413f85967224db6d1501c16f5213e901048cf4eb445","X-Request-Id":crypto.randomUUID()};o&&(u.authorization="Bearer ".concat(o));let d=await fetch("".concat("https://edge.radly.app","/v1/formatting/upload"),{method:"POST",headers:u,body:n,credentials:"include"});if(!d.ok){let e=await d.text().catch(()=>"");throw Error("Upload failed: ".concat(d.status," ").concat(e))}return d.json()}async function o(){return(0,i.lx)("/v1/formatting/profiles")}async function u(e,t){return(0,i.yd)("/v1/formatting/profiles/".concat(e),t)}async function d(e){let{createBrowserSupabase:t}=await Promise.resolve().then(r.bind(r,96648)),a=t(),{data:{session:n}}=await a.auth.getSession(),s=null==n?void 0:n.access_token,i={"x-client-key":"0f0a24adba9edfede4bc7413f85967224db6d1501c16f5213e901048cf4eb445","X-Request-Id":crypto.randomUUID()};s&&(i.authorization="Bearer ".concat(s));let l=await fetch("".concat("https://edge.radly.app","/v1/formatting/profiles/").concat(e),{method:"DELETE",headers:i,credentials:"include"});if(!l.ok){let e=await l.text().catch(()=>"");throw Error("Delete failed: ".concat(l.status," ").concat(e))}return l.json()}async function c(e){return(0,i.zA)("/v1/formatting/profiles/".concat(e,"/set-default"),{})}async function f(){return(0,i.lx)("/v1/formatting/profiles/default/get")}var p=r(18720);let m={all:["formatting"],profiles:()=>[...m.all,"profiles"],profile:e=>[...m.all,"profile",e],default:()=>[...m.all,"default"]};function y(){return(0,a.I)({queryKey:m.profiles(),queryFn:o,staleTime:3e5,retry:(e,t)=>!(t.status&&[401,403,404].includes(t.status))&&e<3})}function h(){return(0,a.I)({queryKey:m.default(),queryFn:f,staleTime:3e5,retry:(e,t)=>!(t.status&&[401,403,404].includes(t.status))&&e<3})}function b(){let e=(0,n.jE)();return(0,s.n)({mutationFn:async e=>{let{file:t,profileName:r,isDefault:a}=e;if(t.size>5242880)throw Error("File size must be less than 5MB");if(!t.name.endsWith(".docx"))throw Error("Only DOCX files are accepted");return l(t,r,a)},onSuccess:t=>{e.invalidateQueries({queryKey:m.profiles()}),t.is_default&&e.invalidateQueries({queryKey:m.default()}),p.oR.success('Profile "'.concat(t.profile_name,'" created successfully'))},onError:e=>{let t=e.message||"Failed to upload template";p.oR.error(t)}})}function v(){let e=(0,n.jE)();return(0,s.n)({mutationFn:async e=>{let{profileId:t,data:r}=e;return u(t,r)},onSuccess:t=>{e.invalidateQueries({queryKey:m.profiles()}),e.invalidateQueries({queryKey:m.profile(t.profile_id)}),t.is_default&&e.invalidateQueries({queryKey:m.default()}),p.oR.success("Profile updated successfully")},onError:e=>{p.oR.error(e.message||"Failed to update profile")}})}function g(){let e=(0,n.jE)();return(0,s.n)({mutationFn:d,onSuccess:(t,r)=>{e.invalidateQueries({queryKey:m.profiles()}),e.invalidateQueries({queryKey:m.default()}),e.removeQueries({queryKey:m.profile(r)}),p.oR.success("Profile deleted successfully")},onError:e=>{p.oR.error(e.message||"Failed to delete profile")}})}function x(){let e=(0,n.jE)();return(0,s.n)({mutationFn:c,onSuccess:t=>{e.invalidateQueries({queryKey:m.profiles()}),e.invalidateQueries({queryKey:m.default()}),e.setQueryData(m.profile(t.profile_id),t),p.oR.success('"'.concat(t.profile_name,'" is now your default profile'))},onError:e=>{p.oR.error(e.message||"Failed to set default profile")}})}},18927:(e,t,r)=>{r.d(t,{O:()=>u,A:()=>d});var a=r(95155),n=r(12115),s=r(88727),i=r(90260);function l(){try{let e=(0,s.createBrowserClient)("https://bsldtgivgtyzacwyvcfh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJzbGR0Z2l2Z3R5emFjd3l2Y2ZoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5MzQ1NzMsImV4cCI6MjA3NTUxMDU3M30.vjHPo6WEASxYBOAGYmZ93o5n9RhZvANSlLhaT-wagTs");if((0,i.Wj)()){let t=(0,i.Ld)();return{...e,auth:{...e.auth,getSession:async()=>({data:{session:t},error:null}),getUser:async()=>({data:{user:(null==t?void 0:t.user)||null},error:null}),signOut:async()=>({error:null}),onAuthStateChange:e=>(e("SIGNED_IN",t),{data:{subscription:{unsubscribe:()=>{}}}})}}}return e}catch(e){return{auth:{getSession:async()=>({data:{session:null},error:null}),getUser:async()=>({data:{user:null},error:null}),signOut:async()=>({error:null}),onAuthStateChange:()=>({data:{subscription:{unsubscribe:()=>{}}}})}}}}let o=(0,n.createContext)(void 0);function u(e){let{children:t}=e,[s,i]=(0,n.useState)(null),[u,d]=(0,n.useState)(null),[c,f]=(0,n.useState)(!0);(0,n.useEffect)(()=>{let e=l();e.auth.getSession().then(e=>{var t;let{data:{session:r}}=e;d(r),i(null!=(t=null==r?void 0:r.user)?t:null),f(!1)}).catch(e=>{d(null),i(null),f(!1)});let{data:{subscription:t}}=e.auth.onAuthStateChange((e,t)=>{var r;d(t),i(null!=(r=null==t?void 0:t.user)?r:null),f(!1)});return()=>t.unsubscribe()},[]);let p=async()=>{try{let e=l();await e.auth.signOut();let{clearTokenCache:t}=await r.e(5656).then(r.bind(r,25656));t()}catch(e){}};return(0,a.jsx)(o.Provider,{value:{user:s,session:u,loading:c,signOut:p},children:t})}function d(){let e=(0,n.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},31969:(e,t,r)=>{r.d(t,{JO:()=>l,NL:()=>o,Rs:()=>i});var a=r(22454),n=r(25656),s=r(85578);function i(){let{isAuthed:e,mounted:t}=(0,s.Q)();return(0,a.I)({queryKey:["subscription-usage"],queryFn:()=>(0,n.lx)("/v1/subscription/usage"),refetchInterval:6e4,enabled:t&&e,retry:(e,t)=>{if(t&&"object"==typeof t&&"status"in t){let e=t.status;if(401===e||403===e||404===e)return!1}return e<3},staleTime:3e4})}function l(){let{data:e}=i();return(null==e?void 0:e.subscription.tier)||"free"}function o(){let{isAuthed:e,mounted:t}=(0,s.Q)();return(0,a.I)({queryKey:["subscription"],queryFn:()=>(0,n.lx)("/v1/subscriptions/status"),refetchInterval:6e4,enabled:t&&e,retry:(e,t)=>{if(t&&"object"==typeof t&&"status"in t){let e=t.status;if(401===e||403===e||404===e)return!1}return e<3},staleTime:3e4})}},76444:(e,t,r)=>{r.d(t,{J:()=>u});var a=r(95155),n=r(12115),s=r(10489),i=r(83101),l=r(64269);let o=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.b,{ref:t,className:(0,l.cn)(o(),r),...n})});u.displayName=s.b.displayName},85578:(e,t,r)=>{r.d(t,{Q:()=>i});var a=r(12115),n=r(96648),s=r(90260);function i(){let e=(0,a.useMemo)(()=>(0,n.createBrowserSupabase)(),[]),[t,r]=(0,a.useState)(!1),[i,l]=(0,a.useState)(null);return(0,a.useEffect)(()=>{if((0,s.Wj)()){l((0,s.Ld)()),r(!0);return}let t=()=>{};e.auth.getSession().then(e=>{let{data:t}=e;return l(t.session)});let{data:a}=e.auth.onAuthStateChange((e,t)=>l(t));return t=()=>{var e,t;return null==a||null==(t=a.subscription)||null==(e=t.unsubscribe)?void 0:e.call(t)},r(!0),()=>t()},[e]),{session:i,isAuthed:!!i,mounted:t}}},90260:(e,t,r)=>{r.d(t,{Ld:()=>s,Wj:()=>n});var a=r(95704);function n(){return"true"===a.env.NEXT_PUBLIC_TEST_MODE||"true"===a.env.NEXT_PUBLIC_BYPASS_AUTH||"true"===new URLSearchParams(window.location.search).get("test")}function s(){if(!n())return null;let e=n()?{id:"test-user-id-12345",email:"test@radly.test",created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z",aud:"authenticated",role:"authenticated",app_metadata:{},user_metadata:{full_name:"Test User"},identities:[],factors:[],is_anonymous:!1,phone:"",email_confirmed_at:"2024-01-01T00:00:00Z",phone_confirmed_at:void 0,confirmed_at:"2024-01-01T00:00:00Z",last_sign_in_at:"2024-01-01T00:00:00Z",is_sso_user:!1,provider:"email",providers:["email"]}:null;return e?{access_token:"test-access-token",refresh_token:"test-refresh-token",expires_in:3600,expires_at:Math.floor(Date.now()/1e3)+3600,token_type:"bearer",user:e}:null}}}]);