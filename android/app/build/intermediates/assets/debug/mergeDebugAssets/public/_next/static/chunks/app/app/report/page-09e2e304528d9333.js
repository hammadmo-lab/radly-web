(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5656,8581],{3998:(e,t,a)=>{"use strict";a.d(t,{$:()=>c});var s=a(95155),r=a(12115),n=a(32467),i=a(83101),l=a(64269);let o=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-semibold ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"button-primary-gradient",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"button-outline-glass",secondary:"button-secondary-soft",ghost:"text-foreground hover:bg-[rgba(255,255,255,0.08)] hover:text-foreground",link:"text-info underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,t)=>{let{className:a,variant:r,size:i,asChild:c=!1,...d}=e,m=c?n.DX:"button";return(0,s.jsx)(m,{className:(0,l.cn)(o({variant:r,size:i,className:a})),ref:t,...d})});c.displayName="Button"},18024:(e,t,a)=>{"use strict";a.d(t,{Ap:()=>n,ZO:()=>i,ct:()=>r});var s=a(12115);function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{baseInterval:a=12e3,maxInterval:r=6e4,pauseWhenHidden:n=!0,immediate:i=!0,cleanupOnError:l=!0,backoffMultiplier:o=1.5,resetBackoffOnSuccess:c=!0}=t,[d,m]=(0,s.useState)(!0),[u,x]=(0,s.useState)(!0),[g,p]=(0,s.useState)(a),h=(0,s.useRef)(null),f=(0,s.useRef)(0),b=(0,s.useRef)(!0),v=(0,s.useCallback)(()=>{h.current&&(clearTimeout(h.current),h.current=null)},[]),y=(0,s.useCallback)(()=>{b.current&&d&&(u||!n)&&(v(),h.current=setTimeout(async()=>{if(b.current)try{await e(),c&&(f.current=0,p(a)),y()}catch(e){if(f.current++,p(Math.min(a*Math.pow(o,f.current),r)),l)return void m(!1);y()}},g))},[e,d,u,n,g,a,r,o,c,l,v]);(0,s.useEffect)(()=>{if(!n)return;let e=()=>{let e=!document.hidden;x(e),e&&d?y():e||v()};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[n,d,y,v]),(0,s.useEffect)(()=>(b.current=!0,()=>{b.current=!1,v()}),[v]),(0,s.useEffect)(()=>(d&&(u||!n)?(i&&Promise.resolve(e()).catch(console.error),y()):v(),v),[d,u,n,i,e,y,v]);let j=(0,s.useCallback)(async()=>{try{await e(),c&&(f.current=0,p(a))}catch(e){}},[e,c,a]);return{isPolling:d,isVisible:u,currentInterval:g,triggerPoll:j,pause:(0,s.useCallback)(()=>{m(!1),v()},[v]),resume:(0,s.useCallback)(()=>{m(!0)},[])}}function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(e,{baseInterval:1e4,maxInterval:12e4,backoffMultiplier:2,...t})}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(e,{baseInterval:15e3,maxInterval:6e4,backoffMultiplier:1.5,...t})}},20243:(e,t,a)=>{"use strict";a.d(t,{E:()=>n});var s=a(95155),r=a(64269);function n(e){let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",t),...a})}},23345:(e,t,a)=>{"use strict";a.d(t,{vJ:()=>r});var s=a(12115);function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{preventDoubleClick:a=!0,cleanupOnError:r=!0}=t,n=(0,s.useRef)(!1),{cleanup:i}=function(){let e=(0,s.useRef)([]),t=(0,s.useCallback)(t=>{e.current.push(t)},[]),a=(0,s.useCallback)(()=>{e.current.forEach(e=>{try{e()}catch(e){}}),e.current=[]},[]);return(0,s.useEffect)(()=>a,[a]),{addCleanup:t,cleanup:a}}();return(0,s.useCallback)(async t=>{if(null==t||t.preventDefault(),null==t||t.stopPropagation(),!a||!n.current)try{n.current=!0,await e()}catch(e){r&&i()}finally{n.current=!1}},[e,a,r,i])}},25656:(e,t,a)=>{"use strict";a.d(t,{clearTokenCache:()=>c,lx:()=>m,yd:()=>x,zA:()=>u});var s=a(96648);let r="https://edge.radly.app",n="0f0a24adba9edfede4bc7413f85967224db6d1501c16f5213e901048cf4eb445",i=null,l=0;async function o(){try{let e=Date.now();if(i&&l>e+3e5)return i;let t=(0,s.createBrowserSupabase)(),{data:{session:a}}=await t.auth.getSession();return i=(null==a?void 0:a.access_token)||null,l=(null==a?void 0:a.expires_at)?1e3*a.expires_at:0,i}catch(e){return null}}function c(){i=null,l=0}async function d(e){if(!e.ok){let t=await e.text().catch(()=>""),a=Error("".concat(e.status," ").concat(e.statusText));throw a.status=e.status,a.body=t,a}if(204!==e.status)return await e.json()}async function m(e){let t=await o(),a={"x-client-key":n,"X-Request-Id":crypto.randomUUID()};return t&&(a.authorization="Bearer ".concat(t)),d(await fetch("".concat(r).concat(e),{method:"GET",headers:a,credentials:"include",cache:"no-store"}))}async function u(e,t){let a=await o(),s={"content-type":"application/json","x-client-key":n,"X-Request-Id":crypto.randomUUID()};return a&&(s.authorization="Bearer ".concat(a)),d(await fetch("".concat(r).concat(e),{method:"POST",headers:s,body:JSON.stringify(t),credentials:"include"}))}async function x(e,t){let a=await o(),s={"content-type":"application/json","x-client-key":n,"X-Request-Id":crypto.randomUUID()};return a&&(s.authorization="Bearer ".concat(a)),d(await fetch("".concat(r).concat(e),{method:"PUT",headers:s,body:JSON.stringify(t),credentials:"include"}))}},28614:(e,t,a)=>{Promise.resolve().then(a.bind(a,50411))},46767:(e,t,a)=>{"use strict";a.d(t,{Bc:()=>l,ZI:()=>d,k$:()=>c,m_:()=>o});var s=a(95155),r=a(12115),n=a(47520),i=a(64269);let l=n.Kq,o=n.bL,c=r.forwardRef((e,t)=>(0,s.jsx)(n.l9,{ref:t,...e}));c.displayName=n.l9.displayName;let d=r.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...l}=e;return(0,s.jsx)(n.UC,{ref:t,sideOffset:r,className:(0,i.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})});d.displayName=n.UC.displayName},50411:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>er,dynamic:()=>es});var s=a(95155),r=a(12115),n=a(20063),i=a(51056),l=a(54879);let o=l.Ik({name:l.Yj().nullable().optional().transform(e=>null!=e?e:void 0),mrn:l.Yj().nullable().optional().transform(e=>null!=e?e:void 0),age:l.ai().nullable().optional().transform(e=>null!=e?e:void 0),dob:l.Yj().nullable().optional().transform(e=>null!=e?e:void 0),sex:l.Yj().nullable().optional().transform(e=>null!=e?e:void 0),history:l.Yj().nullable().optional().transform(e=>null!=e?e:void 0)}),c=l.Ik({name:l.Yj().nullable().optional().transform(e=>null!=e?e:void 0),date:l.Yj().nullable().optional().transform(e=>null!=e?e:void 0)}),d=l.Ik({title:l.Yj().optional(),technique:l.Yj().optional(),findings:l.Yj().optional(),impression:l.Yj().optional(),recommendations:l.Yj().optional()}),m=l.Ik({report:d.optional().default({}),patient:o.optional().default({}),signature:c.optional()});var u=a(1733);function x(e){let{patient:t}=e;return t&&(t.name||void 0!==t.age||t.sex||t.history||t.mrn||t.dob)?(0,s.jsxs)(u.P.section,{className:"rounded-xl border border-[var(--ds-border-medium)] p-4 mb-4 bg-[var(--ds-surface)]",initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.18},children:[(0,s.jsx)("h3",{className:"font-semibold mb-2 text-[var(--ds-text-primary)]",children:"Patient"}),(0,s.jsxs)("div",{className:"grid gap-2 md:grid-cols-3 text-sm text-[var(--ds-text-secondary)]",children:[t.name&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-[var(--ds-text-muted)]",children:"Name:"})," ",t.name]}),void 0!==t.age&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-[var(--ds-text-muted)]",children:"Age:"})," ",t.age]}),t.sex&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-[var(--ds-text-muted)]",children:"Sex:"})," ",t.sex]}),t.mrn&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-[var(--ds-text-muted)]",children:"MRN:"})," ",t.mrn]}),t.dob&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-[var(--ds-text-muted)]",children:"DOB:"})," ",t.dob]}),t.history&&(0,s.jsxs)("div",{className:"md:col-span-3",children:[(0,s.jsx)("span",{className:"text-[var(--ds-text-muted)]",children:"History:"})," ",t.history]})]})]}):null}function g(e){let{report:t,patient:a,signature:r,className:n=""}=e;if(!t)return(0,s.jsx)("div",{className:"max-w-3xl mx-auto bg-[var(--ds-surface)] border border-[var(--ds-border-medium)] shadow-md p-6 rounded-2xl",children:(0,s.jsx)("p",{className:"text-[var(--ds-text-muted)] text-center",children:"No report data available"})});let i=[.25,.1,.25,1],l={hidden:{opacity:0,y:6},visible:{opacity:1,y:0,transition:{duration:.18,ease:i}}};return(0,s.jsxs)(u.P.article,{className:"max-w-3xl mx-auto bg-[var(--ds-surface-elevated)] border border-[var(--ds-border-medium)] shadow-lg p-6 rounded-2xl space-y-6 print:shadow-none print:rounded-none print:bg-white print:text-black ".concat(n),variants:{hidden:{opacity:0,y:8},visible:{opacity:1,y:0,transition:{duration:.28,ease:i,when:"beforeChildren",staggerChildren:.06}}},initial:"hidden",animate:"visible",role:"article",children:[(0,s.jsx)(x,{patient:a}),(0,s.jsxs)(u.P.header,{className:"text-center",variants:l,children:[t.title&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-[var(--ds-text-primary)] mb-2",children:t.title}),(0,s.jsx)("div",{className:"bg-[var(--ds-primary)] h-0.5 w-24 mx-auto my-3 rounded"})]}),t.technique&&(0,s.jsx)("p",{className:"italic text-[var(--ds-text-secondary)] text-sm",children:t.technique})]}),t.findings&&(0,s.jsxs)(u.P.section,{variants:l,children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-[var(--ds-text-primary)] mb-3",children:"Findings"}),(0,s.jsx)("div",{className:"bg-[rgba(255,255,255,0.04)] border border-[var(--ds-border-light)] p-4 rounded-lg print:bg-transparent print:p-0 print:border-0",children:(0,s.jsx)("div",{className:"whitespace-pre-wrap text-[var(--ds-text-secondary)] leading-relaxed",children:t.findings})})]}),t.impression&&(0,s.jsxs)(u.P.section,{variants:l,children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-[var(--ds-text-primary)] mb-3",children:"Impression"}),(0,s.jsx)("div",{className:"bg-[rgba(58,130,247,0.08)] border border-[rgba(58,130,247,0.2)] p-4 rounded-lg print:bg-transparent print:p-0 print:border-0",children:(0,s.jsx)("div",{className:"whitespace-pre-wrap text-[var(--ds-text-primary)] font-medium leading-relaxed",children:t.impression})})]}),t.recommendations&&(0,s.jsxs)(u.P.section,{variants:l,children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-[var(--ds-text-primary)] mb-3",children:"Recommendations"}),(0,s.jsx)("div",{className:"bg-[rgba(63,191,140,0.08)] border border-[rgba(63,191,140,0.2)] p-4 rounded-lg print:bg-transparent print:p-0 print:border-0",children:(0,s.jsx)("div",{className:"whitespace-pre-wrap text-[var(--ds-text-secondary)] leading-relaxed",children:t.recommendations})})]}),r&&(r.name||r.date)&&(0,s.jsx)(u.P.section,{className:"mt-8 pt-6 border-t border-[var(--ds-border-medium)]",variants:l,children:(0,s.jsxs)("div",{className:"flex flex-col items-end space-y-2",children:[r.name&&(0,s.jsxs)("p",{className:"text-sm italic text-[var(--ds-text-secondary)]",children:[(0,s.jsx)("span",{className:"font-medium",children:"Signed:"})," ",r.name]}),r.date&&(0,s.jsxs)("p",{className:"text-sm italic text-[var(--ds-text-secondary)]",children:[(0,s.jsx)("span",{className:"font-medium",children:"Date:"})," ",r.date]})]})})]})}var p=a(42529),h=a(35299),f=a(18024),b=a(82684),v=a(1473),y=a(59699),j=a(95740),w=a(89715);let N=[{icon:b.A,text:"Analyzing patient demographics and clinical indication...",stage:"queued",minProgress:0,maxProgress:15},{icon:v.A,text:"Processing medical history and context...",stage:"running-early",minProgress:15,maxProgress:35},{icon:y.A,text:"Interpreting imaging findings with AI assistance...",stage:"running-mid",minProgress:35,maxProgress:60},{icon:j.A,text:"Generating differential diagnosis and impressions...",stage:"running-late",minProgress:60,maxProgress:80},{icon:w.A,text:"Formatting professional medical report...",stage:"finalizing",minProgress:80,maxProgress:95},{icon:p.A,text:"Quality checking terminology and structure...",stage:"done",minProgress:95,maxProgress:100}];function k(e){let{currentProgress:t,jobStatus:a}=e,r=N.findIndex(e=>t>=e.minProgress&&t<e.maxProgress)||0,n="done"===a?N.length-1:r;return(0,s.jsx)("div",{className:"space-y-3",children:N.map((e,t)=>{let r=t===n,i=t<n||"done"===a,l=e.icon;return(0,s.jsxs)(u.P.div,{initial:{opacity:0,x:-12},animate:{opacity:1,x:0},transition:{delay:.08*t},className:"flex items-start gap-2 sm:gap-3 rounded-xl border border-[rgba(255,255,255,0.08)] bg-[rgba(12,16,28,0.6)] px-3 sm:px-4 py-2 sm:py-3 transition-all duration-300 ".concat(r?"shadow-[0_18px_42px_rgba(31,64,175,0.35)] border-[rgba(75,142,255,0.35)]":""," ").concat(i?"border-[rgba(63,191,140,0.35)] bg-[rgba(63,191,140,0.16)]":""),children:[(0,s.jsx)("div",{className:"flex h-8 w-8 sm:h-10 sm:w-10 flex-shrink-0 items-center justify-center rounded-lg text-white ".concat(r?"bg-[linear-gradient(135deg,#2653FF,#4B8EFF)] animate-pulse":i?"bg-[linear-gradient(135deg,#3FBF8C,#6EE7B7)]":"bg-[rgba(18,22,36,0.85)] text-[rgba(207,207,207,0.6)]"),children:r?(0,s.jsx)(u.P.div,{animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"},children:(0,s.jsx)(l,{className:"h-4 w-4 sm:h-5 sm:w-5"})}):(0,s.jsx)(l,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),(0,s.jsx)("div",{className:"flex-1 min-w-0",children:(0,s.jsx)("p",{className:"text-xs sm:text-sm font-medium leading-tight ".concat(r||i?"text-white":"text-[rgba(207,207,207,0.55)]"),children:e.text})}),r&&(0,s.jsx)(u.P.div,{initial:{scale:0},animate:{scale:1},className:"flex-shrink-0",children:(0,s.jsx)("div",{className:"h-2 w-2 rounded-full bg-[rgba(75,142,255,0.8)] animate-ping"})}),i&&(0,s.jsx)(u.P.div,{initial:{scale:0},animate:{scale:1},className:"flex-shrink-0",children:(0,s.jsx)(p.A,{className:"h-5 w-5 text-[#7AE7B4]"})})]},e.stage)})})}var I=a(26497),_=a(17666),A=a(56154),F=a(83457);let P=[{icon:v.A,text:"The first CT scanner was invented in 1971 by Godfrey Hounsfield, revolutionizing medical imaging.",category:"History"},{icon:j.A,text:"MRI stands for Magnetic Resonance Imaging, using powerful magnets instead of radiation to create detailed images.",category:"Technology"},{icon:_.A,text:"The average radiology report contains 200-500 words of technical observations and clinical impressions.",category:"Fun Fact"},{icon:A.A,text:"AI can now detect certain conditions like lung nodules with 95%+ accuracy, assisting radiologists worldwide.",category:"AI"},{icon:F.A,text:"Modern PACS systems can store millions of medical images and retrieve them in seconds for comparison.",category:"Technology"},{icon:v.A,text:"X-rays were discovered accidentally by Wilhelm R\xf6ntgen in 1895 while experimenting with cathode rays.",category:"History"},{icon:j.A,text:"A single CT scan can generate over 1000 individual image slices, providing incredible detail.",category:"Technology"},{icon:_.A,text:"Radiologists interpret an average of 20,000-30,000 images per day in busy medical centers.",category:"Fun Fact"},{icon:A.A,text:"The first MRI scan of a human body took nearly 5 hours. Today, most scans complete in under 30 minutes.",category:"Technology"},{icon:F.A,text:"Medical imaging has evolved from simple X-rays to 3D reconstructions and even 4D real-time imaging.",category:"Progress"},{icon:v.A,text:"Ultrasound imaging is completely radiation-free, making it safe for pregnant women and children.",category:"Safety"},{icon:j.A,text:"PET scans can detect cancer by measuring metabolic activity, often before structural changes are visible.",category:"Technology"},{icon:_.A,text:"The human body contains enough iron to make a small nail, which is why MRI machines need careful screening.",category:"Fun Fact"},{icon:A.A,text:"AI-powered reporting can reduce report turnaround time from hours to minutes while maintaining quality.",category:"AI"},{icon:F.A,text:"Contrast agents help highlight blood vessels and organs, making abnormalities easier to detect.",category:"Technology"}];function C(e){let{rotationInterval:t=4e3}=e,[a,n]=(0,r.useState)(0);(0,r.useEffect)(()=>{let e=setInterval(()=>{n(e=>(e+1)%P.length)},t);return()=>clearInterval(e)},[t]);let i=P[a],l=i.icon;return(0,s.jsx)("div",{className:"relative min-h-[120px] flex items-center justify-center w-full overflow-hidden",children:(0,s.jsx)(I.N,{mode:"wait",children:(0,s.jsx)(u.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"w-full",children:(0,s.jsxs)("div",{className:"aurora-card border border-[rgba(255,255,255,0.08)] bg-[rgba(12,16,28,0.72)] p-4 sm:p-6",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3 sm:gap-4",children:[(0,s.jsx)("div",{className:"flex h-10 w-10 sm:h-12 sm:w-12 flex-shrink-0 items-center justify-center rounded-xl bg-[linear-gradient(135deg,#2653FF,#8F82FF)] text-white shadow-[0_16px_36px_rgba(31,64,175,0.4)]",children:(0,s.jsx)(l,{className:"h-5 w-5 sm:h-6 sm:w-6"})}),(0,s.jsxs)("div",{className:"flex-1 space-y-2 min-w-0",children:[(0,s.jsx)("span",{className:"inline-block rounded-full border border-[rgba(255,255,255,0.12)] bg-[rgba(12,16,28,0.78)] px-3 py-1 text-xs font-semibold uppercase tracking-[0.18em] text-[rgba(207,207,207,0.6)]",children:i.category}),(0,s.jsx)("p",{className:"text-xs sm:text-sm leading-relaxed text-[rgba(207,207,207,0.75)] break-words",children:i.text})]})]}),(0,s.jsx)("div",{className:"mt-4 flex justify-center gap-2 overflow-x-auto scrollbar-hide",children:P.map((e,t)=>(0,s.jsx)("div",{className:"h-1 rounded-full transition-all ".concat(t===a?"w-8 bg-[rgba(75,142,255,0.7)]":"w-2 bg-[rgba(207,207,207,0.25)]")},t))})]})},a)})})}var S=a(26983),R=a(1524);function E(e){let{startTime:t,jobStatus:a,estimatedSeconds:n}=e,[i,l]=(0,r.useState)("0s"),[o,c]=(0,r.useState)(0);(0,r.useEffect)(()=>{if(!t)return void l("0s");let e=setInterval(()=>{let e=Math.floor((Date.now()-t)/1e3);if(e<60)l("".concat(e,"s"));else{let t=Math.floor(e/60);l("".concat(t,"m ").concat(e%60,"s"))}},1e3);return()=>clearInterval(e)},[t]),(0,r.useEffect)(()=>{if("queued"===a)c(0);else if("running"===a){let e=setInterval(()=>{c(e=>Math.min(e+Math.floor(20*Math.random())+10,450))},1500);return()=>clearInterval(e)}else"done"===a&&c(Math.floor(100*Math.random())+350)},[a]);let d=[{icon:S.A,label:"Elapsed Time",value:i,accent:"from-[rgba(75,142,255,0.16)] to-[rgba(75,142,255,0.35)]",iconGlow:"bg-[linear-gradient(135deg,#2653FF,#4B8EFF)]",show:null!==t},{icon:w.A,label:"Words Generated",value:o>0?"~".concat(o):"0",accent:"from-[rgba(63,191,140,0.16)] to-[rgba(63,191,140,0.32)]",iconGlow:"bg-[linear-gradient(135deg,#3FBF8C,#6EE7B7)]",show:"running"===a||"done"===a},{icon:R.A,label:"Status",value:"done"===a?"Complete":"running"===a?"Processing":"Queued",accent:"from-[rgba(248,183,77,0.16)] to-[rgba(248,183,77,0.32)]",iconGlow:"bg-[linear-gradient(135deg,#F8B74D,#FF6B6B)]",show:!0},{icon:A.A,label:"Est. Remaining",value:n?"~".concat(n,"s"):"Calculating…",accent:"from-[rgba(143,130,255,0.16)] to-[rgba(143,130,255,0.35)]",iconGlow:"bg-[linear-gradient(135deg,#8F82FF,#B094FF)]",show:"done"!==a&&void 0!==n}];return(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 lg:gap-4",children:d.filter(e=>e.show).map((e,t)=>(0,s.jsx)(u.P.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"aurora-card border border-[rgba(255,255,255,0.08)] p-3 sm:p-4 lg:p-5 bg-gradient-to-br ".concat(e.accent),children:(0,s.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,s.jsx)("div",{className:"flex h-8 w-8 sm:h-10 sm:w-10 flex-shrink-0 items-center justify-center rounded-lg ".concat(e.iconGlow," text-white shadow-[0_14px_32px_rgba(31,64,175,0.35)]"),children:(0,s.jsx)(e.icon,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),(0,s.jsxs)("div",{className:"text-left min-w-0",children:[(0,s.jsx)("p",{className:"text-[0.55rem] sm:text-[0.65rem] uppercase tracking-[0.18em] text-[rgba(207,207,207,0.55)] truncate",children:e.label}),(0,s.jsx)(u.P.p,{initial:{scale:1.1,opacity:.85},animate:{scale:1,opacity:1},className:"text-sm sm:text-lg lg:text-xl font-semibold text-white truncate",children:e.value},e.value)]})]})},e.label))})}var M=a(20508),T=a(7744),B=a(61194);function z(e){let{progress:t}=e,a=[{name:"Patient Information",icon:M.A,minProgress:0},{name:"Clinical History",icon:T.A,minProgress:20},{name:"Technique & Protocol",icon:w.A,minProgress:35},{name:"Detailed Findings",icon:w.A,minProgress:50},{name:"Impression & Recommendations",icon:B.A,minProgress:75}];return(0,s.jsxs)("div",{className:"aurora-card border border-[rgba(255,255,255,0.08)] overflow-hidden w-full",children:[(0,s.jsxs)("div",{className:"border-b border-[rgba(255,255,255,0.08)] bg-[rgba(12,16,28,0.78)] px-4 sm:px-6 py-3 sm:py-4",children:[(0,s.jsxs)("h3",{className:"flex items-center gap-2 text-sm sm:text-base font-semibold text-white",children:[(0,s.jsx)(w.A,{className:"h-4 w-4 sm:h-5 sm:w-5 flex-shrink-0"}),(0,s.jsx)("span",{className:"truncate",children:"Report structure preview"})]}),(0,s.jsx)("p",{className:"mt-1 text-xs sm:text-sm text-[rgba(207,207,207,0.65)]",children:"Sections assembling in real time."})]}),(0,s.jsx)("div",{className:"space-y-3 sm:space-y-4 p-4 sm:p-6 w-full overflow-hidden",children:a.map(e=>{let a=t>=e.minProgress,r=e.icon;return(0,s.jsxs)("div",{className:"rounded-xl border border-[rgba(255,255,255,0.08)] bg-[rgba(12,16,28,0.7)] px-3 sm:px-4 py-2 sm:py-3 transition-all duration-300 w-full ".concat(a?"border-[rgba(63,191,140,0.35)] bg-[rgba(63,191,140,0.15)] shadow-[0_12px_28px_rgba(63,191,140,0.25)]":""),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[(0,s.jsx)("div",{className:"flex h-8 w-8 sm:h-9 sm:w-9 flex-shrink-0 items-center justify-center rounded-lg transition-colors duration-300 ".concat(a?"bg-[linear-gradient(135deg,#3FBF8C,#6EE7B7)] text-white":"bg-[rgba(18,22,36,0.85)] text-[rgba(207,207,207,0.55)]"),children:(0,s.jsx)(r,{className:"h-4 w-4 sm:h-4.5 sm:w-4.5"})}),(0,s.jsx)("h4",{className:"text-xs sm:text-sm font-semibold truncate flex-1 ".concat(a?"text-white":"text-[rgba(207,207,207,0.55)]"),children:e.name}),a&&(0,s.jsx)("div",{className:"ml-auto flex-shrink-0",children:(0,s.jsx)(B.A,{className:"h-4 w-4 sm:h-5 sm:w-5 text-[#7AE7B4]"})})]}),(0,s.jsx)("div",{className:"mt-3 space-y-2 w-full overflow-hidden",children:a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"h-2 w-full rounded bg-[rgba(63,191,140,0.35)]"}),(0,s.jsx)("div",{className:"h-2 w-[90%] rounded bg-[rgba(63,191,140,0.3)]"}),(0,s.jsx)("div",{className:"h-2 w-[75%] rounded bg-[rgba(63,191,140,0.25)]"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"h-2 w-full rounded bg-[rgba(207,207,207,0.2)] animate-pulse"}),(0,s.jsx)("div",{className:"h-2 w-[90%] rounded bg-[rgba(207,207,207,0.2)] animate-pulse"}),(0,s.jsx)("div",{className:"h-2 w-[75%] rounded bg-[rgba(207,207,207,0.2)] animate-pulse"})]})})]},e.name)})}),(0,s.jsx)("div",{className:"border-t border-[rgba(255,255,255,0.08)] bg-[rgba(12,16,28,0.78)] px-4 sm:px-6 py-2 sm:py-3 text-center text-[0.7rem] sm:text-xs text-[rgba(207,207,207,0.55)]",children:t<100?"Generating report structure… ".concat(Math.round(t),"% complete"):"Report generation complete! Loading…"})]})}var D=a(71708);let J=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"success",t=["#10b981","#14b8a6","#8b5cf6","#06b6d4","#22c55e"];switch(e){case"success":let a={origin:{y:.7},colors:t};function s(e,t){(0,D.A)({...a,...t,particleCount:Math.floor(200*e)})}s(.25,{spread:26,startVelocity:55}),s(.2,{spread:60}),s(.35,{spread:100,decay:.91,scalar:.8}),s(.1,{spread:120,startVelocity:25,decay:.92,scalar:1.2}),s(.1,{spread:120,startVelocity:45});break;case"complete":let r=Date.now()+3e3;!function e(){(0,D.A)({particleCount:2,angle:60,spread:55,origin:{x:0,y:0},colors:t}),(0,D.A)({particleCount:2,angle:120,spread:55,origin:{x:1,y:0},colors:t}),Date.now()<r&&requestAnimationFrame(e)}();break;case"burst":(0,D.A)({particleCount:100,spread:70,origin:{y:.6},colors:t})}};function O(e){let{jobId:t,queuePosition:a,estimatedTime:n,jobStatus:i}=e,[l,o]=(0,r.useState)(0),c=(0,r.useRef)(null),d=(0,r.useRef)(!1);(0,r.useEffect)(()=>{(null==i?void 0:i.status)==="running"&&null===c.current&&(c.current=Date.now())},[i]),(0,r.useEffect)(()=>{(null==i?void 0:i.status)==="done"&&!d.current&&(d.current=!0,window.matchMedia("(prefers-reduced-motion: reduce)").matches||setTimeout(()=>{J("success")},500))},[i]),(0,r.useEffect)(()=>i?"queued"===i.status?void o(e=>{let t=(null!=a?a:0)>0?8:30;return void 0!==i.progress?Math.max(e,i.progress):Math.max(e,t)}):"running"===i.status?void o(e=>void 0!==i.progress?Math.max(e,i.progress):Math.max(e,35)):"done"===i.status?void o(100):"error"===i.status?void o(0):void 0:void o(0),[i,a]),(0,f.ct)(()=>{i&&"done"!==i.status&&"error"!==i.status&&o(e=>{if(void 0!==i.progress){let t=Math.max(e,i.progress);return t>=100?100:t}let t=(null!=a?a:0)>0,s="queued"===i.status?t?25:80:95;return e>=s?e:Math.min(s,e+2.5*Math.random())})},{baseInterval:1e3,maxInterval:2e3,pauseWhenHidden:!1,immediate:!1});let m=a&&a>0?30*a:(null==i?void 0:i.status)==="running"?45:void 0,x=(null==i?void 0:i.status)==="done";return(0,s.jsxs)("div",{className:"relative min-h-screen overflow-x-hidden bg-[var(--ds-bg-gradient)] text-white",children:[(0,s.jsxs)("div",{className:"pointer-events-none absolute inset-0 overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 opacity-55 bg-[radial-gradient(circle_at_20%_15%,rgba(75,142,255,0.25),transparent_60%),radial-gradient(circle_at_80%_10%,rgba(143,130,255,0.2),transparent_60%)]"}),(0,s.jsx)("div",{className:"absolute inset-y-0 -left-32 w-64 bg-[radial-gradient(circle,rgba(63,191,140,0.18),transparent_65%)]"}),(0,s.jsx)("div",{className:"absolute inset-y-0 -right-48 w-72 bg-[radial-gradient(circle,rgba(248,183,77,0.16),transparent_70%)]"})]}),(0,s.jsx)("div",{className:"relative mx-auto w-full max-w-full sm:max-w-6xl px-3 py-6 sm:px-4 sm:py-12 lg:py-16",children:(0,s.jsxs)(u.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"hero-starfield w-full rounded-2xl sm:rounded-3xl lg:rounded-[46px] px-3 py-5 sm:px-8 sm:py-10 lg:px-16 lg:py-16",children:[(0,s.jsx)("div",{className:"hero-aurora"}),(0,s.jsxs)("div",{className:"relative space-y-6 sm:space-y-8 lg:space-y-10",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4 sm:space-y-6",children:[(0,s.jsx)("div",{className:"flex h-16 w-16 sm:h-20 sm:w-20 lg:h-24 lg:w-24 items-center justify-center rounded-full border border-[rgba(75,142,255,0.38)] bg-[rgba(12,16,28,0.75)] shadow-[0_32px_88px_rgba(31,64,175,0.5)]",children:x?(0,s.jsx)(p.A,{className:"h-10 w-10 sm:h-12 sm:w-12 lg:h-14 lg:w-14 text-white"}):(0,s.jsx)(h.A,{className:"h-10 w-10 sm:h-12 sm:w-12 lg:h-14 lg:w-14 text-white animate-spin"})}),(0,s.jsxs)("div",{className:"w-full space-y-2 sm:space-y-3 px-2",children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] sm:tracking-[0.28em] text-[rgba(207,207,207,0.5)]",children:x?"Complete":"Assistant at work"}),(0,s.jsx)("h1",{className:"text-xl font-semibold leading-tight sm:text-2xl lg:text-3xl xl:text-[3rem] xl:leading-[1.1] break-words",children:x?"Report ready for your review \uD83C\uDF89":"Generating your radiology report"}),(0,s.jsx)("p",{className:"mx-auto w-full max-w-2xl text-[0.7rem] sm:text-xs lg:text-sm xl:text-base text-[rgba(207,207,207,0.72)] leading-relaxed",children:x?"Radly assembled the report. Take a moment to review and finalize it with your clinical judgment.":"Radly is aligning findings, impressions, and structured sections behind the scenes. We will bring you the draft shortly."})]})]}),(0,s.jsxs)("div",{className:"grid gap-4 sm:gap-6 lg:gap-8 lg:grid-cols-[1.5fr_1fr] w-full overflow-hidden",children:[(0,s.jsxs)("div",{className:"space-y-4 sm:space-y-6 min-w-0",children:[(0,s.jsxs)("div",{className:"aurora-card border border-[rgba(255,255,255,0.08)] p-4 sm:p-6 lg:p-7 w-full",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,s.jsx)("span",{className:"text-xs sm:text-sm font-semibold uppercase tracking-[0.12em] sm:tracking-[0.18em] text-[rgba(207,207,207,0.5)]",children:"Overall progress"}),(0,s.jsxs)("span",{className:"text-2xl sm:text-3xl font-semibold text-white",children:[Math.round(l),"%"]})]}),(0,s.jsx)("div",{className:"mt-4 h-3 w-full rounded-full border border-[rgba(255,255,255,0.12)] bg-[rgba(12,16,28,0.75)] overflow-hidden",children:(0,s.jsx)(u.P.div,{className:"h-full rounded-full bg-[linear-gradient(90deg,#2653FF_0%,#4B8EFF_50%,#8F82FF_100%)]",initial:{width:0},animate:{width:"".concat(Math.max(l,3),"%")},transition:{duration:.5,ease:"easeOut"}})}),(0,s.jsx)(k,{currentProgress:l,jobStatus:null==i?void 0:i.status})]}),(null!=a?a:0)>0&&(0,s.jsx)(u.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"aurora-card border border-[rgba(75,142,255,0.28)] bg-[rgba(12,16,28,0.65)] p-4 sm:p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-[0.65rem] sm:text-xs uppercase tracking-[0.12em] sm:tracking-[0.18em] text-[rgba(207,207,207,0.5)]",children:"Queue position"}),(0,s.jsxs)("p",{className:"text-2xl sm:text-3xl font-semibold text-white",children:["#",a]})]}),n&&(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-[0.65rem] sm:text-xs uppercase tracking-[0.12em] sm:tracking-[0.18em] text-[rgba(207,207,207,0.5)]",children:"Estimated wait"}),(0,s.jsx)("p",{className:"text-xl sm:text-2xl font-semibold text-white",children:n})]})]})})]}),(0,s.jsxs)("div",{className:"space-y-4 sm:space-y-6 min-w-0",children:[(0,s.jsx)(E,{startTime:c.current,jobStatus:null==i?void 0:i.status,estimatedSeconds:m}),((null==i?void 0:i.status)==="running"||l>30)&&(0,s.jsx)(z,{progress:l}),(0,s.jsxs)("div",{className:"space-y-2 sm:space-y-3 w-full overflow-hidden",children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.12em] sm:tracking-[0.18em] text-[rgba(207,207,207,0.5)]",children:"Did you know?"}),(0,s.jsx)(C,{rotationInterval:5e3})]})]})]}),t&&(0,s.jsxs)("div",{className:"flex items-center justify-center text-[0.65rem] sm:text-xs font-mono uppercase tracking-[0.12em] sm:tracking-[0.18em] text-[rgba(207,207,207,0.45)]",children:["Job ID: ",t]})]})]})})]})}var q=a(3998),U=a(39867),Z=a(90960),Y=a(18720),G=a(23345),X=a(76444),L=a(11186),$=a(11647),H=a(46767),V=a(23327),Q=a(39347),W=a(16023),K=a(20243);function ee(e){var t;let{value:a,onChange:n,userTier:i="free",disabled:l=!1}=e,{data:o,isLoading:c}=(0,W.F2)(),{data:d,isLoading:m}=(0,W.M0)(),u=(null==o?void 0:o.profiles)||[],x=null==d?void 0:d.default_profile,g="professional"===i||"premium"===i;return((0,r.useEffect)(()=>{!a&&x&&g&&n(x.profile_id)},[x,a,n,g]),g)?c||m?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(X.J,{children:"Report Formatting"}),(0,s.jsx)(K.E,{className:"h-10 w-full"})]}):0===u.length?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(X.J,{children:"Report Formatting"}),(0,s.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-blue-700",children:["No custom formatting profiles yet."," ",(0,s.jsx)("a",{href:"/app/settings",className:"text-blue-900 hover:underline font-medium",children:"Create one in settings"})]})]}):(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(X.J,{htmlFor:"formatting-profile",children:"Report Formatting"}),(0,s.jsx)(H.Bc,{children:(0,s.jsxs)(H.m_,{children:[(0,s.jsx)(H.k$,{asChild:!0,children:(0,s.jsx)("button",{className:"inline-flex items-center justify-center",type:"button",children:(0,s.jsx)(V.A,{className:"w-4 h-4 text-gray-400 cursor-help"})})}),(0,s.jsx)(H.ZI,{className:"max-w-xs",children:(0,s.jsx)("p",{className:"text-xs",children:'Select a formatting profile to apply custom styles to your exported report. Leave as "System Default" to use standard formatting.'})})]})})]}),(0,s.jsxs)(L.l6,{value:a||"__system_default__",onValueChange:e=>n("__system_default__"===e?null:e),disabled:l,children:[(0,s.jsx)(L.bq,{id:"formatting-profile",className:"border-2 focus:border-emerald-500",children:(0,s.jsx)(L.yv,{placeholder:"System Default"})}),(0,s.jsxs)(L.gC,{children:[(0,s.jsx)(L.eb,{value:"__system_default__",children:(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("span",{children:"System Default"})})}),x&&(0,s.jsx)(L.eb,{value:x.profile_id,children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(Q.A,{className:"w-3 h-3 fill-emerald-600 text-emerald-600"}),(0,s.jsx)("span",{children:x.profile_name}),(0,s.jsx)($.E,{variant:"secondary",className:"ml-auto bg-emerald-100 text-emerald-700 text-xs",children:"Default"})]})}),u.filter(e=>!e.is_default).map(e=>(0,s.jsx)(L.eb,{value:e.profile_id,children:(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("span",{children:e.profile_name})})},e.profile_id))]})]}),a&&(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[(null==(t=u.find(e=>e.profile_id===a))?void 0:t.profile_name)||"Selected profile"," will be used for formatting"]}),!a&&(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Standard system formatting will be applied"})]}):(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(X.J,{className:"flex items-center gap-2",children:["Report Formatting",(0,s.jsxs)($.E,{variant:"secondary",className:"bg-violet-100 text-violet-700",children:[(0,s.jsx)(j.A,{className:"w-3 h-3 mr-1"}),"Professional"]})]}),(0,s.jsxs)("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-600",children:["Custom formatting is available for Professional and Premium users."," ",(0,s.jsx)("a",{href:"/pricing",className:"text-emerald-600 hover:underline font-medium",children:"Upgrade to unlock"})]})]})}var et=a(18927),ea=a(31969);let es="force-dynamic";function er(){var e,t;let a,l=(0,n.useSearchParams)(),o=(0,n.useRouter)(),c=l.get("id"),[d,u]=(0,r.useState)(null),[x,p]=(0,r.useState)(null),[b,v]=(0,r.useState)(null),[y,j]=(0,r.useState)(null),[w,N]=(0,r.useState)(!1),[k,I]=(0,r.useState)(null),{user:_}=(0,et.A)(),A=(0,ea.JO)(),F=(0,r.useRef)(null);(0,r.useEffect)(()=>{c||o.push("/app")},[c,o]),(0,f.Ap)(async()=>{if(c)try{let e=await (0,i.ax)(c);u(e),"running"!==e.status||F.current||(F.current=Date.now())}catch(t){let e=t instanceof Error?t.message:"Failed to fetch job status";if(p(e),e.includes("401"))return void o.push("/login")}},{immediate:!0}),(0,f.ZO)(async()=>{try{let e=await (0,i.zX)();v(e.queue_depth),j(e.jobs_running)}catch(e){if(e instanceof Error&&e.message.includes("401"))return void o.push("/login")}},{immediate:!0});let P=(0,G.vJ)(async()=>{if(null==d?void 0:d.result){N(!0);try{var e;let t=m.parse(d.result),a=t.report,s=null!=(e=t.patient)?e:{},r=t.signature,n=!!(s&&(s.name||void 0!==s.age||s.sex||s.mrn||s.dob||s.history)),i=a.title?"".concat(a.title.replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"_"),".docx"):"radiology_report.docx",l=await (0,Z.Z)(a,s,r,n,i,k,null==_?void 0:_.id),o=l.public_url||l.url,c=document.createElement("a");c.href=o,c.download=i,document.body.appendChild(c),c.click(),document.body.removeChild(c),Y.oR.success("Report exported successfully!")}catch(t){let e=t instanceof Error?t.message:"Failed to export report";Y.oR.error(e)}finally{N(!1)}}});if(!c)return(0,s.jsxs)("div",{className:"max-w-3xl mx-auto py-16 text-center space-y-4",children:[(0,s.jsx)(h.A,{className:"h-8 w-8 animate-spin mx-auto text-muted-foreground"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]});if(x||(null==d?void 0:d.status)==="error")return(0,s.jsxs)("div",{className:"max-w-3xl mx-auto py-16 text-center space-y-4",children:[(0,s.jsx)("p",{className:"text-red-600 font-medium",children:"Report generation failed."}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:null!=(e=null!=x?x:null==d?void 0:d.error)?e:"Unknown error"}),(0,s.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,s.jsx)(q.$,{onClick:()=>o.push("/app/templates"),children:"Back to Templates"}),(0,s.jsx)(q.$,{variant:"outline",onClick:()=>o.refresh(),children:"Retry"})]})]});if(!d||"done"!==d.status){let e=null!=b&&null!=y?Math.max(0,b-y):null,t=null!=e&&e>0?"".concat(Math.ceil(2*e)," min"):null;return(0,s.jsx)(O,{jobId:c,queuePosition:e,estimatedTime:t,jobStatus:d})}let C=d.result;if(!C)return(0,s.jsxs)("div",{className:"max-w-3xl mx-auto py-16 text-center space-y-4",children:[(0,s.jsx)("p",{className:"text-red-600 font-medium",children:"Report generation failed."}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No result data available"}),(0,s.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,s.jsx)(q.$,{onClick:()=>o.push("/app/templates"),children:"Back to Templates"}),(0,s.jsx)(q.$,{variant:"outline",onClick:()=>o.refresh(),children:"Retry"})]})]});try{a=m.parse(C)}catch(e){return(0,s.jsxs)("div",{className:"max-w-3xl mx-auto py-16 text-center space-y-4",children:[(0,s.jsx)("p",{className:"text-red-600 font-medium",children:"Report generation failed."}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Invalid report data format"}),(0,s.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,s.jsx)(q.$,{onClick:()=>o.push("/app/templates"),children:"Back to Templates"}),(0,s.jsx)(q.$,{variant:"outline",onClick:()=>o.refresh(),children:"Retry"})]})]})}let S=a.report,R=null!=(t=a.patient)?t:{},E=a.signature;return(0,s.jsxs)("div",{className:"py-8",children:[(0,s.jsx)("div",{className:"max-w-3xl mx-auto mb-6 space-y-4",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:[(0,s.jsx)("div",{className:"flex-1 w-full",children:(0,s.jsx)(ee,{value:k,onChange:I,userTier:A})}),(0,s.jsxs)(q.$,{onClick:P,disabled:w,variant:"outline",className:"flex items-center gap-2 w-full sm:w-auto","aria-label":"Download report as DOCX",children:[w?(0,s.jsx)(h.A,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)(U.A,{className:"h-4 w-4"}),w?"Exporting...":"Download DOCX"]})]})}),(0,s.jsx)(g,{report:S,patient:R,signature:E})]})}},51056:(e,t,a)=>{"use strict";a.d(t,{Ix:()=>n,ax:()=>i,zX:()=>l});var s=a(25656);function r(e){if(!e)return null;let t=Date.parse(e);if(!Number.isNaN(t))return new Date(t).toISOString().slice(0,10);let a=e.match(/^(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2,4})$/);if(a){let[,e,t,s]=a,r=parseInt(e,10)>12?t:e,n=parseInt(e,10)>12?e:t,i=2===s.length?"20".concat(s):s;return"".concat(i.padStart(4,"0"),"-").concat(r.padStart(2,"0"),"-").concat(n.padStart(2,"0"))}return null}async function n(e){var t,a,n,i,l,o,c;let d={template_id:e.templateId,findings:e.findings};if((null==(t=e.indication)?void 0:t.trim())&&(d.indication=e.indication.trim()),(null==(a=e.impression)?void 0:a.trim())&&(d.impression=e.impression.trim()),(null==(n=e.technique)?void 0:n.trim())&&(d.technique=e.technique.trim()),e.patient){let t={};(null==(i=e.patient.name)?void 0:i.trim())&&(t.name=e.patient.name.trim()),null!=e.patient.age&&(t.age=Number(e.patient.age)),e.patient.sex&&(t.sex=e.patient.sex),(null==(l=e.patient.mrn)?void 0:l.trim())&&(t.mrn=e.patient.mrn.trim());let a=r(e.patient.dob||null);a&&(t.dob=a),(null==(o=e.patient.history)?void 0:o.trim())&&(t.history=e.patient.history.trim()),Object.keys(t).length&&(d.patient=t)}if(e.signature){let t={};(null==(c=e.signature.name)?void 0:c.trim())&&(t.name=e.signature.name.trim());let a=r(e.signature.date||null);a&&(t.date=a),Object.keys(t).length&&(d.signature=t)}return(0,s.zA)("/v1/generate/async",d)}let i=e=>(0,s.lx)("/v1/jobs/".concat(encodeURIComponent(e))),l=()=>(0,s.lx)("/v1/queue/stats")},57667:(e,t,a)=>{"use strict";a.d(t,{l:()=>r});var s=a(88727);function r(){return(0,s.createBrowserClient)("https://bsldtgivgtyzacwyvcfh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJzbGR0Z2l2Z3R5emFjd3l2Y2ZoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5MzQ1NzMsImV4cCI6MjA3NTUxMDU3M30.vjHPo6WEASxYBOAGYmZ93o5n9RhZvANSlLhaT-wagTs")}},64269:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var s=a(2821),r=a(75889);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},90960:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n,n:()=>r});var s=a(57667);async function r(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,s.l)(),{data:n}=await r.auth.getSession(),i=null==(t=n.session)?void 0:t.access_token,l=new Headers(a.headers||{});l.has("content-type")||l.set("content-type","application/json"),l.set("x-client-key","0f0a24adba9edfede4bc7413f85967224db6d1501c16f5213e901048cf4eb445"),l.set("X-Request-Id",crypto.randomUUID()),e.startsWith("/admin/")&&l.set("x-admin-key","7bd9c5638a66d5c9c03651533b2d7c92baa0ec16658081d0bf445c1575391b12"),i&&l.set("authorization","Bearer ".concat(i));let o=await fetch("".concat("https://edge.radly.app","/v1").concat(e),{...a,headers:l,credentials:"include"});if(401===o.status){let e=await o.text().catch(()=>"");throw Error("401 Unauthorized: ".concat(e||"missing/invalid token"))}return o}async function n(e,t,a,s,n,i,l){let o={report:{title:e.title,technique:e.technique,findings:e.findings,impression:e.impression,recommendations:e.recommendations},patient:{name:t.name,age:t.age,sex:t.sex,mrn:t.mrn,dob:t.dob,history:t.history},signature:a?{name:a.name,date:a.date}:null,include_identifiers:s,filename:n};i&&(o.formatting_profile_id=i),l&&(o.user_id=l);let c=await r("/export/docx/link",{method:"POST",body:JSON.stringify(o)});if(!c.ok){let e=await c.text().catch(()=>"Unknown error");throw Error("Export failed: ".concat(c.status," ").concat(e))}return c.json()}},96648:(e,t,a)=>{"use strict";a.d(t,{createBrowserSupabase:()=>r});var s=a(88727);function r(){return(0,s.createBrowserClient)("https://bsldtgivgtyzacwyvcfh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJzbGR0Z2l2Z3R5emFjd3l2Y2ZoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5MzQ1NzMsImV4cCI6MjA3NTUxMDU3M30.vjHPo6WEASxYBOAGYmZ93o5n9RhZvANSlLhaT-wagTs",{auth:{flowType:"pkce",detectSessionInUrl:!0,persistSession:!0}})}}},e=>{e.O(0,[5707,8727,4230,1733,6743,2149,2454,6692,2615,3677,7025,3881,8441,1255,7358],()=>e(e.s=28614)),_N_E=e.O()}]);