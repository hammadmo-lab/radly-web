(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8253],{11647:(e,t,r)=>{"use strict";r.d(t,{E:()=>l});var a=r(95155);r(12115);var s=r(83101),n=r(64269);let i=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:r}),t),...s})}},18927:(e,t,r)=>{"use strict";r.d(t,{O:()=>c,A:()=>d});var a=r(95155),s=r(12115),n=r(88727),i=r(90260);function l(){try{let e=(0,n.createBrowserClient)("https://bsldtgivgtyzacwyvcfh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJzbGR0Z2l2Z3R5emFjd3l2Y2ZoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5MzQ1NzMsImV4cCI6MjA3NTUxMDU3M30.vjHPo6WEASxYBOAGYmZ93o5n9RhZvANSlLhaT-wagTs");if((0,i.Wj)()){let t=(0,i.Ld)();return{...e,auth:{...e.auth,getSession:async()=>({data:{session:t},error:null}),getUser:async()=>({data:{user:(null==t?void 0:t.user)||null},error:null}),signOut:async()=>({error:null}),onAuthStateChange:e=>(e("SIGNED_IN",t),{data:{subscription:{unsubscribe:()=>{}}}})}}}return e}catch(e){return{auth:{getSession:async()=>({data:{session:null},error:null}),getUser:async()=>({data:{user:null},error:null}),signOut:async()=>({error:null}),onAuthStateChange:()=>({data:{subscription:{unsubscribe:()=>{}}}})}}}}let o=(0,s.createContext)(void 0);function c(e){let{children:t}=e,[n,i]=(0,s.useState)(null),[c,d]=(0,s.useState)(null),[u,m]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=l();e.auth.getSession().then(e=>{var t;let{data:{session:r}}=e;d(r),i(null!=(t=null==r?void 0:r.user)?t:null),m(!1)}).catch(e=>{d(null),i(null),m(!1)});let{data:{subscription:t}}=e.auth.onAuthStateChange((e,t)=>{var r;d(t),i(null!=(r=null==t?void 0:t.user)?r:null),m(!1)});return()=>t.unsubscribe()},[]);let h=async()=>{try{let e=l();await e.auth.signOut();let{clearTokenCache:t}=await r.e(5656).then(r.bind(r,25656));t()}catch(e){}};return(0,a.jsx)(o.Provider,{value:{user:n,session:c,loading:u,signOut:h},children:t})}function d(){let e=(0,s.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},23345:(e,t,r)=>{"use strict";r.d(t,{vJ:()=>s});var a=r(12115);function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{preventDoubleClick:r=!0,cleanupOnError:s=!0}=t,n=(0,a.useRef)(!1),{cleanup:i}=function(){let e=(0,a.useRef)([]),t=(0,a.useCallback)(t=>{e.current.push(t)},[]),r=(0,a.useCallback)(()=>{e.current.forEach(e=>{try{e()}catch(e){}}),e.current=[]},[]);return(0,a.useEffect)(()=>r,[r]),{addCleanup:t,cleanup:r}}();return(0,a.useCallback)(async t=>{if(null==t||t.preventDefault(),null==t||t.stopPropagation(),!r||!n.current)try{n.current=!0,await e()}catch(e){s&&i()}finally{n.current=!1}},[e,r,s,i])}},31969:(e,t,r)=>{"use strict";r.d(t,{JO:()=>l,NL:()=>o,Rs:()=>i});var a=r(22454),s=r(25656),n=r(85578);function i(){let{isAuthed:e,mounted:t}=(0,n.Q)();return(0,a.I)({queryKey:["subscription-usage"],queryFn:()=>(0,s.lx)("/v1/subscription/usage"),refetchInterval:6e4,enabled:t&&e,retry:(e,t)=>{if(t&&"object"==typeof t&&"status"in t){let e=t.status;if(401===e||403===e||404===e)return!1}return e<3},staleTime:3e4})}function l(){let{data:e}=i();return(null==e?void 0:e.subscription.tier)||"free"}function o(){let{isAuthed:e,mounted:t}=(0,n.Q)();return(0,a.I)({queryKey:["subscription"],queryFn:()=>(0,s.lx)("/v1/subscriptions/status"),refetchInterval:6e4,enabled:t&&e,retry:(e,t)=>{if(t&&"object"==typeof t&&"status"in t){let e=t.status;if(401===e||403===e||404===e)return!1}return e<3},staleTime:3e4})}},37723:(e,t,r)=>{"use strict";r.d(t,{T:()=>l,b:()=>o});var a=r(95155),s=r(12115),n=r(18720);let i=(0,s.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,s.useState)(null),[o,c]=(0,s.useState)(null),[d,u]=(0,s.useState)(!1);(0,s.useEffect)(()=>{try{let e=localStorage.getItem("admin_key"),t=localStorage.getItem("api_key");e&&t&&(l(e),c(t))}catch(e){}finally{u(!0)}},[]);let m=(0,s.useCallback)(()=>{try{l(null),c(null),localStorage.removeItem("admin_key"),localStorage.removeItem("api_key"),n.oR.success("Logged out successfully")}catch(e){}},[]),h=!!(r&&o);return(0,a.jsx)(i.Provider,{value:{adminKey:r,apiKey:o,isAuthenticated:h,isInitialized:d,login:(e,t)=>{l(e),c(t);try{localStorage.setItem("admin_key",e),localStorage.setItem("api_key",t)}catch(e){}},logout:m},children:t})}function o(){let e=(0,s.useContext)(i);if(!e)throw Error("useAdminAuth must be used within AdminAuthProvider");return e}},65994:(e,t,r)=>{Promise.resolve().then(r.bind(r,69194))},69194:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>eu});var a=r(95155),s=r(18927),n=r(12115),i=r(20063),l=r(90260);function o(e){let{children:t,redirectTo:r="/auth/signin"}=e,{user:o,loading:c}=(0,s.A)(),d=(0,i.useRouter)();return((0,n.useEffect)(()=>{!(0,l.Wj)()&&(c||o||d.push(r))},[o,c,d,r]),(0,l.Wj)())?(0,a.jsx)(a.Fragment,{children:t}):c?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):o?(0,a.jsx)(a.Fragment,{children:t}):null}var c=r(52619),d=r.n(c),u=r(1733),m=r(23345),h=r(50906),p=r(65644),x=r(89715),b=r(17910),g=r(9540),f=r(65229),v=r(20508),j=r(84926),N=r(6191),w=r(24033),y=r(15870),_=r(3998),A=r(6259),F=r(46591),k=r(64269);let S=n.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(F.bL,{ref:t,className:(0,k.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...s})});S.displayName=F.bL.displayName,n.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(F._V,{ref:t,className:(0,k.cn)("aspect-square h-full w-full",r),...s})}).displayName=F._V.displayName;let C=n.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(F.H4,{ref:t,className:(0,k.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...s})});C.displayName=F.H4.displayName;var E=r(37723),I=r(27830),R=r(95740),P=r(56154),M=r(1524),T=r(26983),L=r(85998),B=r(51834),D=r(11647),O=r(80991),z=r(20243),W=r(31969),U=r(86487);function V(){let e=(0,i.useRouter)(),{data:t,isLoading:r}=(0,W.Rs)(),[s,l]=(0,n.useState)(!1),[o,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(null),[m]=(0,n.useState)(()=>{let e=[{id:"insight-templates",title:"Plan tomorrow's templates today",description:"Queue up tomorrow's cases in Templates and they'll be ready for review when you log in.",icon:R.A,iconClassName:"bg-[rgba(143,130,255,0.18)] text-[#8F82FF] ring-[rgba(143,130,255,0.45)]",badge:"Workflow tip",badgeVariant:"outline",badgeClassName:"border-transparent bg-[rgba(143,130,255,0.18)] text-[#D7D1FF]",actionLabel:"Browse templates",href:"/app/templates"},{id:"insight-reports",title:"Keep your report history tidy",description:"Archive older reports from the Reports page to keep search lightning fast.",icon:x.A,iconClassName:"bg-[rgba(75,142,255,0.16)] text-[#4B8EFF] ring-[rgba(75,142,255,0.35)]",badge:"Housekeeping",badgeVariant:"outline",badgeClassName:"border-transparent bg-[rgba(75,142,255,0.18)] text-[#C7DAFF]",actionLabel:"Open reports",href:"/app/reports"},{id:"insight-speed",title:"Speed up with reusable snippets",description:"Save recurring phrases as template snippets so every new report starts 80% complete.",icon:P.A,iconClassName:"bg-[rgba(63,191,140,0.16)] text-[#3FBF8C] ring-[rgba(63,191,140,0.35)]",badge:"Power user",badgeVariant:"outline",badgeClassName:"border-transparent bg-[rgba(63,191,140,0.18)] text-[#B6F2DB]",actionLabel:"Manage templates",href:"/app/templates"}];return e[Math.floor(Math.random()*e.length)]});(0,n.useEffect)(()=>{let e=localStorage.getItem("recent-template-id"),t=localStorage.getItem("recent-template-name");e&&u({id:e,name:t})},[]);let h=(0,n.useMemo)(()=>{let e=[],r=null==t?void 0:t.subscription;if(r){var a,s,n;let i=r.reports_limit||0,l=r.reports_used||0,o=Math.max(null!=(a=r.reports_remaining)?a:0,0),c=i>0?Math.min(l/i*100,100):0,d=r.period_end?new Date(r.period_end):null,u=d&&!Number.isNaN(d.getTime())?"Resets ".concat((0,I.m)(d,{addSuffix:!0})):"Cycle renewal date coming up",m=i>0?o<=Math.max(3,Math.round(.15*i)):o<=3;e.push({id:"subscription-usage",title:m?"You're nearing your plan limit":"Plenty of runway left",description:m?"Only ".concat(o," report").concat(1===o?"":"s"," left on the ").concat(r.tier_display_name," plan."):"You still have ".concat(o," report").concat(1===o?"":"s"," available this cycle."),icon:M.A,iconClassName:m?"bg-[rgba(255,107,107,0.18)] text-[#FF6B6B] ring-[rgba(255,107,107,0.35)]":"bg-[rgba(63,191,140,0.16)] text-[#3FBF8C] ring-[rgba(63,191,140,0.35)]",badge:"".concat(Math.round(c),"% used"),badgeVariant:"outline",badgeClassName:m?"bg-[rgba(255,107,107,0.18)] text-[#FFD7D7] border-transparent":"bg-[rgba(63,191,140,0.18)] text-[#D0F7EB] border-transparent",meta:u,progress:c,actionLabel:m?"Review plans":void 0,href:m?"/pricing":void 0,attention:m});let h=(0,U.EL)(null==t?void 0:t.usage_stats);null!=h&&h>=.5&&e.push({id:"generation-speed",title:"Reports finish in ~".concat((0,U.Xo)(h)),description:"Your 30-day average generation time looks healthy. We will surface alerts if it trends upward.",icon:T.A,iconClassName:"bg-[rgba(75,142,255,0.16)] text-[#4B8EFF] ring-[rgba(75,142,255,0.35)]",badge:"Performance",badgeVariant:"outline",badgeClassName:"border-transparent bg-[rgba(75,142,255,0.18)] text-[#C7DAFF]",meta:"Tracking ".concat(null!=(n=null==t||null==(s=t.usage_stats)?void 0:s.total_reports)?n:r.reports_used," recent reports")})}return e},[t]),p=(0,n.useMemo)(()=>{if(!d)return null;let e=d.name?d.name.length>40?"".concat(d.name.slice(0,37),"…"):d.name:null;return{id:"resume-draft",title:e?'Resume "'.concat(e,'"'):"Resume your saved draft",description:"We'll restore the latest inputs so you can finish in one click.",icon:x.A,iconClassName:"bg-[rgba(143,130,255,0.18)] text-[#8F82FF] ring-[rgba(143,130,255,0.45)]",badge:"Draft ready",badgeVariant:"outline",badgeClassName:"border-transparent bg-[rgba(75,142,255,0.18)] text-[#C7DAFF]",actionLabel:"Open draft",href:"/app/generate?templateId=".concat(encodeURIComponent(d.id)),attention:!0}},[d]),b=(0,n.useMemo)(()=>{let e=[...h];return p&&e.unshift(p),m&&e.push({...m,attention:!1}),e},[h,p,m]),g=(0,n.useCallback)((t,r)=>{t?e.push(t):r&&r(),l(!1)},[e]),f=b.some(e=>e.attention)&&!s&&!o;return(0,a.jsxs)(B.lG,{open:s,onOpenChange:e=>{l(e),e&&!o&&c(!0)},children:[(0,a.jsx)(B.zM,{asChild:!0,children:(0,a.jsxs)(_.$,{variant:"ghost",size:"icon",className:(0,k.cn)("relative hidden sm:flex text-[rgba(207,207,207,0.75)] transition-transform hover:scale-[1.03] hover:text-white",s&&"text-[#4B8EFF]"),title:"Notifications","aria-label":"Open notifications",children:[(0,a.jsx)(L.A,{className:"w-5 h-5"}),f&&(0,a.jsx)("span",{className:"absolute top-1 right-1 flex h-5 min-w-[1.25rem] items-center justify-center rounded-full bg-error px-1 text-[10px] font-semibold text-white",children:Math.min(b.length,9)})]})}),(0,a.jsxs)(B.Cf,{className:"flex w-full max-w-lg max-h-[85vh] flex-col overflow-hidden rounded-3xl border border-[rgba(255,255,255,0.08)] bg-[rgba(12,12,14,0.95)] p-0 shadow-[0_24px_48px_rgba(0,0,0,0.6)] backdrop-blur-xl",children:[(0,a.jsx)("div",{className:"border-b border-[rgba(255,255,255,0.08)] bg-[linear-gradient(135deg,rgba(38,83,255,0.4)0%,rgba(12,12,14,0.9)70%)] px-6 py-5",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.2em] text-[rgba(207,207,207,0.75)]",children:"Notification Center"}),(0,a.jsx)(B.L3,{className:"mt-1 text-2xl font-semibold text-white",children:"Stay on track effortlessly"}),(0,a.jsx)(B.rr,{className:"mt-1 text-sm text-[rgba(207,207,207,0.75)]",children:"Tailored nudges and insights so your reporting flow stays fast."})]}),(0,a.jsx)("div",{className:"hidden sm:flex h-11 w-11 items-center justify-center rounded-xl bg-[rgba(255,255,255,0.12)] text-[#4B8EFF] shadow-[0_0_10px_rgba(75,142,255,0.35)]",children:(0,a.jsx)(R.A,{className:"h-5 w-5"})})]})}),(0,a.jsxs)("div",{className:"flex-1 space-y-4 overflow-y-auto px-6 py-5",children:[r&&0===b.length?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(z.E,{className:"h-20 w-full rounded-2xl"}),(0,a.jsx)(z.E,{className:"h-20 w-full rounded-2xl"}),(0,a.jsx)(z.E,{className:"h-20 w-full rounded-2xl"})]}):0===b.length?(0,a.jsxs)("div",{className:"rounded-2xl border border-dashed border-[rgba(255,255,255,0.16)] bg-[rgba(22,22,26,0.7)] p-6 text-center",children:[(0,a.jsx)("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-[rgba(255,255,255,0.1)] shadow",children:(0,a.jsx)(R.A,{className:"h-6 w-6 text-[#4B8EFF]"})}),(0,a.jsx)("h3",{className:"mt-4 text-lg font-semibold text-white",children:"All quiet for now"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-[rgba(207,207,207,0.75)]",children:"We'll ping you here when there's something truly worth your attention."})]}):b.map(e=>(0,a.jsxs)("div",{className:"rounded-2xl border border-[rgba(255,255,255,0.08)] bg-[rgba(22,22,26,0.92)] shadow-sm transition-all hover:-translate-y-0.5 hover:shadow-[0_12px_32px_rgba(0,0,0,0.45)]",children:[(0,a.jsxs)("div",{className:"grid gap-3 px-4 py-4 sm:grid-cols-[auto,1fr] sm:gap-5 sm:px-5 sm:py-5",children:[(0,a.jsx)("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-xl border border-[rgba(255,255,255,0.06)] bg-[rgba(12,12,14,0.8)] shadow-inner",children:(0,a.jsx)("div",{className:(0,k.cn)("flex h-9 w-9 items-center justify-center rounded-lg ring-1 ring-inset",e.iconClassName),children:(0,a.jsx)(e.icon,{className:"h-4 w-4"})})}),(0,a.jsxs)("div",{className:"flex min-w-0 flex-col gap-3",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between sm:gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-semibold leading-tight text-white",children:e.title}),(0,a.jsx)("p",{className:"text-sm leading-relaxed text-[rgba(207,207,207,0.75)]",children:e.description})]}),e.badge&&(0,a.jsx)(D.E,{variant:e.badgeVariant,className:(0,k.cn)("rounded-full border border-transparent px-3 py-1 text-[11px] font-semibold uppercase tracking-wide leading-none",e.badgeClassName),children:e.badge})]}),null!=e.progress&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(O.k,{value:e.progress}),(0,a.jsx)("p",{className:"text-xs font-medium uppercase tracking-wide text-[rgba(207,207,207,0.6)]",children:e.meta})]}),null==e.progress&&e.meta&&(0,a.jsx)("p",{className:"text-xs font-medium uppercase tracking-wide text-[rgba(207,207,207,0.6)]",children:e.meta})]})]}),e.actionLabel&&(0,a.jsx)("div",{className:"flex items-center justify-end gap-2 border-t border-[rgba(255,255,255,0.08)] px-4 py-3",children:(0,a.jsx)(_.$,{size:"sm",variant:"outline",className:"h-9 px-4 text-sm font-semibold text-[#4B8EFF] border-[#4B8EFF]/30 hover:bg-[rgba(75,142,255,0.12)]",onClick:()=>g(e.href,e.onAction),children:e.actionLabel})})]},e.id)),(0,a.jsx)("div",{className:"rounded-2xl border border-[rgba(255,255,255,0.08)] bg-[rgba(22,22,26,0.88)] p-4",children:(0,a.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-white",children:"Tune your notification preferences"}),(0,a.jsx)("p",{className:"text-sm text-[rgba(207,207,207,0.75)]",children:"Choose email digests and in-app nudges that work best for your day."})]}),(0,a.jsx)(_.$,{size:"sm",variant:"outline",className:"mt-1 h-9 px-3 text-sm font-semibold text-[#4B8EFF] border-[#4B8EFF]/30 hover:bg-[rgba(75,142,255,0.12)] sm:mt-0",onClick:()=>g("/app/settings"),children:"Adjust settings"})]})})]})]})]})}let Z=e=>{let{href:t,icon:r,label:s,isActive:n}=e;return(0,a.jsxs)(d(),{href:t,className:(0,k.cn)("flex items-center gap-3 rounded-xl border border-[rgba(255,255,255,0.08)] px-4 py-3 text-sm font-medium transition-all duration-200","min-h-[44px] touch-manipulation text-[rgba(207,207,207,0.7)] bg-[rgba(12,16,28,0.72)] hover:border-[rgba(75,142,255,0.32)] hover:bg-[rgba(75,142,255,0.12)] hover:text-white hover:shadow-[0_14px_30px_rgba(31,64,175,0.35)]",n&&"border-[rgba(75,142,255,0.45)] bg-[rgba(75,142,255,0.16)] text-white shadow-[0_18px_42px_rgba(31,64,175,0.4)]"),children:[(0,a.jsx)("div",{className:(0,k.cn)("flex h-9 w-9 items-center justify-center rounded-lg border border-[rgba(255,255,255,0.08)] bg-[rgba(18,22,36,0.85)] text-[rgba(207,207,207,0.7)] transition-colors",n&&"border-[rgba(75,142,255,0.35)] bg-[rgba(75,142,255,0.2)] text-[#D7E3FF]"),children:(0,a.jsx)(r,{className:"h-4.5 w-4.5"})}),(0,a.jsx)("span",{children:s})]})};function Y(e){let{user:t,onSignOut:r}=e,[s,l]=(0,n.useState)(!1),o=(0,i.usePathname)(),{isAuthenticated:c}=(0,E.b)(),d=[{href:"/app/dashboard",icon:h.A,label:"Dashboard"},{href:"/app/templates",icon:p.A,label:"Templates"},{href:"/app/reports",icon:x.A,label:"Reports"}];return c&&d.push({href:"/admin",icon:b.A,label:"Admin"}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.$,{variant:"ghost",size:"icon",className:"md:hidden",onClick:()=>l(!0),"aria-label":"Open navigation menu",children:(0,a.jsx)(g.A,{className:"w-5 h-5"})}),s&&(0,a.jsxs)(u.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 md:hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm",onClick:()=>l(!1)}),(0,a.jsxs)(u.P.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",damping:30,stiffness:300},className:"relative h-full w-80 max-w-[88vw] bg-[rgba(8,12,22,0.96)] border-r border-[rgba(75,142,255,0.25)] shadow-[0_30px_80px_rgba(10,14,24,0.75)]",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between border-b border-[rgba(255,255,255,0.08)] p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-[linear-gradient(135deg,#2653FF_0%,#4B8EFF_60%,#8F82FF_100%)] shadow-[0_18px_42px_rgba(31,64,175,0.42)]",children:(0,a.jsx)(x.A,{className:"h-5 w-5 text-white"})}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-sm uppercase tracking-[0.24em] text-[rgba(207,207,207,0.45)]",children:"Radly"}),(0,a.jsx)("span",{className:"text-xl font-semibold text-white",children:"Assistant"})]})]}),(0,a.jsx)(_.$,{variant:"ghost",size:"icon",onClick:()=>l(!1),"aria-label":"Close navigation menu",className:"text-[rgba(207,207,207,0.7)] hover:text-white",children:(0,a.jsx)(f.A,{className:"w-5 h-5"})})]}),(0,a.jsx)("nav",{className:"space-y-3 p-4",children:d.map(e=>(0,a.jsx)(Z,{href:e.href,icon:e.icon,label:e.label,isActive:o.startsWith(e.href)},e.href))}),(0,a.jsxs)("div",{className:"absolute inset-x-0 bottom-0 border-t border-[rgba(255,255,255,0.08)] bg-[rgba(6,10,18,0.95)] p-4",children:[(0,a.jsxs)("div",{className:"mb-4 flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full border border-[rgba(255,255,255,0.08)] bg-[rgba(18,22,36,0.85)] text-[rgba(207,207,207,0.7)]",children:(0,a.jsx)(v.A,{className:"h-4.5 w-4.5"})}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsx)("p",{className:"truncate text-sm font-medium text-white",children:(null==t?void 0:t.email)||"test@radly.test"})})]}),(0,a.jsxs)(_.$,{variant:"ghost",onClick:()=>{r(),l(!1)},className:"w-full justify-center rounded-xl border border-[rgba(255,255,255,0.12)] bg-[rgba(18,22,36,0.72)] text-[rgba(207,207,207,0.75)] hover:border-[rgba(255,107,107,0.35)] hover:bg-[rgba(255,107,107,0.16)] hover:text-[#FFD1D1]",children:[(0,a.jsx)(j.A,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]})]})]})]})}function J(e){var t,r,s;let{user:n,onSignOut:l}=e,o=(0,i.usePathname)(),c=(0,i.useRouter)(),{isAuthenticated:g}=(0,E.b)(),f=(0,m.vJ)(()=>{c.push("/app/templates")}),v=[{href:"/app/dashboard",icon:h.A,label:"Dashboard"},{href:"/app/templates",icon:p.A,label:"Templates"},{href:"/app/reports",icon:x.A,label:"Reports"}];return g&&v.push({href:"/admin",icon:b.A,label:"Admin"}),(0,a.jsx)("header",{className:"sticky top-0 z-50 w-full backdrop-blur-xl bg-[rgba(12,12,14,0.92)] border-b border-[rgba(255,255,255,0.05)] shadow-[0_1px_2px_rgba(255,255,255,0.05)]",children:(0,a.jsxs)("div",{className:"container flex h-16 items-center justify-between px-4 md:px-6",children:[(0,a.jsxs)(d(),{href:"/app/dashboard",className:"flex items-center gap-3 group",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,#4B8EFF_0%,rgba(12,12,14,0)_65%)] rounded-xl blur-sm opacity-80 group-hover:opacity-100 transition-opacity duration-300"}),(0,a.jsx)("div",{className:"relative w-10 h-10 bg-[linear-gradient(135deg,rgba(58,130,247,0.9)0%,rgba(143,130,255,0.9)100%)] rounded-xl flex items-center justify-center shadow-[0_8px_24px_rgba(58,130,247,0.45)]",children:(0,a.jsx)(x.A,{className:"w-6 h-6 text-white drop-shadow"})})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-2xl font-bold text-gradient-brand",children:"Radly"}),(0,a.jsx)("span",{className:"text-xs text-[var(--ds-text-muted)] hidden sm:block",children:"Medical Reporting"})]})]}),(0,a.jsx)("nav",{className:"hidden md:flex items-center space-x-1",children:v.map(e=>{let t=o.startsWith(e.href);return(0,a.jsxs)(d(),{href:e.href,className:(0,k.cn)("relative px-4 py-2 rounded-lg transition-all duration-200","flex items-center gap-2 text-sm font-medium text-[var(--ds-text-secondary)]",t?"text-[#3A82F7] bg-[rgba(58,130,247,0.12)]":"hover:text-white hover:bg-[rgba(255,255,255,0.06)]"),children:[(0,a.jsx)(e.icon,{className:(0,k.cn)("w-4 h-4 text-[var(--ds-text-secondary)]",t&&"text-[#3A82F7]")}),(0,a.jsx)("span",{children:e.label}),t&&(0,a.jsx)(u.P.div,{layoutId:"activeNavTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#3A82F7]",transition:{type:"spring",bounce:.2,duration:.6}})]},e.href)})}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(_.$,{onClick:f,children:[(0,a.jsx)(N.A,{className:"w-4 h-4 mr-2"}),"New Report"]}),(0,a.jsx)(V,{}),(0,a.jsxs)(A.rI,{children:[(0,a.jsx)(A.ty,{asChild:!0,children:(0,a.jsxs)(_.$,{variant:"ghost",className:"flex items-center gap-2 h-10 px-3",children:[(0,a.jsx)(S,{className:"w-8 h-8",children:(0,a.jsx)(C,{className:"bg-primary text-white text-sm font-semibold",children:(null==n||null==(t=n.email)?void 0:t.charAt(0).toUpperCase())||"U"})}),(0,a.jsx)("span",{className:"hidden lg:block text-sm font-medium",children:(null==n||null==(r=n.email)?void 0:r.split("@")[0])||"User"}),(0,a.jsx)(w.A,{className:"w-4 h-4 opacity-50"})]})}),(0,a.jsxs)(A.SQ,{align:"end",className:"w-56",children:[(0,a.jsx)(A.lp,{children:(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium leading-none",children:(null==n||null==(s=n.email)?void 0:s.split("@")[0])||"User"}),(0,a.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:(null==n?void 0:n.email)||"user@example.com"})]})}),(0,a.jsx)(A.mB,{}),(0,a.jsxs)(A._2,{onClick:()=>c.push("/app/settings"),children:[(0,a.jsx)(y.A,{className:"w-4 h-4 mr-2"}),(0,a.jsx)("span",{children:"Settings"})]}),(0,a.jsx)(A.mB,{}),(0,a.jsxs)(A._2,{onClick:l,className:"text-error focus:text-error focus:bg-error/10",children:[(0,a.jsx)(j.A,{className:"w-4 h-4 mr-2"}),(0,a.jsx)("span",{children:"Sign Out"})]})]})]})]})]})})}function $(e){let{pathname:t}=e,{isAuthenticated:r}=(0,E.b)(),s=[{href:"/app/dashboard",icon:h.A,label:"Home"},{href:"/app/templates",icon:p.A,label:"Templates"},{href:"/app/reports",icon:x.A,label:"Reports"}];return r&&s.push({href:"/admin",icon:b.A,label:"Admin"}),(0,a.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 md:hidden bg-[rgba(12,12,14,0.94)] backdrop-blur-lg border-t border-[rgba(255,255,255,0.06)] z-40 safe-area-inset-bottom shadow-[0_-4px_12px_rgba(0,0,0,0.45)]",children:(0,a.jsx)("div",{className:"flex justify-around items-center h-16 px-2",children:s.map(e=>{let r=t.startsWith(e.href);return(0,a.jsxs)(d(),{href:e.href,className:"flex flex-col items-center justify-center gap-1 flex-1 h-full relative group",children:[r&&(0,a.jsx)(u.P.div,{layoutId:"mobileActiveTab",className:"absolute top-0 left-1/2 -translate-x-1/2 w-12 h-1 bg-[#3A82F7] rounded-full",transition:{type:"spring",bounce:.2,duration:.6}}),(0,a.jsx)(u.P.div,{whileTap:{scale:.9},className:(0,k.cn)("p-3 rounded-xl transition-all duration-200","min-w-[44px] min-h-[44px] flex items-center justify-center",r?"bg-[rgba(58,130,247,0.16)]":"group-active:bg-[rgba(255,255,255,0.08)]"),children:(0,a.jsx)(e.icon,{className:(0,k.cn)("w-6 h-6 transition-colors",r?"text-[#3A82F7]":"text-[rgba(207,207,207,0.7)]")})}),(0,a.jsx)("span",{className:(0,k.cn)("text-xs font-medium transition-colors",r?"text-[#3A82F7]":"text-[rgba(207,207,207,0.7)]"),children:e.label})]},e.href)})})})}var q=r(87025),G=r(99776),Q=r(80549),X=r(25656);async function H(e,t,r){return await (0,X.zA)("/v1/notifications/register",{fcm_token:e,platform:t,device_name:r})}function K(e,t){switch(e){case"view_report":return t?"/app/reports?id=".concat(t):"/app/reports";case"view_error":return"/app/reports";case"renew_subscription":case"update_payment":return"/app/settings";default:return"/app/dashboard"}}var ee=r(18720),et=r(42529),er=r(78874),ea=r(52056),es=r(23327);function en(e){let{autoRegister:t=!0,showInAppNotifications:s=!0}=e,l=(0,i.useRouter)(),{isNative:o}=(0,q.Vj)(),{mutate:c}=function(e){let t=(0,G.jE)();return(0,Q.n)({mutationFn:e=>{let{fcm_token:t,platform:r,device_name:a}=e;return H(t,r,a)},onSuccess:r=>{var a;t.invalidateQueries({queryKey:["notification-tokens"]}),null==e||null==(a=e.onSuccess)||a.call(e,r)},onError:null==e?void 0:e.onError})}({onSuccess:()=>{},onError:e=>{}}),[d,u]=(0,n.useState)(!1),m=(0,n.useCallback)(e=>{let{data:t}=e,r=K(t.action,t.report_id);l.push(r),s&&ee.oR.info(e.title,{description:e.body})},[l,s]),h=(0,n.useCallback)(e=>{let t;if(!s)return;let{data:r}=e;switch(r.type){case"report_complete":t=(0,a.jsx)(et.A,{className:"w-5 h-5 text-green-500"});break;case"report_failed":t=(0,a.jsx)(er.A,{className:"w-5 h-5 text-red-500"});break;case"usage_warning":case"subscription_expiring":t=(0,a.jsx)(ea.A,{className:"w-5 h-5 text-yellow-500"});break;case"test":t=(0,a.jsx)(L.A,{className:"w-5 h-5 text-blue-500"});break;default:t=(0,a.jsx)(es.A,{className:"w-5 h-5 text-blue-500"})}(0,ee.oR)(e.title,{description:e.body,icon:t,action:r.action?{label:"View",onClick:()=>{let e=K(r.action,r.report_id);l.push(e)}}:void 0})},[l,s]);return(0,n.useEffect)(()=>{if(o&&!d)return r.e(6209).then(r.bind(r,36209)).then(e=>{let{PushNotifications:r}=e;r.checkPermissions().then(e=>{"granted"===e.receive&&(r.register(),r.addListener("registration",e=>{if(t){let t=function(){let e=window.navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(e)?"ios":/android/.test(e)?"android":null}(),r=function(){let e=window.navigator.userAgent;if(/iPhone/.test(e))return"iPhone";if(/iPad/.test(e))return"iPad";if(/iPod/.test(e))return"iPod";if(/Android/.test(e)){let t=e.match(/Android.*;\s([^)]+)\)/);return t&&t[1]?t[1]:"Android Device"}return"Unknown Device"}();t&&c({fcm_token:e.value,platform:t,device_name:r})}}),r.addListener("registrationError",e=>{}),r.addListener("pushNotificationActionPerformed",e=>{m(e.notification.data)}),r.addListener("pushNotificationReceived",e=>{h({title:e.title||"",body:e.body||"",data:e.data})}))}),u(!0)}),()=>{r.e(6209).then(r.bind(r,36209)).then(e=>{let{PushNotifications:t}=e;t.removeAllListeners()})}},[o,d,t,c,m,h]),null}var ei=r(86948),el=r(94266);let eo="radly_notification_permission_prompted",ec="radly_notification_permission_dismissed";function ed(e){let{onPermissionGranted:t,onPermissionDenied:s,onDismiss:i}=e,{isNative:l,platform:o}=(0,q.Vj)(),[c,d]=(0,n.useState)(!1),[u,m]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(!l)return;let e=localStorage.getItem(eo),t=localStorage.getItem(ec);if(e||t)return;let r=setTimeout(()=>{d(!0)},3e3);return()=>clearTimeout(r)},[l]);let h=async()=>{m(!0);try{let{PushNotifications:e}=await r.e(6209).then(r.bind(r,36209)),a=await e.requestPermissions();"granted"===a.receive?(await e.register(),await e.addListener("registration",e=>{null==t||t(e.value)}),await e.addListener("registrationError",e=>{ee.oR.error("Failed to enable notifications"),null==s||s()}),ee.oR.success("Notifications enabled!")):(ee.oR.error("Notification permission denied"),null==s||s()),localStorage.setItem(eo,"true"),d(!1)}catch(e){ee.oR.error("Failed to enable notifications"),null==s||s()}finally{m(!1)}};return c?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:(0,a.jsxs)(ei.Zp,{className:"max-w-md w-full shadow-2xl",children:[(0,a.jsx)(ei.aR,{children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-primary/10",children:(0,a.jsx)(L.A,{className:"w-6 h-6 text-primary"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(ei.ZB,{children:"Enable Notifications"}),(0,a.jsx)(ei.BT,{children:"Stay updated on your reports"})]})]}),(0,a.jsx)(_.$,{variant:"ghost",size:"sm",onClick:()=>{localStorage.setItem(ec,"true"),d(!1),null==i||i()},className:"h-8 w-8 p-0",children:(0,a.jsx)(f.A,{className:"w-4 h-4"})})]})}),(0,a.jsxs)(ei.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-3 text-sm text-muted-foreground",children:[(0,a.jsx)("p",{children:"Get notified when:"}),(0,a.jsxs)("ul",{className:"space-y-2 ml-4",children:[(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-primary mt-0.5",children:"•"}),(0,a.jsx)("span",{children:"Your report generation is complete"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-primary mt-0.5",children:"•"}),(0,a.jsx)("span",{children:"You're approaching your usage limit"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-primary mt-0.5",children:"•"}),(0,a.jsx)("span",{children:"Your subscription is expiring soon"})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 pt-2",children:[(0,a.jsxs)(_.$,{onClick:h,disabled:u,className:"w-full",children:[(0,a.jsx)(L.A,{className:"w-4 h-4 mr-2"}),u?"Enabling...":"Enable Notifications"]}),(0,a.jsxs)(_.$,{variant:"outline",onClick:()=>{localStorage.setItem(eo,"true"),d(!1),null==s||s()},disabled:u,className:"w-full",children:[(0,a.jsx)(el.A,{className:"w-4 h-4 mr-2"}),"Not Now"]})]}),(0,a.jsx)("p",{className:"text-xs text-center text-muted-foreground",children:"You can change this later in Settings"})]})]})}):null}function eu(e){let{children:t}=e,{user:r,signOut:n}=(0,s.A)(),c=(0,i.usePathname)(),d=(0,l.Wj)(),u=async()=>{try{await n(),ee.oR.success("Signed out successfully"),window.location.href="https://radly.app"}catch(e){ee.oR.error("Failed to sign out")}};return(0,a.jsx)(o,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-[var(--ds-bg-gradient)] text-[var(--ds-text-primary)] overflow-x-hidden",children:[d&&(0,a.jsx)("div",{className:"bg-yellow-500/10 border-b border-yellow-500/30 px-4 py-2 text-center text-sm text-yellow-200",children:"\uD83E\uDDEA Test Mode Active"}),(0,a.jsx)(J,{user:d?{email:"test@radly.test"}:r,onSignOut:u}),(0,a.jsx)(Y,{user:d?{email:"test@radly.test"}:r,onSignOut:u}),(0,a.jsx)("main",{className:"container max-w-6xl mx-auto px-4 sm:px-6 py-8 sm:py-12 pb-24 md:pb-12 neon-page-stack w-full",children:(0,a.jsx)("div",{className:"neon-shell p-6 sm:p-8 md:p-10 backdrop-blur-lg",children:t})}),(0,a.jsx)($,{pathname:c}),(0,a.jsx)(en,{autoRegister:!0,showInAppNotifications:!0}),(0,a.jsx)(ed,{onPermissionGranted:e=>{},onPermissionDenied:()=>{}})]})})}},80991:(e,t,r)=>{"use strict";r.d(t,{k:()=>s});var a=r(95155);function s(e){let{value:t}=e,r=Math.max(0,Math.min(100,null!=t?t:0));return(0,a.jsxs)("div",{className:"relative w-full h-2 rounded-full border border-[rgba(255,255,255,0.12)] bg-[rgba(255,255,255,0.06)] overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 opacity-40 bg-[linear-gradient(90deg,rgba(255,255,255,0.12)0%,transparent 45%,rgba(255,255,255,0.12)90%)]"}),(0,a.jsx)("div",{className:"relative h-full rounded-full bg-[linear-gradient(90deg,#2653FF_0%,#4B8EFF_45%,#8F82FF_100%)] shadow-[0_0_18px_rgba(75,142,255,0.55)] transition-all duration-500",style:{width:"".concat(r,"%")}})]})}r(12115)},85578:(e,t,r)=>{"use strict";r.d(t,{Q:()=>i});var a=r(12115),s=r(96648),n=r(90260);function i(){let e=(0,a.useMemo)(()=>(0,s.createBrowserSupabase)(),[]),[t,r]=(0,a.useState)(!1),[i,l]=(0,a.useState)(null);return(0,a.useEffect)(()=>{if((0,n.Wj)()){l((0,n.Ld)()),r(!0);return}let t=()=>{};e.auth.getSession().then(e=>{let{data:t}=e;return l(t.session)});let{data:a}=e.auth.onAuthStateChange((e,t)=>l(t));return t=()=>{var e,t;return null==a||null==(t=a.subscription)||null==(e=t.unsubscribe)?void 0:e.call(t)},r(!0),()=>t()},[e]),{session:i,isAuthed:!!i,mounted:t}}},86487:(e,t,r)=>{"use strict";function a(e){if(null==e)return null;if("number"==typeof e)return Number.isFinite(e)?e:null;let t=String(e).trim().replace(",",".").match(/-?\d+(\.\d+)?/);if(!t)return null;let r=Number(t[0]);return Number.isFinite(r)?r:null}function s(e){if(!e)return null;let t=["avg_generation_time","avg_generation_time_seconds","average_generation_time_seconds","average_generation_time","avg_job_duration_seconds","job_history_avg_generation_time_seconds"],r=Object.keys(e).filter(e=>{let r=e.toLowerCase();return r.includes("avg")&&(r.includes("time")||r.includes("duration"))&&!t.includes(e)}),s=null;for(let n of[...t,...r]){if(!(n in e))continue;let t=a(e[n]);if(null!=t){if(t>.5)return t;(null==s||t>s)&&(s=t)}}return s}function n(e){let t=a(e);if(null==t)return"—";if(t<=0||t<.1)return"<0.1s";if(t<1)return"".concat(t.toFixed(2),"s");if(t<10)return"".concat(t.toFixed(1),"s");if(t<60)return"".concat(Math.round(t),"s");let r=Math.floor(t/60),s=Math.round(t%60);if(r>=60){let e=Math.floor(r/60),t=r%60;return 0===t?"".concat(e,"h"):"".concat(e,"h ").concat(t,"m")}return 0===s?"".concat(r,"m"):"".concat(r,"m ").concat(s,"s")}r.d(t,{EL:()=>s,Xo:()=>n})},87025:(e,t,r)=>{"use strict";r.d(t,{Vj:()=>c});var a=r(12115);function s(){if(window.Capacitor){let e=window.Capacitor.getPlatform();if("ios"===e)return"ios";if("android"===e)return"android"}if("undefined"!=typeof navigator){let e=navigator.userAgent||navigator.vendor||window.opera||"";if(/iPad|iPhone|iPod/.test(e)&&!window.MSStream)return"ios";if(/android/i.test(e))return"android"}return"web"}function n(){let e=s();return"ios"===e||"android"===e}function i(){return"web"===s()}function l(){let e=s();return"ios"===e?"apple":"android"===e?"google":"web"}function o(){return{platform:s(),store:l(),isNative:n(),isWeb:i(),displayName:function(){let e=s();return"ios"===e?"iOS":"android"===e?"Android":"Web"}(),storeName:function(){let e=l();return"apple"===e?"App Store":"google"===e?"Google Play":"Web"}(),shouldShowWebSubscriptions:i(),shouldShowMobileSubscriptions:n(),supportsPushNotifications:n(),subscriptionManagementUrl:function(){let e=s();return"ios"===e?"https://apps.apple.com/account/subscriptions":"android"===e?"https://play.google.com/store/account/subscriptions":null}()}}function c(){let[e,t]=(0,a.useState)(!1),[r,s]=(0,a.useState)(()=>o());return(0,a.useEffect)(()=>{s(o()),t(!0)},[]),{...r,isReady:e}}},90260:(e,t,r)=>{"use strict";r.d(t,{Ld:()=>n,Wj:()=>s});var a=r(95704);function s(){return"true"===a.env.NEXT_PUBLIC_TEST_MODE||"true"===a.env.NEXT_PUBLIC_BYPASS_AUTH||"true"===new URLSearchParams(window.location.search).get("test")}function n(){if(!s())return null;let e=s()?{id:"test-user-id-12345",email:"test@radly.test",created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z",aud:"authenticated",role:"authenticated",app_metadata:{},user_metadata:{full_name:"Test User"},identities:[],factors:[],is_anonymous:!1,phone:"",email_confirmed_at:"2024-01-01T00:00:00Z",phone_confirmed_at:void 0,confirmed_at:"2024-01-01T00:00:00Z",last_sign_in_at:"2024-01-01T00:00:00Z",is_sso_user:!1,provider:"email",providers:["email"]}:null;return e?{access_token:"test-access-token",refresh_token:"test-refresh-token",expires_in:3600,expires_at:Math.floor(Date.now()/1e3)+3600,token_type:"bearer",user:e}:null}}},e=>{e.O(0,[5707,2619,8727,4230,1733,6743,2149,2454,1691,9920,9433,4557,8441,1255,7358],()=>e(e.s=65994)),_N_E=e.O()}]);