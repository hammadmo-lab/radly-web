(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1618],{1877:(e,s,t)=>{Promise.resolve().then(t.bind(t,59952))},6132:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6191:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},10489:(e,s,t)=>{"use strict";t.d(s,{b:()=>n});var a=t(12115),l=t(97602),r=t(95155),i=a.forwardRef((e,s)=>(0,r.jsx)(l.sG.label,{...e,ref:s,onMouseDown:s=>{var t;s.target.closest("button, input, select, textarea")||(null==(t=e.onMouseDown)||t.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));i.displayName="Label";var n=i},20063:(e,s,t)=>{"use strict";var a=t(47260);t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},31120:(e,s,t)=>{"use strict";t.d(s,{T:()=>i});var a=t(95155),l=t(12115),r=t(64269);let i=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...l})});i.displayName="Textarea"},35299:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},59952:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>_,dynamic:()=>S});var a=t(95155),l=t(12115),r=t(20063),i=t(22454),n=t(6191),c=t(15870),o=t(86651);let d=(0,t(71847).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var m=t(24033),u=t(65229),x=t(3998),h=t(65142),p=t(86948),b=t(6259),g=t(25656);async function f(e){let s=await e("/v1/templates");return Array.isArray(s)?s.map(e=>(function(e){var s,t,a,l,r,i,n,c,o,d,m,u,x;let h=String(null!=(t=null!=(s=null==e?void 0:e.id)?s:null==e?void 0:e.template_id)?t:""),p=String(null!=(i=null!=(r=null!=(l=null!=(a=null==e?void 0:e.title)?a:null==e?void 0:e.name)?l:null==e?void 0:e.label)?r:null==e?void 0:e.display_name)?i:"").trim(),b=null!=(x=null!=(u=null!=(m=null!=(d=null!=(o=null!=(c=null!=(n=null==e?void 0:e.updatedAt)?n:null==e?void 0:e.updated_at)?c:null==e?void 0:e.modified_at)?o:null==e?void 0:e.modifiedAt)?d:null==e?void 0:e.version_updated)?m:null==e?void 0:e.created_at)?u:null==e?void 0:e.createdAt)?x:null,g=function(e){for(var s=arguments.length,t=Array(s>1?s-1:0),a=1;a<s;a++)t[a-1]=arguments[a];if(!e)return{};let l={};return t.forEach(s=>{l[s]=e[s]}),l}(e,"modality","anatomy","version","description");return{id:h,title:p||"(Untitled Template)",updatedAt:b&&"string"==typeof b?new Date(b).toISOString():null,...g}})(e)):[]}var y=t(20243);function j(){return(0,a.jsxs)(p.Zp,{className:"overflow-hidden border-2",children:[(0,a.jsxs)(p.aR,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"space-y-3 flex-1",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(y.E,{className:"h-5 w-16 rounded-full"}),(0,a.jsx)(y.E,{className:"h-5 w-20 rounded-full"})]}),(0,a.jsx)(y.E,{className:"h-6 w-3/4"})]}),(0,a.jsx)(y.E,{className:"w-12 h-12 rounded-full shrink-0"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y.E,{className:"h-4 w-full"}),(0,a.jsx)(y.E,{className:"h-4 w-2/3"})]})]}),(0,a.jsx)(p.Wu,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(y.E,{className:"h-4 w-32"}),(0,a.jsx)(y.E,{className:"h-9 w-28 rounded-lg"})]})})]})}var v=t(51834),w=t(31120),N=t(76444),F=t(18720),A=t(95740),C=t(35299),k=t(6132);function E(e){let{templateId:s,templateName:t,isOpen:r,onClose:i,onSaved:n}=e,[c,o]=(0,l.useState)(""),[d,m]=(0,l.useState)(!1),[u,h]=(0,l.useState)(!1),[p,b]=(0,l.useState)(!1),f=(0,l.useCallback)(async()=>{h(!0);try{let e=await (0,g.lx)("/v1/templates/".concat(s,"/custom-instructions"));o(e.instructions||""),b(!1)}catch(e){o(""),b(!1)}finally{h(!1)}},[s]);(0,l.useEffect)(()=>{r&&s&&f()},[r,s,f]);let y=async()=>{m(!0);try{await (0,g.zA)("/v1/templates/".concat(s,"/custom-instructions"),{instructions:c}),F.oR.success("Custom instructions saved successfully!"),b(!1),null==n||n(),i()}catch(e){F.oR.error("Failed to save custom instructions")}finally{m(!1)}},j=()=>{p?confirm("You have unsaved changes. Are you sure you want to close?")&&i():i()};return(0,a.jsx)(v.lG,{open:r,onOpenChange:j,children:(0,a.jsxs)(v.Cf,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(v.c7,{children:[(0,a.jsxs)(v.L3,{className:"flex items-center gap-2 text-xl",children:[(0,a.jsx)(A.A,{className:"w-5 h-5 text-purple-600"}),"Customize Template: ",t]}),(0,a.jsx)(v.rr,{children:"Add custom instructions that will automatically apply every time you use this template"})]}),u?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(C.A,{className:"w-8 h-8 text-purple-600 animate-spin"})}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(N.J,{htmlFor:"instructions",className:"text-base font-semibold",children:"Custom Instructions"}),(0,a.jsx)(w.T,{id:"instructions",value:c,onChange:e=>{o(e.target.value),b(!0)},placeholder:"Add custom instructions that will be applied every time you use this template. Example: 'Always include comparison with prior studies' or 'Use metric measurements only'",rows:10,className:"mt-2 font-mono text-sm"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"These instructions will be automatically included in the AI prompt when generating reports with this template"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-2 mb-3",children:[(0,a.jsx)(k.A,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"text-sm font-semibold text-blue-900",children:"Example Instructions:"})})]}),(0,a.jsxs)("ul",{className:"text-sm text-gray-700 space-y-2 ml-7",children:[(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-blue-600 mt-1",children:"•"}),(0,a.jsx)("span",{children:'"Always mention the presence or absence of lymphadenopathy in all scans"'})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-blue-600 mt-1",children:"•"}),(0,a.jsx)("span",{children:'"Include Fleischner Society recommendations for pulmonary nodules"'})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-blue-600 mt-1",children:"•"}),(0,a.jsx)("span",{children:'"Use concise language and bullet points for findings section"'})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-blue-600 mt-1",children:"•"}),(0,a.jsx)("span",{children:'"Compare all measurements with prior studies when relevant"'})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-blue-600 mt-1",children:"•"}),(0,a.jsx)("span",{children:'"Always include ACR appropriateness criteria references"'})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-blue-600 mt-1",children:"•"}),(0,a.jsx)("span",{children:'"Use teaching file format with detailed anatomical descriptions"'})]})]})]}),(0,a.jsx)("div",{className:"bg-green-50 border-l-4 border-green-500 p-3 rounded",children:(0,a.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,a.jsx)("span",{className:"font-semibold text-green-700",children:"Tip:"})," Keep instructions specific and actionable. The AI will follow these preferences for every report generated with this template."]})})]}),(0,a.jsxs)(v.Es,{className:"flex gap-2",children:[(0,a.jsx)(x.$,{variant:"outline",onClick:j,disabled:d,children:"Cancel"}),(0,a.jsx)(x.$,{onClick:y,disabled:d||!p||u,className:"bg-purple-600 hover:bg-purple-700",children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):(0,a.jsx)(a.Fragment,{children:"Save Instructions"})})]})]})})}let S="force-dynamic";function _(){let e=(0,r.useRouter)(),[s,t]=(0,l.useState)(""),[y,v]=(0,l.useState)(null),[w,N]=(0,l.useState)(null),[F,A]=(0,l.useState)(!1),[C,k]=(0,l.useState)(null),S=e=>{v(e),e&&w&&(((null==_?void 0:_.filter(s=>s.modality===e).map(e=>e.anatomy))||[]).includes(w)||N(null))},{data:_,isLoading:T}=(0,i.I)({queryKey:["templates"],queryFn:async()=>await f(g.lx)}),{modalities:I,anatomies:R}=(0,l.useMemo)(()=>{if(!_)return{modalities:[],anatomies:[]};let e=new Set,s=new Set;return _.forEach(t=>{t.modality&&e.add(t.modality),t.anatomy&&(!y||t.modality===y)&&s.add(t.anatomy)}),{modalities:Array.from(e).sort(),anatomies:Array.from(s).sort()}},[_,y]),D=(0,l.useMemo)(()=>_?_.filter(e=>{let t=!s||e.title.toLowerCase().includes(s.toLowerCase())||e.modality&&e.modality.toLowerCase().includes(s.toLowerCase())||e.anatomy&&e.anatomy.toLowerCase().includes(s.toLowerCase()),a=!y||e.modality===y,l=!w||e.anatomy===w;return t&&a&&l}):[],[_,s,y,w]);return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl sm:text-4xl font-semibold text-white",children:"Templates"}),(0,a.jsx)("p",{className:"text-sm sm:text-base text-[rgba(207,207,207,0.65)]",children:"Select a template to generate your medical report."})]}),(0,a.jsxs)(x.$,{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"h-12 px-6 bg-[linear-gradient(90deg,#2653FF_0%,#4B8EFF_100%)] text-white shadow-[0_10px_24px_rgba(75,142,255,0.35)] hover:shadow-[0_16px_28px_rgba(75,142,255,0.45)]",children:[(0,a.jsx)(n.A,{className:"w-5 h-5 mr-2"}),"New Report"]})]}),(0,a.jsx)("div",{className:"aurora-card border border-[rgba(255,255,255,0.08)] p-4 sm:p-6",children:(0,a.jsxs)("div",{className:"flex items-start gap-3 sm:gap-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-[linear-gradient(135deg,#F8B74D,#FF6B6B)] shadow-lg flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(c.A,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),(0,a.jsxs)("div",{className:"space-y-2 min-w-0 flex-1",children:[(0,a.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-white",children:"Save time with custom instructions"}),(0,a.jsxs)("p",{className:"text-xs sm:text-sm text-[rgba(207,207,207,0.75)] leading-relaxed",children:["Tap the"," ",(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-md border border-[rgba(255,255,255,0.14)] bg-[rgba(255,255,255,0.08)] gap-1.5 align-middle",children:[(0,a.jsx)(c.A,{className:"w-3 h-3 text-[#8F82FF]"}),(0,a.jsx)("span",{className:"text-xs font-medium uppercase tracking-wider text-[rgba(207,207,207,0.85)]",children:"Settings"})]})," ",'icon on any template to add preferences (e.g. "always mention lymphadenopathy"). The AI remembers them for every future report.']})]})]})}),(0,a.jsxs)("div",{className:"aurora-card border border-[rgba(255,255,255,0.08)] p-5 sm:p-6 md:p-7 space-y-5",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[rgba(207,207,207,0.45)]"}),(0,a.jsx)(h.p,{type:"search",placeholder:"Search templates by name, modality, or body system...",value:s,onChange:e=>t(e.target.value),className:"pl-12 h-12 sm:h-13 bg-[rgba(18,22,36,0.85)] border border-[rgba(255,255,255,0.08)] text-white placeholder:text-[rgba(207,207,207,0.45)] focus-visible:ring-[#4B8EFF]"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsxs)(b.rI,{children:[(0,a.jsx)(b.ty,{asChild:!0,children:(0,a.jsxs)(x.$,{variant:"outline",className:"h-11 rounded-lg border-[rgba(255,255,255,0.12)] bg-[rgba(18,22,36,0.85)] text-white hover:border-[#4B8EFF]/40 hover:text-white ".concat(y?"border-[#4B8EFF]/40 bg-[rgba(75,142,255,0.12)]":""),children:[(0,a.jsx)(d,{className:"w-4 h-4 mr-2"}),"Modality",y&&(0,a.jsx)("span",{className:"ml-2 px-2 py-0.5 text-xs rounded-full bg-[rgba(75,142,255,0.2)] text-[#D7E3FF]",children:y}),(0,a.jsx)(m.A,{className:"w-4 h-4 ml-2"})]})}),(0,a.jsxs)(b.SQ,{align:"start",className:"w-56 bg-[rgba(12,14,24,0.95)] border border-[rgba(255,255,255,0.12)] text-white",children:[(0,a.jsxs)(b._2,{onClick:()=>S(null),children:[(0,a.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Clear Filter"]}),I.map(e=>(0,a.jsx)(b._2,{onClick:()=>S(e),className:y===e?"bg-[rgba(75,142,255,0.18)] text-[#D7E3FF]":"",children:e},e))]})]}),(0,a.jsxs)(b.rI,{children:[(0,a.jsx)(b.ty,{asChild:!0,children:(0,a.jsxs)(x.$,{variant:"outline",className:"h-11 rounded-lg border-[rgba(255,255,255,0.12)] bg-[rgba(18,22,36,0.85)] text-white hover:border-[#4B8EFF]/40 hover:text-white ".concat(w?"border-[#4B8EFF]/40 bg-[rgba(75,142,255,0.12)]":""," ").concat(y?"":"opacity-60 cursor-not-allowed"),disabled:!y,children:[(0,a.jsx)(d,{className:"w-4 h-4 mr-2"}),"Body System",w&&(0,a.jsx)("span",{className:"ml-2 px-2 py-0.5 text-xs rounded-full bg-[rgba(143,130,255,0.2)] text-[#E0D9FF]",children:w}),(0,a.jsx)(m.A,{className:"w-4 h-4 ml-2"})]})}),(0,a.jsxs)(b.SQ,{align:"start",className:"w-56 bg-[rgba(12,14,24,0.95)] border border-[rgba(255,255,255,0.12)] text-white",children:[(0,a.jsxs)(b._2,{onClick:()=>N(null),children:[(0,a.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Clear Filter"]}),R.map(e=>(0,a.jsx)(b._2,{onClick:()=>N(e),className:w===e?"bg-[rgba(143,130,255,0.18)] text-[#E0D9FF]":"",children:e},e))]})]})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:T?Array.from({length:6}).map((e,s)=>(0,a.jsx)(j,{},s)):0===D.length?(0,a.jsxs)("div",{className:"col-span-full aurora-card border border-[rgba(255,255,255,0.08)] py-12 text-center space-y-4",children:[(0,a.jsx)("div",{className:"text-[rgba(207,207,207,0.45)]",children:(0,a.jsx)(o.A,{className:"w-12 h-12 mx-auto"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"No templates found"}),(0,a.jsx)("p",{className:"text-sm text-[rgba(207,207,207,0.65)] max-w-md mx-auto",children:s||y||w?"Try adjusting your search or filters.":"Templates will appear here as soon as they are available."}),(s||y||w)&&(0,a.jsx)(x.$,{variant:"outline",onClick:()=>{t(""),S(null),N(null)},className:"mt-4 h-10 px-5 text-[rgba(207,207,207,0.85)] border-[rgba(255,255,255,0.12)] hover:text-white",children:"Clear all filters"})]}):D.map(s=>(0,a.jsxs)(p.Zp,{className:"aurora-card group relative border border-[rgba(255,255,255,0.08)] p-5 sm:p-6 cursor-pointer active:scale-[0.98] transition-transform duration-150",onClick:()=>e.push("/app/generate?templateId=".concat(s.id)),children:[(0,a.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),k({id:s.id,name:s.title||"Untitled Template"}),A(!0)},className:"absolute top-3 right-3 z-10 min-w-[44px] min-h-[44px] w-10 h-10 flex items-center justify-center rounded-lg bg-[rgba(18,22,36,0.95)] border border-[rgba(255,255,255,0.15)] text-[rgba(207,207,207,0.75)] hover:text-white hover:border-[rgba(143,130,255,0.45)] active:scale-95 transition-colors touch-manipulation","aria-label":"Customize template settings",children:(0,a.jsx)(c.A,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[s.modality&&(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-[rgba(75,142,255,0.18)] text-[#D7E3FF]",children:s.modality}),s.anatomy&&(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-[rgba(143,130,255,0.18)] text-[#E0D9FF]",children:s.anatomy})]}),(0,a.jsx)("h3",{className:"text-lg sm:text-xl font-semibold text-white",children:s.title||"Untitled Template"}),s.description&&(0,a.jsx)("p",{className:"text-sm text-[rgba(207,207,207,0.65)] line-clamp-2",children:s.description}),(0,a.jsx)(x.$,{className:"w-full h-10 sm:h-11 bg-[#2653FF] text-white hover:bg-[#4B8EFF]",onClick:t=>{t.stopPropagation(),e.push("/app/generate?templateId=".concat(s.id))},children:"Use Template"})]})]},s.id))}),C&&(0,a.jsx)(E,{templateId:C.id,templateName:C.name,isOpen:F,onClose:()=>{A(!1),k(null)},onSaved:()=>{}})]})}},65142:(e,s,t)=>{"use strict";t.d(s,{p:()=>c});var a=t(95155),l=t(12115),r=t(83101),i=t(64269);let n=(0,r.F)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"),c=l.forwardRef((e,s)=>{let{className:t,type:l,...r}=e;return(0,a.jsx)("input",{type:l,className:(0,i.cn)(n(),t),ref:s,...r})});c.displayName="Input"},76444:(e,s,t)=>{"use strict";t.d(s,{J:()=>o});var a=t(95155),l=t(12115),r=t(10489),i=t(83101),n=t(64269);let c=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.b,{ref:s,className:(0,n.cn)(c(),t),...l})});o.displayName=r.b.displayName},86651:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])}},e=>{e.O(0,[5707,8727,4230,6743,2149,2454,1691,9920,4557,8441,1255,7358],()=>e(e.s=1877)),_N_E=e.O()}]);