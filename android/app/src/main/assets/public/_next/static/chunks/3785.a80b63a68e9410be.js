"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3785],{3785:(e,r,t)=>{t.r(r),t.d(r,{AudioStreamerWeb:()=>a});var s=t(32587);class a extends s.WebPlugin{async startRecording(){try{return this.stream=await navigator.mediaDevices.getUserMedia({audio:!0}),this.mediaRecorder=new MediaRecorder(this.stream,{mimeType:"audio/webm;codecs=opus"}),this.mediaRecorder.ondataavailable=e=>{if(e.data.size>0){let r=new FileReader;r.onload=()=>{let e=r.result.split(",")[1];this.notifyListeners("audioChunk",{chunk:e,timestamp:Date.now()})},r.readAsDataURL(e.data)}},this.mediaRecorder.onerror=e=>{var r;this.notifyListeners("audioError",{error:"MediaRecorder error: "+((null==(r=e.error)?void 0:r.message)||"Unknown error"),timestamp:Date.now()})},this.mediaRecorder.start(100),{status:"recording_started"}}catch(e){throw Error("Failed to start recording: ".concat(e))}}async stopRecording(){return this.mediaRecorder&&"inactive"!==this.mediaRecorder.state&&this.mediaRecorder.stop(),this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null),this.mediaRecorder=null,{status:"recording_stopped"}}async removeAllListeners(){await super.removeAllListeners()}constructor(...e){super(...e),this.mediaRecorder=null,this.stream=null}}}}]);