"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2063,5656,8063,8927],{11811:(e,t,a)=>{a.d(t,{QK:()=>i}),a(25656);async function i(e){let t=await e("/v1/templates");return Array.isArray(t)?t.map(e=>(function(e){var t,a,i,s,r,n,l,c,o,d,u,h,m;let x=String(null!=(a=null!=(t=null==e?void 0:e.id)?t:null==e?void 0:e.template_id)?a:""),p=String(null!=(n=null!=(r=null!=(s=null!=(i=null==e?void 0:e.title)?i:null==e?void 0:e.name)?s:null==e?void 0:e.label)?r:null==e?void 0:e.display_name)?n:"").trim(),f=null!=(m=null!=(h=null!=(u=null!=(d=null!=(o=null!=(c=null!=(l=null==e?void 0:e.updatedAt)?l:null==e?void 0:e.updated_at)?c:null==e?void 0:e.modified_at)?o:null==e?void 0:e.modifiedAt)?d:null==e?void 0:e.version_updated)?u:null==e?void 0:e.created_at)?h:null==e?void 0:e.createdAt)?m:null,b=function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];if(!e)return{};let s={};return a.forEach(t=>{s[t]=e[t]}),s}(e,"modality","anatomy","version","description");return{id:x,title:p||"(Untitled Template)",updatedAt:f&&"string"==typeof f?new Date(f).toISOString():null,...b}})(e)):[]}},13077:(e,t,a)=>{a.d(t,{getSupabaseClient:()=>c});var i=a(11993),s=a(16010),r=a(32587),n=a(4077);class l{static getInstance(){return l.instance||(l.instance=new l),l.instance}async initialize(){if(!this.initialized)return this.initializationPromise||(this.initializationPromise=this._doInitialize()),this.initializationPromise}async _doInitialize(){try{if(!r.Capacitor.isNativePlatform()){this.initialized=!0;return}let{keys:e}=await n.Preferences.keys();for(let t of e.filter(e=>e.startsWith(this.STORAGE_PREFIX)))try{let{value:e}=await n.Preferences.get({key:t});if(e){let a=t.substring(this.STORAGE_PREFIX.length);this.cache.set(a,e)}}catch(e){}this.initialized=!0}catch(e){this.initialized=!0}}getItem(e){return this.initialized&&this.cache.get(e)||null}setItem(e,t){this.initialized&&(this.cache.set(e,t),this._persistToStorage(e,t).catch(e=>{}))}removeItem(e){this.initialized&&(this.cache.delete(e),this._removeFromStorage(e).catch(e=>{}))}async _persistToStorage(e,t){if(!r.Capacitor.isNativePlatform())return;let a=this.STORAGE_PREFIX+e;try{await n.Preferences.set({key:a,value:t})}catch(e){throw e}}async _removeFromStorage(e){if(!r.Capacitor.isNativePlatform())return;let t=this.STORAGE_PREFIX+e;try{await n.Preferences.remove({key:t})}catch(e){throw e}}async clear(){if(this.cache.clear(),r.Capacitor.isNativePlatform())try{let{keys:e}=await n.Preferences.keys();for(let t of e.filter(e=>e.startsWith(this.STORAGE_PREFIX)))await n.Preferences.remove({key:t})}catch(e){}}getDebugInfo(){return{initialized:this.initialized,cacheSize:this.cache.size,cachedKeys:Array.from(this.cache.keys()),platform:r.Capacitor.isNativePlatform()?"capacitor":"web",prefix:this.STORAGE_PREFIX}}constructor(){this.cache=new Map,this.initialized=!1,this.initializationPromise=null,this.STORAGE_PREFIX="sb-"}}async function c(){if(a.g.__supabase_client&&a.g.__supabase_client_initialized)return a.g.__supabase_client;if(a.g.__supabase_client_initialized){let e=0;for(;!a.g.__supabase_client&&e<50;)await new Promise(e=>setTimeout(e,100)),e++;if(a.g.__supabase_client)return a.g.__supabase_client;throw Error("Supabase client initialization timeout")}a.g.__supabase_client_initialized=!0;try{let e,t,r=(()=>{var e;let t=window.Capacitor;return!!(null==t||null==(e=t.isNativePlatform)?void 0:e.call(t))})();if(r){let e=l.getInstance();await e.initialize(),t=function(){let e=l.getInstance();return e.initialize().catch(e=>{}),{getItem:t=>e.getItem(t),setItem:(t,a)=>e.setItem(t,a),removeItem:t=>e.removeItem(t)}}()}return e=r?(0,i.UU)("https://bsldtgivgtyzacwyvcfh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJzbGR0Z2l2Z3R5emFjd3l2Y2ZoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5MzQ1NzMsImV4cCI6MjA3NTUxMDU3M30.vjHPo6WEASxYBOAGYmZ93o5n9RhZvANSlLhaT-wagTs",{auth:{storage:t,persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!1,debug:!0}}):(0,s.createBrowserClient)("https://bsldtgivgtyzacwyvcfh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJzbGR0Z2l2Z3R5emFjd3l2Y2ZoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5MzQ1NzMsImV4cCI6MjA3NTUxMDU3M30.vjHPo6WEASxYBOAGYmZ93o5n9RhZvANSlLhaT-wagTs",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!1,flowType:"pkce",debug:!1}}),a.g.__supabase_client=e,e.__isSingleton=!0,e.__createdAt=new Date().toISOString(),e.__platform=r?"capacitor":"web",e}catch(e){throw a.g.__supabase_client_initialized=!1,e}}void 0===a.g&&(globalThis.global=globalThis)},18927:(e,t,a)=>{a.d(t,{O:()=>u,A:()=>h});var i=a(95155),s=a(12115),r=a(32587),n=a(16010),l=a(90260);function c(){try{let e=(0,n.createBrowserClient)("https://bsldtgivgtyzacwyvcfh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJzbGR0Z2l2Z3R5emFjd3l2Y2ZoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5MzQ1NzMsImV4cCI6MjA3NTUxMDU3M30.vjHPo6WEASxYBOAGYmZ93o5n9RhZvANSlLhaT-wagTs",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!1,flowType:"pkce",debug:!1}});if((0,l.Wj)()){let t=(0,l.Ld)();return{...e,auth:{...e.auth,getSession:async()=>({data:{session:t},error:null}),getUser:async()=>({data:{user:(null==t?void 0:t.user)||null},error:null}),signOut:async()=>({error:null}),signInWithOAuth:async()=>({error:Error("Test mode: OAuth not available")}),exchangeCodeForSession:async()=>({error:Error("Test mode: Code exchange not available")}),onAuthStateChange:e=>(e("SIGNED_IN",t),{data:{subscription:{unsubscribe:()=>{}}}})}}}return e}catch(e){return{auth:{getSession:async()=>({data:{session:null},error:null}),getUser:async()=>({data:{user:null},error:null}),signOut:async()=>({error:null}),onAuthStateChange:()=>({data:{subscription:{unsubscribe:()=>{}}}}),signInWithOAuth:async()=>({error:Error("Mock client: OAuth not available")}),exchangeCodeForSession:async()=>({error:Error("Mock client: Code exchange not available")})}}}}var o=a(13077);let d=(0,s.createContext)(void 0);function u(e){let{children:t}=e,[n,l]=(0,s.useState)(null),[u,h]=(0,s.useState)(null),[m,x]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e;return(async()=>{try{var t;let a=r.Capacitor.isNativePlatform()?await (0,o.getSupabaseClient)():c(),{data:{session:i}}=await a.auth.getSession();h(i),l(null!=(t=null==i?void 0:i.user)?t:null),x(!1);let{data:{subscription:s}}=a.auth.onAuthStateChange((e,t)=>{var a;h(t),l(null!=(a=null==t?void 0:t.user)?a:null),x(!1)});e=()=>s.unsubscribe()}catch(e){h(null),l(null),x(!1)}})(),()=>{try{null==e||e()}catch(e){}}},[]);let p=async()=>{try{let e=r.Capacitor.isNativePlatform()?await (0,o.getSupabaseClient)():c();await e.auth.signOut();let{clearTokenCache:t}=await a.e(5656).then(a.bind(a,25656));t()}catch(e){}};return(0,i.jsx)(d.Provider,{value:{user:n,session:u,loading:m,signOut:p},children:t})}function h(){let e=(0,s.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},22063:(e,t,a)=>{a.r(t),a.d(t,{default:()=>I});var i=a(95155),s=a(12115),r=a(20063),n=a(22454),l=a(1733),c=a(26497),o=a(9540),d=a(15870),u=a(86651),h=a(65229),m=a(24033),x=a(89715),p=a(27937),f=a(20508),b=a(50906),y=a(65644),w=a(84926),v=a(25656),g=a(11811),j=a(18927),N=a(31969);function I(){let e=(0,r.useRouter)(),{user:t,signOut:a}=(0,j.A)(),{data:I}=(0,N.Rs)(),[_,S]=(0,s.useState)(!1),[C,A]=(0,s.useState)(""),[k,z]=(0,s.useState)(""),[T,P]=(0,s.useState)(""),[E,R]=(0,s.useState)(!1),[F,O]=(0,s.useState)(!1),Z=async()=>{await a(),S(!1)},{data:J,isLoading:U}=(0,n.I)({queryKey:["templates"],queryFn:async()=>await (0,g.QK)(v.lx)}),M=(0,s.useMemo)(()=>{if(!J)return[];let e=new Set;return J.forEach(t=>{t.modality&&e.add(t.modality)}),Array.from(e).sort()},[J]),B=(0,s.useMemo)(()=>{if(!J||!k)return[];let e=new Set;return J.forEach(t=>{t.modality===k&&t.anatomy&&e.add(t.anatomy)}),Array.from(e).sort()},[J,k]),X=(0,s.useMemo)(()=>J&&(C.trim()||k||T)?J.filter(e=>{let t=!C.trim()||e.title.toLowerCase().includes(C.toLowerCase())||e.modality&&e.modality.toLowerCase().includes(C.toLowerCase())||e.anatomy&&e.anatomy.toLowerCase().includes(C.toLowerCase()),a=!k||e.modality===k,i=!T||e.anatomy===T;return t&&a&&i}):[],[J,C,k,T]);return U?(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-[#0a0e1a] via-[#0c1018] to-[#0a0e1a] text-white",children:[(0,i.jsx)("div",{className:"h-16 bg-[#0a0e1a]"}),(0,i.jsxs)(l.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"sticky top-16 z-50 bg-gradient-to-b from-[#0a0e1a] to-transparent px-4 pb-4 pt-4 flex items-center justify-between border-b border-white/10",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("button",{onClick:()=>S(!0),className:"w-12 h-12 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center active:scale-95 transition-transform touch-manipulation",children:(0,i.jsx)(o.A,{className:"w-6 h-6 text-white/80"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-xl font-bold text-white",children:"Templates"}),(0,i.jsx)("p",{className:"text-sm text-white/60",children:"Loading templates..."})]})]}),(0,i.jsx)("button",{onClick:()=>e.push("/app/settings"),className:"w-12 h-12 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center active:scale-95 transition-transform touch-manipulation",children:(0,i.jsx)(d.A,{className:"w-6 h-6 text-white/80"})})]}),(0,i.jsx)("div",{className:"px-4 py-6 space-y-3",children:[1,2,3,4,5,6].map(e=>(0,i.jsx)("div",{className:"h-24 bg-[rgba(255,255,255,0.05)] rounded-2xl animate-pulse"},e))})]}):(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-[#0a0e1a] via-[#0c1018] to-[#0a0e1a] text-white",children:[(0,i.jsx)("div",{className:"h-16 bg-[#0a0e1a]"}),(0,i.jsxs)(l.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"sticky top-16 z-50 bg-gradient-to-b from-[#0a0e1a] to-transparent px-4 pb-4 pt-4 flex items-center justify-between border-b border-white/10",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("button",{onClick:()=>S(!0),className:"w-12 h-12 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center active:scale-95 transition-transform touch-manipulation",children:(0,i.jsx)(o.A,{className:"w-6 h-6 text-white/80"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-xl font-bold text-white",children:"Templates"}),(0,i.jsx)("p",{className:"text-sm text-white/60",children:X.length>0?"".concat(X.length," template").concat(1!==X.length?"s":""," found"):"Search or select filters to find templates"})]})]}),(0,i.jsx)("button",{onClick:()=>e.push("/app/settings"),className:"w-12 h-12 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center active:scale-95 transition-transform touch-manipulation",children:(0,i.jsx)(d.A,{className:"w-6 h-6 text-white/80"})})]}),(0,i.jsxs)("div",{className:"container px-4 py-6 space-y-4",children:[(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(u.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[var(--ds-text-muted)]"}),(0,i.jsx)("input",{type:"text",placeholder:"Search templates...",value:C,onChange:e=>A(e.target.value),className:"w-full h-12 pl-12 pr-4 bg-[rgba(18,22,36,0.85)] border border-[rgba(255,255,255,0.08)] rounded-xl text-white placeholder:text-[var(--ds-text-muted)] focus:outline-none focus:border-[var(--ds-primary)]/50 touch-manipulation"}),C&&(0,i.jsx)("button",{onClick:()=>A(""),className:"absolute right-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-full bg-[rgba(255,255,255,0.1)] flex items-center justify-center active:scale-90 transition-transform",children:(0,i.jsx)(h.A,{className:"w-4 h-4 text-[var(--ds-text-secondary)]"})})]}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsxs)("button",{onClick:()=>{R(!E),O(!1)},className:"w-full h-12 px-4 bg-[rgba(18,22,36,0.85)] border border-[rgba(255,255,255,0.08)] rounded-xl text-white flex items-center justify-between touch-manipulation active:scale-[0.98] transition-transform",children:[(0,i.jsx)("span",{className:k?"text-white":"text-[var(--ds-text-muted)]",children:k||"Select Modality"}),(0,i.jsx)(m.A,{className:"w-5 h-5 transition-transform ".concat(E?"rotate-180":""," text-[var(--ds-text-secondary)]")})]}),(0,i.jsx)(c.N,{children:E&&(0,i.jsx)(l.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 right-0 mt-2 bg-[rgba(12,12,14,0.98)] backdrop-blur-xl border border-[rgba(255,255,255,0.15)] rounded-xl shadow-lg z-20 max-h-48 overflow-y-auto",children:M.map(e=>(0,i.jsx)("button",{onClick:()=>{z(e),P(""),R(!1),O(!1)},className:"w-full px-4 py-3 text-left text-white hover:bg-[rgba(255,255,255,0.08)] active:scale-[0.98] transition-all touch-manipulation",children:e},e))})})]}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsxs)("button",{onClick:()=>{k&&(O(!F),R(!1))},disabled:!k,className:"w-full h-12 px-4 rounded-xl flex items-center justify-between touch-manipulation active:scale-[0.98] transition-all ".concat(k?"bg-[rgba(18,22,36,0.85)] border border-[rgba(255,255,255,0.08)] text-white":"bg-[rgba(255,255,255,0.03)] border border-[rgba(255,255,255,0.03)] text-[var(--ds-text-muted)] opacity-50"),children:[(0,i.jsx)("span",{className:T?"text-white":"text-[var(--ds-text-muted)]",children:T||(k?"Select Anatomy/System":"Select modality first")}),(0,i.jsx)(m.A,{className:"w-5 h-5 transition-transform ".concat(F?"rotate-180":""," text-[var(--ds-text-secondary)]")})]}),(0,i.jsx)(c.N,{children:F&&k&&(0,i.jsx)(l.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 right-0 mt-2 bg-[rgba(12,12,14,0.98)] backdrop-blur-xl border border-[rgba(255,255,255,0.15)] rounded-xl shadow-lg z-20 max-h-48 overflow-y-auto",children:B.map(e=>(0,i.jsx)("button",{onClick:()=>{P(e),O(!1)},className:"w-full px-4 py-3 text-left text-white hover:bg-[rgba(255,255,255,0.08)] active:scale-[0.98] transition-all touch-manipulation",children:e},e))})})]}),(C||k||T)&&(0,i.jsx)("button",{onClick:()=>{A(""),z(""),P("")},className:"w-full h-10 px-4 bg-[rgba(255,255,255,0.08)] border border-[rgba(255,255,255,0.12)] rounded-xl text-[var(--ds-text-secondary)] active:scale-[0.98] transition-transform touch-manipulation",children:"Clear all"}),!C&&!k&&!T&&(0,i.jsxs)("div",{className:"text-center py-12",children:[(0,i.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-[rgba(255,255,255,0.05)] flex items-center justify-center",children:(0,i.jsx)(u.A,{className:"w-8 h-8 text-[var(--ds-text-muted)]"})}),(0,i.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"Find your template"}),(0,i.jsx)("p",{className:"text-sm text-[var(--ds-text-secondary)] mb-4",children:"Search by name or select modality and anatomy to filter templates"})]})]}),(C||k||T)&&(0,i.jsx)("div",{className:"container px-4 pb-32",children:0===X.length?(0,i.jsxs)("div",{className:"text-center py-16",children:[(0,i.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-[rgba(255,255,255,0.05)] flex items-center justify-center",children:(0,i.jsx)(x.A,{className:"w-8 h-8 text-[var(--ds-text-muted)]"})}),(0,i.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"No templates found"}),(0,i.jsx)("p",{className:"text-sm text-[var(--ds-text-secondary)]",children:"Try adjusting your search or filter selections"})]}):(0,i.jsx)("div",{className:"space-y-3",children:X.map((t,a)=>(0,i.jsx)(l.P.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*a},onClick:()=>{var a,i;return a=t.id,i=t.title,void(localStorage.setItem("recent-template-id",a),localStorage.setItem("recent-template-name",i),e.push("/app/generate?templateId=".concat(encodeURIComponent(a))))},className:"w-full bg-[rgba(255,255,255,0.05)] backdrop-blur-xl border border-[rgba(255,255,255,0.08)] rounded-2xl p-4 active:scale-[0.98] transition-all touch-manipulation text-left",children:(0,i.jsxs)("div",{className:"flex items-start gap-4",children:[(0,i.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-[var(--ds-primary)] to-[var(--ds-accent-purple)] flex items-center justify-center shrink-0",children:(0,i.jsx)(x.A,{className:"w-6 h-6 text-white"})}),(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsx)("h3",{className:"text-base font-semibold text-white mb-1",children:t.title}),(0,i.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[t.modality&&(0,i.jsx)("span",{className:"px-2 py-0.5 bg-[var(--ds-primary)]/20 border border-[var(--ds-primary)]/30 rounded-full text-[10px] font-medium text-[var(--ds-primary-alt)]",children:t.modality}),t.anatomy&&(0,i.jsx)("span",{className:"px-2 py-0.5 bg-[var(--ds-accent-purple)]/20 border border-[var(--ds-accent-purple)]/30 rounded-full text-[10px] font-medium text-[var(--ds-accent-purple)]",children:t.anatomy})]})]}),(0,i.jsx)(p.A,{className:"w-5 h-5 text-[var(--ds-text-muted)] shrink-0"})]})},t.id))})}),(E||F)&&(0,i.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>{R(!1),O(!1)}}),(0,i.jsx)(c.N,{children:_&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>S(!1),className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm"}),(0,i.jsxs)(l.P.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",damping:30,stiffness:300},className:"fixed inset-y-0 left-0 z-50 w-[85vw] max-w-sm bg-[rgba(10,14,26,0.98)] backdrop-blur-xl border-r border-white/10 shadow-2xl flex flex-col",style:{paddingTop:"max(env(safe-area-inset-top), 1.5rem)"},children:[(0,i.jsxs)("div",{className:"p-6 border-b border-white/10",style:{paddingTop:"max(env(safe-area-inset-top), 1.5rem)"},children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#4B8EFF] to-[#2653FF] flex items-center justify-center",children:(0,i.jsx)(x.A,{className:"w-5 h-5 text-white"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-xs text-white/50 uppercase tracking-wider",children:"Radly"}),(0,i.jsx)("p",{className:"text-base font-bold text-white",children:"Templates"})]})]}),(0,i.jsx)("button",{onClick:()=>S(!1),className:"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center active:scale-95 transition-transform",children:(0,i.jsx)(h.A,{className:"w-5 h-5 text-white/70"})})]}),(0,i.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl border border-white/10",children:[(0,i.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-[#4B8EFF] to-[#8F82FF] flex items-center justify-center",children:(0,i.jsx)(f.A,{className:"w-5 h-5 text-white"})}),(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-white truncate",children:(null==t?void 0:t.email)||"User"}),(0,i.jsx)("p",{className:"text-xs text-white/50",children:null==I?void 0:I.subscription.tier_display_name})]})]})]}),(0,i.jsxs)("div",{className:"p-4 space-y-2 flex-1 overflow-y-auto",children:[(0,i.jsx)("a",{href:"/app/dashboard",onClick:()=>S(!1),children:(0,i.jsxs)("div",{className:"flex items-center gap-3 p-4 rounded-xl hover:bg-white/5 active:scale-95 transition-transform min-h-[56px] touch-manipulation",children:[(0,i.jsx)(b.A,{className:"w-5 h-5 text-white/60"}),(0,i.jsx)("span",{className:"text-base font-medium text-white/80",children:"Dashboard"})]})}),(0,i.jsx)("a",{href:"/app/templates",onClick:()=>S(!1),children:(0,i.jsxs)("div",{className:"flex items-center gap-3 p-4 rounded-xl bg-white/5 border border-white/10 active:scale-95 transition-transform min-h-[56px] touch-manipulation",children:[(0,i.jsx)(y.A,{className:"w-5 h-5 text-[#4B8EFF]"}),(0,i.jsx)("span",{className:"text-base font-medium text-white",children:"Templates"})]})}),(0,i.jsx)("a",{href:"/app/reports",onClick:()=>S(!1),children:(0,i.jsxs)("div",{className:"flex items-center gap-3 p-4 rounded-xl hover:bg-white/5 active:scale-95 transition-transform min-h-[56px] touch-manipulation",children:[(0,i.jsx)(x.A,{className:"w-5 h-5 text-white/60"}),(0,i.jsx)("span",{className:"text-base font-medium text-white/80",children:"Reports"})]})}),(0,i.jsx)("a",{href:"/app/settings",onClick:()=>S(!1),children:(0,i.jsxs)("div",{className:"flex items-center gap-3 p-4 rounded-xl hover:bg-white/5 active:scale-95 transition-transform min-h-[56px] touch-manipulation",children:[(0,i.jsx)(d.A,{className:"w-5 h-5 text-white/60"}),(0,i.jsx)("span",{className:"text-base font-medium text-white/80",children:"Settings"})]})})]}),(0,i.jsx)("div",{className:"p-4 border-t border-white/10",style:{paddingBottom:"max(env(safe-area-inset-bottom), 1rem)"},children:(0,i.jsxs)("button",{onClick:Z,className:"w-full flex items-center justify-center gap-2 p-4 bg-white/5 border border-white/10 rounded-xl text-white/80 hover:bg-white/10 active:scale-95 transition-all min-h-[56px] touch-manipulation",children:[(0,i.jsx)(w.A,{className:"w-5 h-5"}),(0,i.jsx)("span",{className:"text-base font-medium",children:"Sign Out"})]})})]})]})}),(0,i.jsx)("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-[rgba(10,14,26,0.95)] backdrop-blur-xl border-t border-white/10",style:{paddingBottom:"max(env(safe-area-inset-bottom), 0.5rem)"},children:(0,i.jsxs)("div",{className:"flex items-center justify-around px-2 pt-3 pb-2",children:[(0,i.jsxs)("a",{href:"/app/dashboard",className:"flex flex-col items-center justify-center flex-1 gap-1 py-2 min-h-[44px] touch-manipulation",children:[(0,i.jsx)("div",{className:"w-11 h-11 rounded-xl bg-white/5 flex items-center justify-center",children:(0,i.jsx)(b.A,{className:"w-6 h-6 text-white/60"})}),(0,i.jsx)("span",{className:"text-[10px] font-medium text-white/50",children:"Home"})]}),(0,i.jsxs)("a",{href:"/app/templates",className:"flex flex-col items-center justify-center flex-1 gap-1 py-2 min-h-[44px] touch-manipulation",children:[(0,i.jsx)("div",{className:"w-11 h-11 rounded-xl bg-gradient-to-br from-[#4B8EFF] to-[#2653FF] flex items-center justify-center shadow-lg",children:(0,i.jsx)(y.A,{className:"w-6 h-6 text-white"})}),(0,i.jsx)("span",{className:"text-[10px] font-semibold text-white",children:"Templates"})]}),(0,i.jsxs)("a",{href:"/app/reports",className:"flex flex-col items-center justify-center flex-1 gap-1 py-2 min-h-[44px] touch-manipulation",children:[(0,i.jsx)("div",{className:"w-11 h-11 rounded-xl bg-white/5 flex items-center justify-center",children:(0,i.jsx)(x.A,{className:"w-6 h-6 text-white/60"})}),(0,i.jsx)("span",{className:"text-[10px] font-medium text-white/50",children:"Reports"})]})]})})]})}},25656:(e,t,a)=>{a.d(t,{clearTokenCache:()=>d,lx:()=>h,yd:()=>x,zA:()=>m});var i=a(96648),s=a(32587);let r="https://edge.radly.app",n="0f0a24adba9edfede4bc7413f85967224db6d1501c16f5213e901048cf4eb445",l=null,c=0;async function o(){try{let e=Date.now();if(l&&c>e+3e5)return l;let t=null,r=0;if(s.Capacitor.isNativePlatform()){let{getSupabaseClient:e}=await a.e(3077).then(a.bind(a,13077)),i=await e(),{data:{session:s}}=await i.auth.getSession();t=(null==s?void 0:s.access_token)||null,r=(null==s?void 0:s.expires_at)?1e3*s.expires_at:0}else{let e=(0,i.createBrowserSupabase)(),{data:{session:a}}=await e.auth.getSession();t=(null==a?void 0:a.access_token)||null,r=(null==a?void 0:a.expires_at)?1e3*a.expires_at:0}return l=t,c=r,l}catch(e){return null}}function d(){l=null,c=0}async function u(e){if(!e.ok){let t=await e.text().catch(()=>""),a=Error("".concat(e.status," ").concat(e.statusText));throw a.status=e.status,a.body=t,a}if(204!==e.status)return await e.json()}async function h(e){let t=await o(),a={"x-client-key":n,"X-Request-Id":crypto.randomUUID()};return t&&(a.authorization="Bearer ".concat(t)),u(await fetch("".concat(r).concat(e),{method:"GET",headers:a,credentials:"include",cache:"no-store"}))}async function m(e,t){let a=await o(),i={"content-type":"application/json","x-client-key":n,"X-Request-Id":crypto.randomUUID()};return a&&(i.authorization="Bearer ".concat(a)),u(await fetch("".concat(r).concat(e),{method:"POST",headers:i,body:JSON.stringify(t),credentials:"include"}))}async function x(e,t){let a=await o(),i={"content-type":"application/json","x-client-key":n,"X-Request-Id":crypto.randomUUID()};return a&&(i.authorization="Bearer ".concat(a)),u(await fetch("".concat(r).concat(e),{method:"PUT",headers:i,body:JSON.stringify(t),credentials:"include"}))}},31969:(e,t,a)=>{a.d(t,{JO:()=>l,Rs:()=>n});var i=a(22454),s=a(25656),r=a(85578);function n(){let{isAuthed:e,mounted:t}=(0,r.Q)();return(0,i.I)({queryKey:["subscription-usage"],queryFn:()=>(0,s.lx)("/v1/subscription/usage"),refetchInterval:6e4,enabled:t&&e,retry:(e,t)=>{if(t&&"object"==typeof t&&"status"in t){let e=t.status;if(401===e||403===e||404===e)return!1}return e<3},staleTime:3e4})}function l(){let{data:e}=n();return(null==e?void 0:e.subscription.tier)||"free"}},85578:(e,t,a)=>{a.d(t,{Q:()=>l});var i=a(12115),s=a(96648),r=a(90260),n=a(32587);function l(){let[e,t]=(0,i.useState)(!1),[l,c]=(0,i.useState)(null);return(0,i.useEffect)(()=>{if((0,r.Wj)()){c((0,r.Ld)()),t(!0);return}let e=()=>{};return async function(){if(n.Capacitor.isNativePlatform()){let{getSupabaseClient:t}=await a.e(3077).then(a.bind(a,13077)),i=await t(),{data:s}=await i.auth.getSession();c(s.session);let{data:r}=i.auth.onAuthStateChange((e,t)=>c(t));e=()=>{var e,t;return null==r||null==(t=r.subscription)||null==(e=t.unsubscribe)?void 0:e.call(t)}}else{let t=(0,s.createBrowserSupabase)(),{data:a}=await t.auth.getSession();c(a.session);let{data:i}=t.auth.onAuthStateChange((e,t)=>c(t));e=()=>{var e,t;return null==i||null==(t=i.subscription)||null==(e=t.unsubscribe)?void 0:e.call(t)}}t(!0)}(),()=>e()},[]),{session:l,isAuthed:!!l,mounted:e}}},90260:(e,t,a)=>{a.d(t,{Ld:()=>r,Wj:()=>s});var i=a(95704);function s(){return"true"===i.env.NEXT_PUBLIC_TEST_MODE||"true"===i.env.NEXT_PUBLIC_BYPASS_AUTH||"true"===new URLSearchParams(window.location.search).get("test")}function r(){if(!s())return null;let e=s()?{id:"test-user-id-12345",email:"test@radly.test",created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z",aud:"authenticated",role:"authenticated",app_metadata:{},user_metadata:{full_name:"Test User"},identities:[],factors:[],is_anonymous:!1,phone:"",email_confirmed_at:"2024-01-01T00:00:00Z",phone_confirmed_at:void 0,confirmed_at:"2024-01-01T00:00:00Z",last_sign_in_at:"2024-01-01T00:00:00Z",is_sso_user:!1,provider:"email",providers:["email"]}:null;return e?{access_token:"test-access-token",refresh_token:"test-refresh-token",expires_in:3600,expires_at:Math.floor(Date.now()/1e3)+3600,token_type:"bearer",user:e}:null}},96648:(e,t,a)=>{a.d(t,{createBrowserSupabase:()=>s});var i=a(16010);function s(){return(0,i.createBrowserClient)("https://bsldtgivgtyzacwyvcfh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJzbGR0Z2l2Z3R5emFjd3l2Y2ZoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5MzQ1NzMsImV4cCI6MjA3NTUxMDU3M30.vjHPo6WEASxYBOAGYmZ93o5n9RhZvANSlLhaT-wagTs",{auth:{flowType:"pkce",detectSessionInUrl:!0,persistSession:!0}})}}}]);