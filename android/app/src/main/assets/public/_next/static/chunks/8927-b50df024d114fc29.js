"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8927],{13077:(e,t,i)=>{i.d(t,{getSupabaseClient:()=>o});var a=i(11993),r=i(16010),s=i(32587),n=i(4077);class l{static getInstance(){return l.instance||(l.instance=new l),l.instance}async initialize(){if(!this.initialized)return this.initializationPromise||(this.initializationPromise=this._doInitialize()),this.initializationPromise}async _doInitialize(){try{if(!s.Capacitor.isNativePlatform()){this.initialized=!0;return}let{keys:e}=await n.Preferences.keys();for(let t of e.filter(e=>e.startsWith(this.STORAGE_PREFIX)))try{let{value:e}=await n.Preferences.get({key:t});if(e){let i=t.substring(this.STORAGE_PREFIX.length);this.cache.set(i,e)}}catch(e){}this.initialized=!0}catch(e){this.initialized=!0}}getItem(e){return this.initialized&&this.cache.get(e)||null}setItem(e,t){this.initialized&&(this.cache.set(e,t),this._persistToStorage(e,t).catch(e=>{}))}removeItem(e){this.initialized&&(this.cache.delete(e),this._removeFromStorage(e).catch(e=>{}))}async _persistToStorage(e,t){if(!s.Capacitor.isNativePlatform())return;let i=this.STORAGE_PREFIX+e;try{await n.Preferences.set({key:i,value:t})}catch(e){throw e}}async _removeFromStorage(e){if(!s.Capacitor.isNativePlatform())return;let t=this.STORAGE_PREFIX+e;try{await n.Preferences.remove({key:t})}catch(e){throw e}}async clear(){if(this.cache.clear(),s.Capacitor.isNativePlatform())try{let{keys:e}=await n.Preferences.keys();for(let t of e.filter(e=>e.startsWith(this.STORAGE_PREFIX)))await n.Preferences.remove({key:t})}catch(e){}}getDebugInfo(){return{initialized:this.initialized,cacheSize:this.cache.size,cachedKeys:Array.from(this.cache.keys()),platform:s.Capacitor.isNativePlatform()?"capacitor":"web",prefix:this.STORAGE_PREFIX}}constructor(){this.cache=new Map,this.initialized=!1,this.initializationPromise=null,this.STORAGE_PREFIX="sb-"}}async function o(){if(i.g.__supabase_client&&i.g.__supabase_client_initialized)return i.g.__supabase_client;if(i.g.__supabase_client_initialized){let e=0;for(;!i.g.__supabase_client&&e<50;)await new Promise(e=>setTimeout(e,100)),e++;if(i.g.__supabase_client)return i.g.__supabase_client;throw Error("Supabase client initialization timeout")}i.g.__supabase_client_initialized=!0;try{let e,t,s=(()=>{var e;let t=window.Capacitor;return!!(null==t||null==(e=t.isNativePlatform)?void 0:e.call(t))})();if(s){let e=l.getInstance();await e.initialize(),t=function(){let e=l.getInstance();return e.initialize().catch(e=>{}),{getItem:t=>e.getItem(t),setItem:(t,i)=>e.setItem(t,i),removeItem:t=>e.removeItem(t)}}()}return e=s?(0,a.UU)("https://bsldtgivgtyzacwyvcfh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJzbGR0Z2l2Z3R5emFjd3l2Y2ZoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5MzQ1NzMsImV4cCI6MjA3NTUxMDU3M30.vjHPo6WEASxYBOAGYmZ93o5n9RhZvANSlLhaT-wagTs",{auth:{storage:t,persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!1,debug:!0}}):(0,r.createBrowserClient)("https://bsldtgivgtyzacwyvcfh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJzbGR0Z2l2Z3R5emFjd3l2Y2ZoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5MzQ1NzMsImV4cCI6MjA3NTUxMDU3M30.vjHPo6WEASxYBOAGYmZ93o5n9RhZvANSlLhaT-wagTs",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!1,flowType:"pkce",debug:!1}}),i.g.__supabase_client=e,e.__isSingleton=!0,e.__createdAt=new Date().toISOString(),e.__platform=s?"capacitor":"web",e}catch(e){throw i.g.__supabase_client_initialized=!1,e}}void 0===i.g&&(globalThis.global=globalThis)},18927:(e,t,i)=>{i.d(t,{O:()=>h,A:()=>d});var a=i(95155),r=i(12115),s=i(32587),n=i(16010),l=i(90260);function o(){try{let e=(0,n.createBrowserClient)("https://bsldtgivgtyzacwyvcfh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJzbGR0Z2l2Z3R5emFjd3l2Y2ZoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5MzQ1NzMsImV4cCI6MjA3NTUxMDU3M30.vjHPo6WEASxYBOAGYmZ93o5n9RhZvANSlLhaT-wagTs",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!1,flowType:"pkce",debug:!1}});if((0,l.Wj)()){let t=(0,l.Ld)();return{...e,auth:{...e.auth,getSession:async()=>({data:{session:t},error:null}),getUser:async()=>({data:{user:(null==t?void 0:t.user)||null},error:null}),signOut:async()=>({error:null}),signInWithOAuth:async()=>({error:Error("Test mode: OAuth not available")}),exchangeCodeForSession:async()=>({error:Error("Test mode: Code exchange not available")}),onAuthStateChange:e=>(e("SIGNED_IN",t),{data:{subscription:{unsubscribe:()=>{}}}})}}}return e}catch(e){return{auth:{getSession:async()=>({data:{session:null},error:null}),getUser:async()=>({data:{user:null},error:null}),signOut:async()=>({error:null}),onAuthStateChange:()=>({data:{subscription:{unsubscribe:()=>{}}}}),signInWithOAuth:async()=>({error:Error("Mock client: OAuth not available")}),exchangeCodeForSession:async()=>({error:Error("Mock client: Code exchange not available")})}}}}var c=i(13077);let u=(0,r.createContext)(void 0);function h(e){let{children:t}=e,[n,l]=(0,r.useState)(null),[h,d]=(0,r.useState)(null),[_,I]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e;return(async()=>{try{var t;let i=s.Capacitor.isNativePlatform()?await (0,c.getSupabaseClient)():o(),{data:{session:a}}=await i.auth.getSession();d(a),l(null!=(t=null==a?void 0:a.user)?t:null),I(!1);let{data:{subscription:r}}=i.auth.onAuthStateChange((e,t)=>{var i;d(t),l(null!=(i=null==t?void 0:t.user)?i:null),I(!1)});e=()=>r.unsubscribe()}catch(e){d(null),l(null),I(!1)}})(),()=>{try{null==e||e()}catch(e){}}},[]);let m=async()=>{try{let e=s.Capacitor.isNativePlatform()?await (0,c.getSupabaseClient)():o();await e.auth.signOut();let{clearTokenCache:t}=await i.e(5656).then(i.bind(i,25656));t()}catch(e){}};return(0,a.jsx)(u.Provider,{value:{user:n,session:h,loading:_,signOut:m},children:t})}function d(){let e=(0,r.useContext)(u);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},90260:(e,t,i)=>{i.d(t,{Ld:()=>s,Wj:()=>r});var a=i(95704);function r(){return"true"===a.env.NEXT_PUBLIC_TEST_MODE||"true"===a.env.NEXT_PUBLIC_BYPASS_AUTH||"true"===new URLSearchParams(window.location.search).get("test")}function s(){if(!r())return null;let e=r()?{id:"test-user-id-12345",email:"test@radly.test",created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z",aud:"authenticated",role:"authenticated",app_metadata:{},user_metadata:{full_name:"Test User"},identities:[],factors:[],is_anonymous:!1,phone:"",email_confirmed_at:"2024-01-01T00:00:00Z",phone_confirmed_at:void 0,confirmed_at:"2024-01-01T00:00:00Z",last_sign_in_at:"2024-01-01T00:00:00Z",is_sso_user:!1,provider:"email",providers:["email"]}:null;return e?{access_token:"test-access-token",refresh_token:"test-refresh-token",expires_in:3600,expires_at:Math.floor(Date.now()/1e3)+3600,token_type:"bearer",user:e}:null}}}]);