"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1523],{9540:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(71847).A)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},11811:(e,t,a)=>{a.d(t,{QK:()=>s}),a(25656);async function s(e){let t=await e("/v1/templates");return Array.isArray(t)?t.map(e=>(function(e){var t,a,s,i,l,n,r,d,c,o,x,m,h;let u=String(null!=(a=null!=(t=null==e?void 0:e.id)?t:null==e?void 0:e.template_id)?a:""),p=String(null!=(n=null!=(l=null!=(i=null!=(s=null==e?void 0:e.title)?s:null==e?void 0:e.name)?i:null==e?void 0:e.label)?l:null==e?void 0:e.display_name)?n:"").trim(),b=null!=(h=null!=(m=null!=(x=null!=(o=null!=(c=null!=(d=null!=(r=null==e?void 0:e.updatedAt)?r:null==e?void 0:e.updated_at)?d:null==e?void 0:e.modified_at)?c:null==e?void 0:e.modifiedAt)?o:null==e?void 0:e.version_updated)?x:null==e?void 0:e.created_at)?m:null==e?void 0:e.createdAt)?h:null,f=function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];if(!e)return{};let i={};return a.forEach(t=>{i[t]=e[t]}),i}(e,"modality","anatomy","version","description");return{id:u,title:p||"(Untitled Template)",updatedAt:b&&"string"==typeof b?new Date(b).toISOString():null,...f}})(e)):[]}},12108:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(71847).A)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},15870:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(71847).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},24033:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(71847).A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},31523:(e,t,a)=>{a.r(t),a.d(t,{default:()=>P});var s=a(95155),i=a(12115),l=a(20063),n=a(1733),r=a(26497),d=a(9540),c=a(15870),o=a(89715),x=a(20508),m=a(7744),h=a(57828),u=a(42529),p=a(12108),b=a(24033),f=a(90368),w=a(46046),j=a(65229),g=a(50906),v=a(65644),N=a(84926),y=a(18927),F=a(31969),k=a(11811),A=a(25656),C=a(51056),B=a(22454),S=a(18720),E=a(73272),R=a(8971),z=a(16421);function P(){let e=(0,l.useRouter)(),t=(0,l.useSearchParams)(),{user:a,signOut:P}=(0,y.A)(),{data:M}=(0,F.Rs)(),[_,D]=(0,i.useState)(!1),[I,T]=(0,i.useState)(!1),[G,q]=(0,i.useState)(!1),[L,O]=(0,i.useState)(!1),[H,V]=(0,i.useState)(1),[J,K]=(0,i.useState)(!1),[Q,U]=(0,i.useState)({name:"",date:new Date().toLocaleDateString()}),[W,X]=(0,i.useState)({template:!1,patient:!1,findings:!0}),Y=t.get("templateId"),{userId:Z}=(0,R.L)(),[$,ee]=(0,i.useState)(""),[et,ea]=(0,i.useState)({name:"",age:"",gender:""}),{data:es,isLoading:ei}=(0,B.I)({queryKey:["templates"],queryFn:async()=>await (0,k.QK)(A.lx)}),el=null==es?void 0:es.find(e=>e.id===Y),en=async()=>{await P(),D(!1)},er=(e,t)=>{ea(a=>({...a,[e]:t}))},ed=async()=>{let e={templateId:Y||"",templateName:(null==el?void 0:el.title)||"No template",patient:et,findings:$,updatedAt:Date.now()};localStorage.setItem("draft_".concat(Date.now()),JSON.stringify(e)),D(!1)},ec=async()=>{if(!el)return void T(!0);if(!et.name||!et.age||!et.gender)return void q(!0);if($.trim()){if(!Q.name.trim())return void O(!0);O(!0)}},eo=async()=>{K(!0);try{let t={name:et.name||void 0,age:parseInt(et.age)||void 0,sex:et.gender||void 0},a={templateId:Y||(null==el?void 0:el.id)||"",indication:"",findings:$,impression:"",technique:"",patient:t,signature:Q},s=(await (0,C.Ix)(a)).job_id;(0,E.L)();try{if(Z){let e="radly_recent_jobs_local_".concat(Z),t=JSON.parse(localStorage.getItem(e)||"[]");t.unshift({job_id:s,status:"queued",template_id:a.templateId,title:(null==el?void 0:el.title)||"Generatingâ€¦",created_at:Date.now()}),localStorage.setItem(e,JSON.stringify(t))}}catch(e){}sessionStorage.setItem("radly:lastJobId",s),S.oR.success("Report generation started!"),e.push("/app/report/".concat(s))}catch(e){S.oR.error("Failed to generate report. Please try again.")}finally{K(!1)}},ex=e=>{X(t=>({...t,[e]:!t[e]}))};return ei?(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-[#0a0e1a] via-[#0c1018] to-[#0a0e1a] text-white",children:[(0,s.jsx)("div",{className:"h-16 bg-[#0a0e1a]"}),(0,s.jsxs)(n.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"sticky top-16 z-50 bg-gradient-to-b from-[#0a0e1a] to-transparent px-4 pb-4 pt-4 flex items-center justify-between border-b border-white/10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{onClick:()=>D(!0),className:"w-12 h-12 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center active:scale-95 transition-transform touch-manipulation",children:(0,s.jsx)(d.A,{className:"w-6 h-6 text-white/80"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl font-bold text-white",children:"Generate"}),(0,s.jsx)("p",{className:"text-sm text-white/60",children:"Loading..."})]})]}),(0,s.jsx)("button",{onClick:()=>e.push("/app/settings"),className:"w-12 h-12 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center active:scale-95 transition-transform touch-manipulation",children:(0,s.jsx)(c.A,{className:"w-6 h-6 text-white/80"})})]}),(0,s.jsxs)("div",{className:"px-4 py-6 space-y-4",children:[(0,s.jsx)("div",{className:"h-32 bg-white/5 rounded-2xl animate-pulse"}),(0,s.jsx)("div",{className:"h-48 bg-white/5 rounded-2xl animate-pulse"}),(0,s.jsx)("div",{className:"h-64 bg-white/5 rounded-2xl animate-pulse"})]})]}):(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-[#0a0e1a] via-[#0c1018] to-[#0a0e1a] text-white",children:[(0,s.jsx)("div",{className:"h-16 bg-[#0a0e1a]"}),(0,s.jsxs)(n.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"sticky top-16 z-50 bg-gradient-to-b from-[#0a0e1a] to-transparent px-4 pb-4 pt-4 flex items-center justify-between border-b border-white/10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{onClick:()=>D(!0),className:"w-12 h-12 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center active:scale-95 transition-transform touch-manipulation",children:(0,s.jsx)(d.A,{className:"w-6 h-6 text-white/80"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl font-bold text-white",children:"Generate Report"}),(0,s.jsx)("p",{className:"text-sm text-white/60",children:el?el.title:"Select template"})]})]}),(0,s.jsx)("button",{onClick:()=>e.push("/app/settings"),className:"w-12 h-12 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center active:scale-95 transition-transform touch-manipulation",children:(0,s.jsx)(c.A,{className:"w-6 h-6 text-white/80"})})]}),(0,s.jsx)("div",{className:"px-4 py-4",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:[{id:1,name:"Template",icon:o.A},{id:2,name:"Patient",icon:x.A},{id:3,name:"Findings",icon:m.A},{id:4,name:"Review",icon:h.A}].map(e=>(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsxs)("button",{onClick:()=>{let t=null!==el,a=null!==el,s=null!==el&&""!==et.name.trim(),i=null!==el&&""!==et.name.trim()&&""!==$.trim();(1===e.id&&t||2===e.id&&a||3===e.id&&s||4===e.id&&i)&&V(e.id)},className:"relative w-12 h-12 rounded-full flex items-center justify-center transition-all touch-manipulation ".concat((()=>{let t=null!==el,a=null!==el,s=null!==el&&""!==et.name.trim(),i=null!==el&&""!==et.name.trim()&&""!==$.trim(),l=1===e.id&&t||2===e.id&&a||3===e.id&&s||4===e.id&&i;return H>=e.id?"bg-gradient-to-br from-[#4B8EFF] to-[#2653FF] text-white shadow-lg":l?"bg-white/20 text-white/80 border border-white/30":"bg-white/10 text-white/40 border border-white/20"})()),children:[(0,s.jsx)(e.icon,{className:"w-5 h-5"}),H>e.id&&(0,s.jsx)(u.A,{className:"absolute -bottom-1 -right-1 w-4 h-4 text-[#3FBF8C]"})]}),(0,s.jsx)("span",{className:"text-xs mt-2 font-medium ".concat((()=>{let t=null!==el,a=null!==el,s=null!==el&&""!==et.name.trim(),i=null!==el&&""!==et.name.trim()&&""!==$.trim(),l=1===e.id&&t||2===e.id&&a||3===e.id&&s||4===e.id&&i;return H>=e.id?"text-white":l?"text-white/70":"text-white/40"})()),children:e.name})]},e.id))}),(0,s.jsx)("div",{className:"absolute top-6 left-6 right-6 h-0.5 bg-white/10 -z-10",children:(0,s.jsx)("div",{className:"h-full bg-gradient-to-r from-[#4B8EFF] to-[#2653FF] transition-all duration-300",style:{width:"".concat((H-1)/3*100,"%")}})})]})}),(0,s.jsxs)("div",{className:"px-4 py-6 pb-32 space-y-4",children:[1===H&&(0,s.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-[rgba(255,255,255,0.05)] backdrop-blur-xl border border-[rgba(255,255,255,0.08)] rounded-2xl overflow-hidden",children:[(0,s.jsxs)("button",{onClick:()=>ex("template"),className:"w-full p-4 flex items-center justify-between text-left touch-manipulation active:scale-[0.98] transition-transform",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl ".concat(el?"bg-gradient-to-br from-[#4B8EFF] to-[#2653FF]":"bg-white/5 border border-white/10"," flex items-center justify-center"),children:(0,s.jsx)(o.A,{className:"w-5 h-5 text-white"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"text-base font-semibold text-white",children:"Template"}),(0,s.jsx)("p",{className:"text-sm text-white/60 truncate",children:el?el.title:"No template selected"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[el&&(0,s.jsx)(u.A,{className:"w-5 h-5 text-[#3FBF8C]"}),W.template?(0,s.jsx)(p.A,{className:"w-5 h-5 text-white/60"}):(0,s.jsx)(b.A,{className:"w-5 h-5 text-white/60"})]})]}),(0,s.jsx)(r.N,{children:W.template&&(0,s.jsx)(n.P.div,{initial:{height:0},animate:{height:"auto"},exit:{height:0},className:"border-t border-white/10",children:(0,s.jsxs)("div",{className:"p-4 space-y-3",children:[(0,s.jsx)("button",{onClick:()=>T(!0),className:"w-full py-3 bg-[rgba(75,142,255,0.2)] border border-[rgba(75,142,255,0.3)] rounded-xl text-white font-medium active:scale-95 transition-transform",children:el?"Change Template":"Select Template"}),el&&(0,s.jsxs)("div",{className:"space-y-2",children:[el.modality&&(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("span",{className:"px-2 py-0.5 bg-[#4B8EFF]/20 border border-[#4B8EFF]/30 rounded-full text-[10px] font-medium text-[#4B8EFF]",children:el.modality})}),el.anatomy&&(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("span",{className:"px-2 py-0.5 bg-[#8F82FF]/20 border border-[#8F82FF]/30 rounded-full text-[10px] font-medium text-[#8F82FF]",children:el.anatomy})}),el.description&&(0,s.jsx)("p",{className:"text-sm text-white/60",children:el.description})]})]})})})]}),2===H&&(0,s.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-[rgba(255,255,255,0.05)] backdrop-blur-xl border border-[rgba(255,255,255,0.08)] rounded-2xl overflow-hidden",children:[(0,s.jsxs)("button",{onClick:()=>ex("patient"),className:"w-full p-4 flex items-center justify-between text-left touch-manipulation active:scale-[0.98] transition-transform",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl ".concat(et.name&&et.age&&et.gender?"bg-gradient-to-br from-[#3FBF8C] to-[#4B8EFF]":"bg-white/5 border border-white/10"," flex items-center justify-center"),children:(0,s.jsx)(x.A,{className:"w-5 h-5 text-white"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"text-base font-semibold text-white",children:"Patient Details"}),(0,s.jsx)("p",{className:"text-sm text-white/60",children:et.name?"".concat(et.name,", ").concat(et.age,", ").concat(et.gender):"No patient selected"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[et.name&&et.age&&et.gender&&(0,s.jsx)(u.A,{className:"w-5 h-5 text-[#3FBF8C]"}),W.patient?(0,s.jsx)(p.A,{className:"w-5 h-5 text-white/60"}):(0,s.jsx)(b.A,{className:"w-5 h-5 text-white/60"})]})]}),(0,s.jsx)(r.N,{children:W.patient&&(0,s.jsx)(n.P.div,{initial:{height:0},animate:{height:"auto"},exit:{height:0},className:"border-t border-white/10",children:(0,s.jsxs)("div",{className:"p-4 space-y-4",children:[(0,s.jsx)("button",{onClick:()=>q(!0),className:"w-full py-3 bg-[rgba(63,191,140,0.2)] border border-[rgba(63,191,140,0.3)] rounded-xl text-white font-medium active:scale-95 transition-transform",children:et.name?"Edit Patient Details":"Enter Patient Details"}),et.name&&(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-white/60",children:"Name:"}),(0,s.jsx)("span",{className:"text-white",children:et.name})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-white/60",children:"Age:"}),(0,s.jsx)("span",{className:"text-white",children:et.age})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-white/60",children:"Gender:"}),(0,s.jsx)("span",{className:"text-white",children:et.gender})]})]})]})})})]}),3===H&&(0,s.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-[rgba(255,255,255,0.05)] backdrop-blur-xl border border-[rgba(255,255,255,0.08)] rounded-2xl overflow-hidden",children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#8F82FF] to-[#4B8EFF] flex items-center justify-center",children:(0,s.jsx)(m.A,{className:"w-5 h-5 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-base font-semibold text-white",children:"Clinical Findings"}),(0,s.jsx)("p",{className:"text-sm text-white/60",children:$.length>0?"".concat($.length," characters"):"Tap microphone to start"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[$.length>0&&(0,s.jsx)(u.A,{className:"w-5 h-5 text-[#3FBF8C]"}),W.findings?(0,s.jsx)(p.A,{className:"w-5 h-5 text-white/60"}):(0,s.jsx)(b.A,{className:"w-5 h-5 text-white/60"})]})]}),(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("textarea",{value:$,onChange:e=>ee(e.target.value),placeholder:"Tap the microphone to start dictating clinical findings (or write finding text)...",className:"w-full h-32 p-4 bg-white/5 border border-white/10 rounded-xl text-white placeholder:text-white/40 resize-none focus:outline-none focus:border-[#4B8EFF]/50 pr-16"}),(0,s.jsx)("div",{className:"absolute bottom-4 right-4",children:(0,s.jsx)(z.z,{onTranscript:e=>{ee(t=>t+(t?" ":"")+e)},onError:e=>S.oR.error(e),className:"w-14 h-14 rounded-full"})})]})})]})}),4===H&&(0,s.jsxs)("div",{className:"bg-[rgba(255,255,255,0.05)] backdrop-blur-xl border border-[rgba(255,255,255,0.08)] rounded-2xl overflow-hidden p-6",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-[#F8B74D] to-[#FF6B6B] flex items-center justify-center",children:(0,s.jsx)(h.A,{className:"w-8 h-8 text-white"})}),(0,s.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:"Review & Submit"}),(0,s.jsx)("p",{className:"text-sm text-white/60",children:"Review your information before generating"})]}),(0,s.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-xl",children:[(0,s.jsx)("span",{className:"text-white/70",children:"Template"}),(0,s.jsx)("span",{className:"text-white font-medium",children:(null==el?void 0:el.title)||"No template"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-xl",children:[(0,s.jsx)("span",{className:"text-white/70",children:"Patient"}),(0,s.jsx)("span",{className:"text-white font-medium",children:et.name||"No patient"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-xl",children:[(0,s.jsx)("span",{className:"text-white/70",children:"Findings"}),(0,s.jsxs)("span",{className:"text-white font-medium",children:[$.length," characters"]})]})]}),(0,s.jsx)("button",{onClick:()=>O(!0),className:"w-full py-3 bg-gradient-to-r from-[#4B8EFF] to-[#2653FF] rounded-xl text-white font-semibold active:scale-95 transition-transform",children:"Review Details & Sign"})]})]}),(0,s.jsx)("div",{className:"fixed bottom-0 left-0 right-0 z-40 bg-[rgba(10,14,26,0.95)] backdrop-blur-xl border-t border-white/10",style:{paddingBottom:"max(env(safe-area-inset-bottom), 0.5rem)"},children:(0,s.jsxs)("div",{className:"px-4 py-3 flex gap-3",children:[(0,s.jsx)("button",{onClick:()=>{H>1&&V(H-1)},disabled:1===H,className:"w-12 h-12 rounded-xl flex items-center justify-center transition-all active:scale-95 ".concat(1===H?"bg-white/5 border border-white/10 text-white/40 opacity-40 cursor-not-allowed":"bg-white/5 border border-white/10 text-white/80 active:bg-white/10"),children:(0,s.jsx)(f.A,{className:"w-5 h-5"})}),H<4?(0,s.jsx)("button",{onClick:3===H?ec:()=>{H<4&&V(H+1)},className:"flex-1 py-3 bg-gradient-to-r from-[#4B8EFF] to-[#2653FF] rounded-xl text-white font-semibold active:scale-95 transition-flex",children:3===H?"Review":"Next"}):(0,s.jsx)("button",{onClick:eo,disabled:J,className:"flex-1 py-3 bg-gradient-to-r from-[#3FBF8C] to-[#6EE7B7] rounded-xl text-white font-semibold active:scale-95 transition-flex disabled:opacity-60",children:J?"Generating...":"Generate Report"}),(0,s.jsx)("button",{onClick:ed,className:"w-12 h-12 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center active:scale-95 transition-flex",children:(0,s.jsx)(w.A,{className:"w-5 h-5 text-white/80"})})]})}),(0,s.jsx)(r.N,{children:I&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm",onClick:()=>T(!1)}),(0,s.jsxs)(n.P.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:"fixed bottom-0 left-0 right-0 z-50 bg-[#0a0e1a] rounded-t-3xl shadow-2xl max-h-[80vh] flex flex-col",style:{paddingBottom:"max(env(safe-area-inset-bottom), 1rem)"},children:[(0,s.jsx)("div",{className:"p-6 border-b border-white/10",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-white",children:"Select Template"}),(0,s.jsx)("button",{onClick:()=>T(!1),className:"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center active:scale-95 transition-transform",children:(0,s.jsx)(j.A,{className:"w-5 h-5 text-white/70"})})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,s.jsx)("div",{className:"grid grid-cols-1 gap-3",children:null==es?void 0:es.map(a=>(0,s.jsx)("button",{onClick:()=>(a=>{let s=new URLSearchParams(t);s.set("templateId",a.id),e.push("/app/generate?".concat(s.toString())),T(!1),X(e=>({...e,template:!1}))})(a),className:"p-4 rounded-xl border active:scale-95 transition-all text-left ".concat((null==el?void 0:el.id)===a.id?"bg-[rgba(75,142,255,0.2)] border-[#4B8EFF]":"bg-white/5 border-white/10"),children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#4B8EFF] to-[#2653FF] flex items-center justify-center shrink-0",children:(0,s.jsx)(o.A,{className:"w-5 h-5 text-white"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"text-base font-semibold text-white mb-1",children:a.title}),(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[a.modality&&(0,s.jsx)("span",{className:"px-2 py-0.5 bg-[#4B8EFF]/20 border border-[#4B8EFF]/30 rounded-full text-[10px] font-medium text-[#4B8EFF]",children:a.modality}),a.anatomy&&(0,s.jsx)("span",{className:"px-2 py-0.5 bg-[#8F82FF]/20 border border-[#8F82FF]/30 rounded-full text-[10px] font-medium text-[#8F82FF]",children:a.anatomy})]})]})]})},a.id))})})]})]})}),(0,s.jsx)(r.N,{children:G&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm",onClick:()=>q(!1)}),(0,s.jsxs)(n.P.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:"fixed bottom-0 left-0 right-0 z-50 bg-[#0a0e1a] rounded-t-3xl shadow-2xl max-h-[80vh] flex flex-col",style:{paddingBottom:"max(env(safe-area-inset-bottom), 2rem)"},children:[(0,s.jsx)("div",{className:"p-6 border-b border-white/10",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-white",children:"Patient Details"}),(0,s.jsx)("button",{onClick:()=>q(!1),className:"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center active:scale-95 transition-transform",children:(0,s.jsx)(j.A,{className:"w-5 h-5 text-white/70"})})]})}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-white/70 mb-2",children:"Name *"}),(0,s.jsx)("input",{type:"text",value:et.name,onChange:e=>er("name",e.target.value),placeholder:"Patient name",className:"w-full p-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder:text-white/40 focus:outline-none focus:border-[#4B8EFF]/50"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-white/70 mb-2",children:"Age *"}),(0,s.jsx)("input",{type:"number",value:et.age,onChange:e=>er("age",e.target.value),placeholder:"Age",className:"w-full p-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder:text-white/40 focus:outline-none focus:border-[#4B8EFF]/50"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-white/70 mb-2",children:"Gender *"}),(0,s.jsxs)("select",{value:et.gender,onChange:e=>er("gender",e.target.value),className:"w-full p-3 bg-white/5 border border-white/10 rounded-xl text-white focus:outline-none focus:border-[#4B8EFF]/50",children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"Select"}),(0,s.jsx)("option",{value:"Male",children:"Male"}),(0,s.jsx)("option",{value:"Female",children:"Female"}),(0,s.jsx)("option",{value:"Other",children:"Other"})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4 border-t border-white/10",children:[(0,s.jsx)("button",{onClick:()=>q(!1),className:"flex-1 py-3 bg-white/5 border border-white/10 rounded-xl text-white/80 font-medium active:scale-95 transition-transform",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>q(!1),className:"flex-1 py-3 bg-gradient-to-r from-[#3FBF8C] to-[#4B8EFF] rounded-xl text-white font-semibold active:scale-95 transition-transform",children:"Confirm & Continue"})]})]})]})]})}),(0,s.jsx)(r.N,{children:L&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm",onClick:()=>O(!1)}),(0,s.jsxs)(n.P.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:"fixed bottom-0 left-0 right-0 z-50 bg-[#0a0e1a] rounded-t-3xl shadow-2xl max-h-[85vh] flex flex-col",style:{paddingBottom:"max(env(safe-area-inset-bottom), 2rem)"},children:[(0,s.jsx)("div",{className:"p-6 border-b border-white/10",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#F8B74D] to-[#FF6B6B] flex items-center justify-center",children:(0,s.jsx)(h.A,{className:"w-5 h-5 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-white",children:"Review & Submit"}),(0,s.jsx)("p",{className:"text-sm text-white/60",children:"Review your information before generating"})]})]}),(0,s.jsx)("button",{onClick:()=>O(!1),className:"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center active:scale-95 transition-transform",children:(0,s.jsx)(j.A,{className:"w-5 h-5 text-white/70"})})]})}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Signature"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-white/70 mb-2",children:"Signature Name *"}),(0,s.jsx)("input",{type:"text",value:Q.name,onChange:e=>U(t=>({...t,name:e.target.value})),placeholder:"Dr. Jane Smith",className:"w-full p-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder:text-white/40 focus:outline-none focus:border-[#4B8EFF]/50"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-white/70 mb-2",children:"Date"}),(0,s.jsx)("input",{type:"text",value:Q.date,onChange:e=>U(t=>({...t,date:e.target.value})),placeholder:new Date().toLocaleDateString(),className:"w-full p-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder:text-white/40 focus:outline-none focus:border-[#4B8EFF]/50"})]})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-white/12 bg-white/5 p-6 space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Report Summary"}),(0,s.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-white/70 font-medium",children:"Template:"}),(0,s.jsx)("p",{className:"mt-1 text-white",children:(null==el?void 0:el.title)||"No template selected"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-white/70 font-medium",children:"Patient:"}),(0,s.jsxs)("p",{className:"mt-1 text-white",children:[et.name&&"".concat(et.name),et.age&&", ".concat(et.age," years"),et.gender&&", ".concat(et.gender)]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-white/70 font-medium",children:"Findings:"}),(0,s.jsx)("p",{className:"mt-1 text-white whitespace-pre-wrap break-words",children:$||"No findings provided"})]})]})]}),(0,s.jsx)("div",{className:"rounded-2xl border border-[#4B8EFF]/35 bg-white/5 p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(u.A,{className:"w-5 h-5 text-[#3FBF8C]"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-white",children:"Ready to Generate"}),(0,s.jsx)("p",{className:"text-sm text-white/70",children:"Review the details above and tap generate to create your report"})]})]})})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-white/10 space-y-3",children:[(0,s.jsx)("button",{onClick:()=>O(!1),className:"w-full py-3 bg-white/5 border border-white/10 rounded-xl text-white/80 font-medium active:scale-95 transition-transform",children:"Continue Editing"}),(0,s.jsx)("button",{onClick:eo,disabled:J||!Q.name.trim(),className:"w-full py-3 bg-gradient-to-r from-[#3FBF8C] to-[#4B8EFF] rounded-xl text-white font-semibold active:scale-95 transition-transform disabled:opacity-60",children:J?"Generating...":"Generate Report"})]})]})]})}),(0,s.jsxs)(n.P.div,{initial:{x:"-100%"},animate:{x:_?0:"-100%"},transition:{type:"spring",damping:30,stiffness:300},className:"fixed inset-y-0 left-0 z-50 w-[85vw] max-w-sm bg-[rgba(10,14,26,0.98)] backdrop-blur-xl border-r border-white/10 shadow-2xl flex flex-col",style:{paddingTop:"max(env(safe-area-inset-top), 1.5rem)"},children:[(0,s.jsxs)("div",{className:"p-6 border-b border-white/10",style:{paddingTop:"max(env(safe-area-inset-top), 1.5rem)"},children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#2653FF] to-[#8F82FF] flex items-center justify-center",children:(0,s.jsx)(o.A,{className:"w-5 h-5 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-white/50 uppercase tracking-wider",children:"Radly"}),(0,s.jsx)("p",{className:"text-base font-bold text-white",children:"Generate"})]})]}),(0,s.jsx)("button",{onClick:()=>D(!1),className:"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center active:scale-95 transition-transform",children:(0,s.jsx)(j.A,{className:"w-5 h-5 text-white/70"})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl border border-white/10",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-[#4B8EFF] to-[#8F82FF] flex items-center justify-center",children:(0,s.jsx)(x.A,{className:"w-5 h-5 text-white"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-white truncate",children:(null==a?void 0:a.email)||"User"}),(0,s.jsx)("p",{className:"text-xs text-white/50",children:null==M?void 0:M.subscription.tier_display_name})]})]})]}),(0,s.jsxs)("div",{className:"p-4 space-y-2 flex-1 overflow-y-auto",children:[(0,s.jsx)("a",{href:"/app/dashboard",onClick:()=>D(!1),children:(0,s.jsxs)("div",{className:"flex items-center gap-3 p-4 rounded-xl hover:bg-white/5 active:scale-95 transition-transform min-h-[56px] touch-manipulation",children:[(0,s.jsx)(g.A,{className:"w-5 h-5 text-white/60"}),(0,s.jsx)("span",{className:"text-base font-medium text-white/80",children:"Dashboard"})]})}),(0,s.jsx)("a",{href:"/app/templates",onClick:()=>D(!1),children:(0,s.jsxs)("div",{className:"flex items-center gap-3 p-4 rounded-xl hover:bg-white/5 active:scale-95 transition-transform min-h-[56px] touch-manipulation",children:[(0,s.jsx)(v.A,{className:"w-5 h-5 text-white/60"}),(0,s.jsx)("span",{className:"text-base font-medium text-white/80",children:"Templates"})]})}),(0,s.jsx)("a",{href:"/app/reports",onClick:()=>D(!1),children:(0,s.jsxs)("div",{className:"flex items-center gap-3 p-4 rounded-xl hover:bg-white/5 active:scale-95 transition-transform min-h-[56px] touch-manipulation",children:[(0,s.jsx)(o.A,{className:"w-5 h-5 text-white/60"}),(0,s.jsx)("span",{className:"text-base font-medium text-white/80",children:"Reports"})]})}),(0,s.jsx)("a",{href:"/app/settings",onClick:()=>D(!1),children:(0,s.jsxs)("div",{className:"flex items-center gap-3 p-4 rounded-xl hover:bg-white/5 active:scale-95 transition-transform min-h-[56px] touch-manipulation",children:[(0,s.jsx)(c.A,{className:"w-5 h-5 text-white/60"}),(0,s.jsx)("span",{className:"text-base font-medium text-white/80",children:"Settings"})]})})]}),(0,s.jsx)("div",{className:"p-4 border-t border-white/10",style:{paddingBottom:"max(env(safe-area-inset-bottom), 1rem)"},children:(0,s.jsxs)("button",{onClick:en,className:"w-full flex items-center justify-center gap-2 p-4 bg-white/5 border border-white/10 rounded-xl text-white/80 hover:bg-white/10 active:scale-95 transition-all min-h-[56px] touch-manipulation",children:[(0,s.jsx)(N.A,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"text-base font-medium",children:"Sign Out"})]})})]}),_&&(0,s.jsx)("div",{className:"fixed inset-0 z-40 bg-black/60 backdrop-blur-sm",onClick:()=>D(!1)}),J&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-[rgba(4,8,18,0.95)] backdrop-blur-sm",children:(0,s.jsxs)("div",{className:"relative w-full max-w-md mx-4 rounded-3xl border border-[#4B8EFF]/30 bg-gradient-to-br from-[rgba(12,16,28,0.98)] to-[rgba(5,8,16,0.95)] px-8 py-10 text-center shadow-2xl",children:[(0,s.jsx)("div",{className:"absolute inset-0 rounded-3xl bg-gradient-to-br from-[#4B8EFF]/20 to-transparent opacity-50 pointer-events-none"}),(0,s.jsxs)("div",{className:"relative space-y-6",children:[(0,s.jsx)("div",{className:"mx-auto flex h-20 w-20 items-center justify-center rounded-full border border-[#4B8EFF]/30 bg-[rgba(12,16,28,0.9)] shadow-lg",children:(0,s.jsx)("div",{className:"h-12 w-12 rounded-full border-3 border-[#8F82FF]/30 border-t-[#8F82FF] animate-spin",style:{borderWidth:"3px"}})}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-widest text-white/50",children:"Assistant at work"}),(0,s.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Generating your report"}),(0,s.jsx)("p",{className:"text-sm text-white/70 max-w-sm mx-auto",children:"Radly is aligning findings, impressions, and recommendations. You'll see the report in just a moment."})]})]})]})}),(0,s.jsx)("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-[rgba(10,14,26,0.95)] backdrop-blur-xl border-t border-white/10",style:{paddingBottom:"max(env(safe-area-inset-bottom), 0.5rem)"},children:(0,s.jsxs)("div",{className:"flex items-center justify-around px-2 pt-3 pb-2",children:[(0,s.jsxs)("a",{href:"/app/dashboard",className:"flex flex-col items-center justify-center flex-1 gap-1 py-2 min-h-[44px] touch-manipulation",children:[(0,s.jsx)("div",{className:"w-11 h-11 rounded-xl bg-white/5 flex items-center justify-center",children:(0,s.jsx)(g.A,{className:"w-6 h-6 text-white/60"})}),(0,s.jsx)("span",{className:"text-[10px] font-medium text-white/50",children:"Home"})]}),(0,s.jsxs)("a",{href:"/app/templates",className:"flex flex-col items-center justify-center flex-1 gap-1 py-2 min-h-[44px] touch-manipulation",children:[(0,s.jsx)("div",{className:"w-11 h-11 rounded-xl bg-white/5 flex items-center justify-center",children:(0,s.jsx)(v.A,{className:"w-6 h-6 text-white/60"})}),(0,s.jsx)("span",{className:"text-[10px] font-medium text-white/50",children:"Templates"})]}),(0,s.jsxs)("a",{href:"/app/reports",className:"flex flex-col items-center justify-center flex-1 gap-1 py-2 min-h-[44px] touch-manipulation",children:[(0,s.jsx)("div",{className:"w-11 h-11 rounded-xl bg-white/5 flex items-center justify-center",children:(0,s.jsx)(o.A,{className:"w-6 h-6 text-white/60"})}),(0,s.jsx)("span",{className:"text-[10px] font-medium text-white/50",children:"Reports"})]})]})})]})}},31969:(e,t,a)=>{a.d(t,{JO:()=>r,Rs:()=>n});var s=a(22454),i=a(25656),l=a(85578);function n(){let{isAuthed:e,mounted:t}=(0,l.Q)();return(0,s.I)({queryKey:["subscription-usage"],queryFn:()=>(0,i.lx)("/v1/subscription/usage"),refetchInterval:6e4,enabled:t&&e,retry:(e,t)=>{if(t&&"object"==typeof t&&"status"in t){let e=t.status;if(401===e||403===e||404===e)return!1}return e<3},staleTime:3e4})}function r(){let{data:e}=n();return(null==e?void 0:e.subscription.tier)||"free"}},46046:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(71847).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},50906:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(71847).A)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},65229:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(71847).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},65644:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(71847).A)("BookDashed",[["path",{d:"M12 17h2",key:"13u4lk"}],["path",{d:"M12 22h2",key:"kn7ki6"}],["path",{d:"M12 2h2",key:"cvn524"}],["path",{d:"M18 22h1a1 1 0 0 0 1-1",key:"w6gbqz"}],["path",{d:"M18 2h1a1 1 0 0 1 1 1v1",key:"1vpra5"}],["path",{d:"M20 15v2h-2",key:"fph276"}],["path",{d:"M20 8v3",key:"deu0bs"}],["path",{d:"M4 11V9",key:"v3xsx8"}],["path",{d:"M4 19.5V15",key:"6gr39e"}],["path",{d:"M4 5v-.5A2.5 2.5 0 0 1 6.5 2H8",key:"wywhs9"}],["path",{d:"M8 22H6.5a1 1 0 0 1 0-5H8",key:"1cu73q"}]])},84926:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(71847).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},85578:(e,t,a)=>{a.d(t,{Q:()=>r});var s=a(12115),i=a(96648),l=a(90260),n=a(32587);function r(){let[e,t]=(0,s.useState)(!1),[r,d]=(0,s.useState)(null);return(0,s.useEffect)(()=>{if((0,l.Wj)()){d((0,l.Ld)()),t(!0);return}let e=()=>{};return async function(){if(n.Capacitor.isNativePlatform()){let{getSupabaseClient:t}=await a.e(3077).then(a.bind(a,13077)),s=await t(),{data:i}=await s.auth.getSession();d(i.session);let{data:l}=s.auth.onAuthStateChange((e,t)=>d(t));e=()=>{var e,t;return null==l||null==(t=l.subscription)||null==(e=t.unsubscribe)?void 0:e.call(t)}}else{let t=(0,i.createBrowserSupabase)(),{data:a}=await t.auth.getSession();d(a.session);let{data:s}=t.auth.onAuthStateChange((e,t)=>d(t));e=()=>{var e,t;return null==s||null==(t=s.subscription)||null==(e=t.unsubscribe)?void 0:e.call(t)}}t(!0)}(),()=>e()},[]),{session:r,isAuthed:!!r,mounted:e}}}}]);