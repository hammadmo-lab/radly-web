(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3698],{1524:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(71847).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},3998:(e,r,t)=>{"use strict";t.d(r,{$:()=>c});var s=t(95155),a=t(12115),n=t(32467),i=t(83101),l=t(64269);let o=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-semibold ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"button-primary-gradient",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"button-outline-glass",secondary:"button-secondary-soft",ghost:"text-foreground hover:bg-[rgba(255,255,255,0.08)] hover:text-foreground",link:"text-info underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,r)=>{let{className:t,variant:a,size:i,asChild:c=!1,...d}=e,u=c?n.DX:"button";return(0,s.jsx)(u,{className:(0,l.cn)(o({variant:a,size:i,className:t})),ref:r,...d})});c.displayName="Button"},6132:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(71847).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},7248:(e,r,t)=>{Promise.resolve().then(t.bind(t,38837))},11186:(e,r,t)=>{"use strict";t.d(r,{bq:()=>h,eb:()=>g,gC:()=>b,l6:()=>d,yv:()=>u});var s=t(95155),a=t(12115),n=t(18261),i=t(24033),l=t(12108),o=t(5917),c=t(64269);let d=n.bL;n.YJ;let u=n.WT,h=a.forwardRef((e,r)=>{let{className:t,children:a,...l}=e;return(0,s.jsxs)(n.l9,{ref:r,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...l,children:[a,(0,s.jsx)(n.In,{asChild:!0,children:(0,s.jsx)("span",{children:(0,s.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})})]})});h.displayName=n.l9.displayName;let m=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(n.PP,{ref:r,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(l.A,{className:"h-4 w-4"})})});m.displayName=n.PP.displayName;let x=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(n.wn,{ref:r,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})});x.displayName=n.wn.displayName;let b=a.forwardRef((e,r)=>{let{className:t,children:a,position:i="popper",...l}=e;return(0,s.jsx)(n.ZL,{children:(0,s.jsxs)(n.UC,{ref:r,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...l,children:[(0,s.jsx)(m,{}),(0,s.jsx)(n.LM,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,s.jsx)(x,{})]})})});b.displayName=n.UC.displayName,a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(n.JU,{ref:r,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...a})}).displayName=n.JU.displayName;let g=a.forwardRef((e,r)=>{let{className:t,children:a,...i}=e;return(0,s.jsxs)(n.q7,{ref:r,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.VF,{children:(0,s.jsx)(o.A,{className:"h-4 w-4"})})}),(0,s.jsx)(n.p4,{children:a})]})});g.displayName=n.q7.displayName,a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(n.wv,{ref:r,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...a})}).displayName=n.wv.displayName},11647:(e,r,t)=>{"use strict";t.d(r,{E:()=>l});var s=t(95155);t(12115);var a=t(83101),n=t(64269);let i=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:r,variant:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:t}),r),...a})}},16041:(e,r,t)=>{"use strict";t.d(r,{f:()=>l});var s=t(95155),a=t(12115),n=t(20063),i=t(37723);function l(e){let{children:r}=e,{isAuthenticated:t,isInitialized:l}=(0,i.b)(),o=(0,n.useRouter)();return((0,a.useEffect)(()=>{l&&!t&&o.push("/admin/login")},[t,l,o]),l&&t)?(0,s.jsx)(s.Fragment,{children:r}):(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}},16485:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(71847).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},17910:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(71847).A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},20063:(e,r,t)=>{"use strict";var s=t(47260);t.o(s,"usePathname")&&t.d(r,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(r,{useSearchParams:function(){return s.useSearchParams}})},20243:(e,r,t)=>{"use strict";t.d(r,{E:()=>n});var s=t(95155),a=t(64269);function n(e){let{className:r,...t}=e;return(0,s.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",r),...t})}},27937:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(71847).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},33738:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(71847).A)("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},37723:(e,r,t)=>{"use strict";t.d(r,{T:()=>l,b:()=>o});var s=t(95155),a=t(12115),n=t(18720);let i=(0,a.createContext)(void 0);function l(e){let{children:r}=e,[t,l]=(0,a.useState)(null),[o,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(!1);(0,a.useEffect)(()=>{try{let e=localStorage.getItem("admin_key"),r=localStorage.getItem("api_key");e&&r&&(l(e),c(r))}catch(e){}finally{u(!0)}},[]);let h=(0,a.useCallback)(()=>{try{l(null),c(null),localStorage.removeItem("admin_key"),localStorage.removeItem("api_key"),n.oR.success("Logged out successfully")}catch(e){}},[]),m=!!(t&&o);return(0,s.jsx)(i.Provider,{value:{adminKey:t,apiKey:o,isAuthenticated:m,isInitialized:d,login:(e,r)=>{l(e),c(r);try{localStorage.setItem("admin_key",e),localStorage.setItem("api_key",r)}catch(e){}},logout:h},children:r})}function o(){let e=(0,a.useContext)(i);if(!e)throw Error("useAdminAuth must be used within AdminAuthProvider");return e}},38837:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>er});var s=t(95155),a=t(12115),n=t(20063),i=t(91169),l=t(1524),o=t(91761),c=t(16485),d=t(17910);let u=(0,t(71847).A)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var h=t(84926),m=t(6132),x=t(3998),b=t(16041),g=t(1733),p=t(64269);function f(e){let{title:r,value:t,icon:a,trend:n,description:i}=e,l=n?n.isPositive?"border-[rgba(63,191,140,0.42)] bg-[rgba(63,191,140,0.18)] text-[#C8F3E2]":"border-[rgba(255,107,107,0.35)] bg-[rgba(255,107,107,0.18)] text-[#FFD1D1]":"";return(0,s.jsx)(g.P.div,{initial:{opacity:0,y:24},animate:{opacity:1,y:0},transition:{duration:.35,ease:"easeOut"},children:(0,s.jsx)("div",{className:"aurora-card border border-[rgba(255,255,255,0.08)] p-5 sm:p-6 backdrop-blur-xl transition-all duration-300 hover:-translate-y-1 hover:border-[rgba(75,142,255,0.35)] hover:shadow-[0_18px_42px_rgba(20,28,45,0.5)]",children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex h-11 w-11 items-center justify-center rounded-2xl bg-[linear-gradient(135deg,#2653FF_0%,#4B8EFF_50%,#8F82FF_100%)] shadow-[0_18px_42px_rgba(52,84,207,0.42)]",children:(0,s.jsx)(a,{className:"h-5 w-5 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-[rgba(207,207,207,0.55)]",children:r}),(0,s.jsx)("p",{className:"text-3xl font-semibold leading-tight text-white",children:t})]})]}),i&&(0,s.jsx)("p",{className:"max-w-[18rem] text-xs text-[rgba(207,207,207,0.6)]",children:i})]}),n&&(0,s.jsxs)("div",{className:"flex flex-col items-end gap-2 text-right",children:[(0,s.jsx)("span",{className:(0,p.cn)("rounded-full border px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.22em]",l),children:n.isPositive?"Stable":"Watch"}),(0,s.jsxs)("span",{className:(0,p.cn)("text-lg font-semibold",n.isPositive?"text-[#7AE7B4]":"text-[#FF9F9F]"),children:[n.isPositive?"+":"-",Math.abs(n.value),"%"]}),(0,s.jsx)("span",{className:"text-[10px] text-[rgba(207,207,207,0.45)]",children:"vs last month"})]})]})})})}var y=t(89559),v=t(39867),j=t(86651),w=t(57828),N=t(90368),k=t(27937),F=t(65142),A=t(11647),C=t(86948),E=t(11186);let R=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:r,className:(0,p.cn)("w-full caption-bottom text-sm",t),...a})})});R.displayName="Table";let _=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("thead",{ref:r,className:(0,p.cn)("[&_tr]:border-b",t),...a})});_.displayName="TableHeader";let D=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("tbody",{ref:r,className:(0,p.cn)("[&_tr:last-child]:border-0",t),...a})});D.displayName="TableBody",a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("tfoot",{ref:r,className:(0,p.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...a})}).displayName="TableFooter";let S=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("tr",{ref:r,className:(0,p.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...a})});S.displayName="TableRow";let M=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("th",{ref:r,className:(0,p.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...a})});M.displayName="TableHead";let T=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("td",{ref:r,className:(0,p.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...a})});T.displayName="TableCell",a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("caption",{ref:r,className:(0,p.cn)("mt-4 text-sm text-muted-foreground",t),...a})}).displayName="TableCaption";var U=t(20243);function B(e){let{used:r,limit:t,className:a=""}=e,n=Math.min(r/Math.max(t,1)*100,100),i=n>90?"bg-[linear-gradient(90deg,#FF6B6B_0%,#FF9F6B_100%)] shadow-[0_8px_18px_rgba(255,107,107,0.32)]":n>70?"bg-[linear-gradient(90deg,#F8B74D_0%,#FF8A4F_100%)] shadow-[0_8px_18px_rgba(248,183,77,0.26)]":"bg-[linear-gradient(90deg,#3FBF8C_0%,#6EE7B7_100%)] shadow-[0_8px_18px_rgba(63,191,140,0.32)]";return(0,s.jsxs)("div",{className:"space-y-3 ".concat(a),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs uppercase tracking-[0.12em] text-[rgba(207,207,207,0.55)]",children:[(0,s.jsxs)("span",{children:[r," / ",t]}),(0,s.jsxs)("span",{children:[n.toFixed(0),"%"]})]}),(0,s.jsxs)("div",{className:"relative h-2.5 w-full overflow-hidden rounded-full border border-[rgba(255,255,255,0.08)] bg-[rgba(18,22,36,0.85)]",children:[(0,s.jsx)(g.P.div,{className:"h-full rounded-full ".concat(i),initial:{width:0},animate:{width:"".concat(n,"%")},transition:{duration:.5,ease:"easeOut"}}),(0,s.jsx)("div",{className:"pointer-events-none absolute inset-0 rounded-full bg-white/5 mix-blend-screen opacity-40"})]})]})}var P=t(22454),L=t(37723);class q{getHeaders(){return{"Content-Type":"application/json","x-admin-key":this.credentials.adminKey,Authorization:"Bearer ".concat(this.credentials.apiKey),"X-Request-Id":crypto.randomUUID()}}getErrorMessage(e,r){switch(e){case 401:return"Authentication failed. Please check your admin credentials.";case 403:return"Access forbidden. You do not have permission to perform this action.";case 404:return"Endpoint not found. The requested resource does not exist.";case 503:return"Service temporarily unavailable. Please try again later.";default:return"Request failed with status ".concat(e,": ").concat(r)}}async listSubscriptions(e){let r=new URLSearchParams;e.status&&r.set("status",e.status),e.tier&&r.set("tier",e.tier),e.region&&r.set("region",e.region),e.search&&r.set("search",e.search),e.limit&&r.set("limit",e.limit.toString()),e.offset&&r.set("offset",e.offset.toString()),e.sort_by&&r.set("sort_by",e.sort_by),e.sort_order&&r.set("sort_order",e.sort_order);let t=await fetch("".concat(this.baseUrl,"/v1/admin/subscriptions/list?").concat(r),{method:"GET",headers:this.getHeaders(),credentials:"include"});if(!t.ok){let e=await t.text().catch(()=>"Unknown error");throw Error(this.getErrorMessage(t.status,e))}return t.json()}async getUserSubscription(e){let r=await fetch("".concat(this.baseUrl,"/v1/admin/subscriptions/user-id/").concat(e),{method:"GET",headers:this.getHeaders(),credentials:"include"});if(!r.ok){let e=await r.text().catch(()=>"Unknown error");throw Error(this.getErrorMessage(r.status,e))}return r.json()}async activateSubscription(e){let r=await fetch("".concat(this.baseUrl,"/v1/admin/subscriptions/activate"),{method:"POST",headers:this.getHeaders(),body:JSON.stringify(e),credentials:"include"});if(!r.ok){let e=await r.text().catch(()=>"Unknown error");throw Error(this.getErrorMessage(r.status,e))}return r.json()}async cancelSubscription(e){let r=await fetch("".concat(this.baseUrl,"/v1/admin/subscriptions/cancel"),{method:"POST",headers:this.getHeaders(),body:JSON.stringify(e),credentials:"include"});if(!r.ok){let e=await r.text().catch(()=>"Unknown error");throw Error(this.getErrorMessage(r.status,e))}return r.json()}async getUsageAnalytics(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,r=await fetch("".concat(this.baseUrl,"/v1/admin/analytics/usage?days=").concat(e),{method:"GET",headers:this.getHeaders(),credentials:"include"});if(!r.ok){let e=await r.text().catch(()=>"Unknown error");throw Error(this.getErrorMessage(r.status,e))}return r.json()}async getRevenueAnalytics(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,r=await fetch("".concat(this.baseUrl,"/v1/admin/analytics/revenue?days=").concat(e),{method:"GET",headers:this.getHeaders(),credentials:"include"});if(!r.ok){let e=await r.text().catch(()=>"Unknown error");throw Error(this.getErrorMessage(r.status,e))}return r.json()}async getUserEmails(e){if(!e||0===e.length)return{};try{let r=await fetch("".concat(this.baseUrl,"/v1/admin/users/emails"),{method:"POST",headers:this.getHeaders(),body:JSON.stringify(e)});if(!r.ok)return{};return await r.json()}catch(e){return{}}}async deleteUser(e){let r=await fetch("".concat(this.baseUrl,"/v1/admin/users/").concat(e),{method:"DELETE",headers:this.getHeaders(),credentials:"include"});if(!r.ok){let e=await r.text().catch(()=>"Unknown error");throw Error(this.getErrorMessage(r.status,e))}return r.json()}async changeTier(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"egypt",s=await fetch("".concat(this.baseUrl,"/v1/admin/users/").concat(e,"/tier"),{method:"POST",headers:this.getHeaders(),body:JSON.stringify({tier_name:r,region:t}),credentials:"include"});if(!s.ok){let e=await s.text().catch(()=>"Unknown error");throw Error(this.getErrorMessage(s.status,e))}return s.json()}constructor(e){this.credentials=e,this.baseUrl="https://edge.radly.app"}}let z={active:"border-[rgba(63,191,140,0.35)] bg-[rgba(63,191,140,0.18)] text-[#C8F3E2]",cancelled:"border-[rgba(255,107,107,0.32)] bg-[rgba(255,107,107,0.18)] text-[#FFD1D1]",expired:"border-[rgba(207,207,207,0.2)] bg-[rgba(18,22,36,0.75)] text-[rgba(207,207,207,0.7)]"},I={free:"border-[rgba(207,207,207,0.18)] bg-[rgba(207,207,207,0.08)] text-[rgba(207,207,207,0.75)]",starter:"border-[rgba(75,142,255,0.35)] bg-[rgba(75,142,255,0.16)] text-[#D7E3FF]",professional:"border-[rgba(143,130,255,0.35)] bg-[rgba(143,130,255,0.16)] text-[#E2DAFF]",premium:"border-[rgba(248,183,77,0.35)] bg-[rgba(248,183,77,0.16)] text-[#FBE3B5]"};function H(e){let{subscriptions:r,isLoading:t,total:n,currentPage:l,pageSize:o,onPageChange:c,onSearch:d,onFilterChange:u,onRefresh:h,onExport:m,onViewUser:b}=e,[f,H]=(0,a.useState)(""),{data:O,isLoading:$}=function(e){let{adminKey:r,apiKey:t}=(0,L.b)();return(0,P.I)({queryKey:["admin","user-emails",e.sort().join(",")],queryFn:async()=>r&&t&&e.length?new q({adminKey:r,apiKey:t}).getUserEmails(e):{},enabled:!!(r&&t&&e.length>0),staleTime:3e5,retry:1})}((0,a.useMemo)(()=>(null==r?void 0:r.map(e=>e.user_id).filter(Boolean))||[],[r])),V=Math.max(1,Math.ceil(n/Math.max(o,1))),W=n>0,J=W?(l-1)*o+1:0,Y=W?Math.min(l*o,n):0;return(0,s.jsxs)(C.Zp,{className:"aurora-card border border-[rgba(255,255,255,0.08)] backdrop-blur-xl",children:[(0,s.jsxs)(C.aR,{className:"space-y-6 border-b border-[rgba(255,255,255,0.06)] p-6 pb-5",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-5 sm:flex-row sm:items-start sm:justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-[linear-gradient(135deg,#2653FF_0%,#4B8EFF_55%,#8F82FF_100%)] shadow-[0_22px_48px_rgba(52,84,207,0.38)]",children:(0,s.jsx)(i.A,{className:"h-5 w-5 text-white"})}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Subscriptions"}),(0,s.jsxs)("p",{className:"text-sm text-[rgba(207,207,207,0.65)]",children:["Tracking ",n," customer plans across tiers"]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center",children:[(0,s.jsxs)(x.$,{variant:"ghost",size:"sm",onClick:h,className:"h-10 border border-[rgba(255,255,255,0.12)] text-[rgba(207,207,207,0.85)] hover:border-[#4B8EFF]/40 hover:text-white",children:[(0,s.jsx)(y.A,{className:"mr-2 h-4 w-4"}),"Refresh"]}),(0,s.jsxs)(x.$,{variant:"ghost",size:"sm",onClick:m,className:"h-10 border border-[rgba(75,142,255,0.35)] bg-[rgba(75,142,255,0.16)] text-[#D7E3FF] hover:border-[rgba(75,142,255,0.45)] hover:bg-[rgba(75,142,255,0.22)]",children:[(0,s.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Export CSV"]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(j.A,{className:"absolute left-4 top-1/2 h-5 w-5 -translate-y-1/2 text-[rgba(207,207,207,0.45)]"}),(0,s.jsx)(F.p,{placeholder:"Search by email, user ID, or plan...",value:f,onChange:e=>{var r;H(r=e.target.value),d(r)},className:"h-12 rounded-xl border-[rgba(255,255,255,0.12)] bg-[rgba(18,22,36,0.85)] pl-12 text-white placeholder:text-[rgba(207,207,207,0.45)] focus-visible:ring-[#4B8EFF]"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:flex-wrap sm:items-center",children:[(0,s.jsxs)(E.l6,{onValueChange:e=>u("status","all"===e?"":e),children:[(0,s.jsx)(E.bq,{className:"h-11 min-w-[140px] rounded-xl border-[rgba(255,255,255,0.12)] bg-[rgba(18,22,36,0.85)] text-[rgba(207,207,207,0.75)] hover:border-[#4B8EFF]/40",children:(0,s.jsx)(E.yv,{placeholder:"Status"})}),(0,s.jsxs)(E.gC,{className:"border border-[rgba(255,255,255,0.12)] bg-[rgba(12,14,24,0.95)] text-white",children:[(0,s.jsx)(E.eb,{value:"all",children:"All Status"}),(0,s.jsx)(E.eb,{value:"active",children:"Active"}),(0,s.jsx)(E.eb,{value:"cancelled",children:"Cancelled"}),(0,s.jsx)(E.eb,{value:"expired",children:"Expired"})]})]}),(0,s.jsxs)(E.l6,{onValueChange:e=>u("tier","all"===e?"":e),children:[(0,s.jsx)(E.bq,{className:"h-11 min-w-[140px] rounded-xl border-[rgba(255,255,255,0.12)] bg-[rgba(18,22,36,0.85)] text-[rgba(207,207,207,0.75)] hover:border-[#4B8EFF]/40",children:(0,s.jsx)(E.yv,{placeholder:"Tier"})}),(0,s.jsxs)(E.gC,{className:"border border-[rgba(255,255,255,0.12)] bg-[rgba(12,14,24,0.95)] text-white",children:[(0,s.jsx)(E.eb,{value:"all",children:"All Tiers"}),(0,s.jsx)(E.eb,{value:"free",children:"Free"}),(0,s.jsx)(E.eb,{value:"starter",children:"Starter"}),(0,s.jsx)(E.eb,{value:"professional",children:"Professional"}),(0,s.jsx)(E.eb,{value:"premium",children:"Premium"})]})]}),(0,s.jsxs)(E.l6,{onValueChange:e=>u("region","all"===e?"":e),children:[(0,s.jsx)(E.bq,{className:"h-11 min-w-[140px] rounded-xl border-[rgba(255,255,255,0.12)] bg-[rgba(18,22,36,0.85)] text-[rgba(207,207,207,0.75)] hover:border-[#4B8EFF]/40",children:(0,s.jsx)(E.yv,{placeholder:"Region"})}),(0,s.jsxs)(E.gC,{className:"border border-[rgba(255,255,255,0.12)] bg-[rgba(12,14,24,0.95)] text-white",children:[(0,s.jsx)(E.eb,{value:"all",children:"All Regions"}),(0,s.jsx)(E.eb,{value:"egypt",children:"Egypt"}),(0,s.jsx)(E.eb,{value:"international",children:"International"})]})]})]})]})]}),(0,s.jsx)(C.Wu,{className:"space-y-6 p-6",children:t?(0,s.jsx)("div",{className:"space-y-4",children:Array.from({length:5}).map((e,r)=>(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(U.E,{className:"h-4 w-[240px] rounded bg-[rgba(255,255,255,0.08)]"}),(0,s.jsx)(U.E,{className:"h-4 w-[110px] rounded bg-[rgba(255,255,255,0.08)]"}),(0,s.jsx)(U.E,{className:"h-4 w-[90px] rounded bg-[rgba(255,255,255,0.08)]"}),(0,s.jsx)(U.E,{className:"h-4 w-[140px] rounded bg-[rgba(255,255,255,0.08)]"}),(0,s.jsx)(U.E,{className:"h-4 w-[120px] rounded bg-[rgba(255,255,255,0.08)]"})]},r))}):0===r.length?(0,s.jsxs)("div",{className:"aurora-card border border-dashed border-[rgba(255,255,255,0.12)] bg-[rgba(12,16,28,0.65)] py-12 text-center",children:[(0,s.jsx)("div",{className:"mx-auto mb-4 flex h-14 w-14 items-center justify-center rounded-full border border-[rgba(75,142,255,0.35)] bg-[rgba(75,142,255,0.16)] text-[#D7E3FF]",children:(0,s.jsx)(i.A,{className:"h-6 w-6"})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-white",children:"No subscriptions match that view"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-[rgba(207,207,207,0.65)]",children:"Adjust your filters or search query to see more customers."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"overflow-hidden rounded-2xl border border-[rgba(255,255,255,0.06)] bg-[rgba(12,16,28,0.55)]",children:(0,s.jsxs)(R,{children:[(0,s.jsx)(_,{className:"bg-[rgba(12,16,28,0.72)]",children:(0,s.jsx)(S,{className:"border-b border-[rgba(255,255,255,0.06)]",children:["User","Tier","Status","Usage","Revenue","Period End","Actions"].map(e=>(0,s.jsx)(M,{className:"px-6 py-4 text-[11px] font-semibold uppercase tracking-[0.18em] text-[rgba(207,207,207,0.45)]",children:e},e))})}),(0,s.jsx)(D,{children:r.map(e=>(0,s.jsxs)(g.P.tr,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.25},className:"border-b border-[rgba(255,255,255,0.05)] bg-transparent last:border-none hover:bg-[rgba(75,142,255,0.08)]",children:[(0,s.jsx)(T,{className:"px-6 py-5 text-sm text-white",children:(0,s.jsxs)("div",{className:"min-w-[200px] space-y-2",children:[(0,s.jsx)("div",{className:"font-medium",children:$?(0,s.jsx)("span",{className:"animate-pulse text-[rgba(207,207,207,0.55)]",children:"Loading email…"}):(null==O?void 0:O[e.user_id])&&O[e.user_id].includes("@")?(0,s.jsx)("span",{title:O[e.user_id],children:O[e.user_id]}):(0,s.jsx)("span",{className:"text-[rgba(207,207,207,0.55)]",children:(null==O?void 0:O[e.user_id])||"Email unavailable"})}),(0,s.jsxs)("div",{className:"font-mono text-[11px] uppercase tracking-[0.18em] text-[rgba(207,207,207,0.45)]",title:e.user_id,children:["ID:"," ",e.user_id?"".concat(e.user_id.substring(0,8),"…"):"N/A"]})]})}),(0,s.jsx)(T,{className:"px-6 py-5",children:(e=>{var r;let t=null!=(r=null==e?void 0:e.toLowerCase())?r:"free",a=I[t]||I.free;return(0,s.jsx)(A.E,{className:(0,p.cn)("border px-2.5 py-0.5 text-xs font-semibold uppercase tracking-[0.14em] bg-transparent",a),children:t.charAt(0).toUpperCase()+t.slice(1)})})(e.tier_name)}),(0,s.jsx)(T,{className:"px-6 py-5",children:(e=>{var r;let t=null!=(r=null==e?void 0:e.toLowerCase())?r:"expired",a=z[t]||z.expired;return(0,s.jsx)(A.E,{className:(0,p.cn)("border px-2.5 py-0.5 text-xs font-semibold uppercase tracking-[0.14em] bg-transparent",a),children:t.charAt(0).toUpperCase()+t.slice(1)})})(e.status)}),(0,s.jsx)(T,{className:"px-6 py-5",children:(0,s.jsx)(B,{used:e.reports_used_current_period,limit:e.reports_limit})}),(0,s.jsxs)(T,{className:"px-6 py-5 text-sm text-[rgba(207,207,207,0.75)]",children:[e.currency," ",e.price_paid]}),(0,s.jsx)(T,{className:"px-6 py-5 text-sm text-[rgba(207,207,207,0.75)]",children:new Date(e.period_end).toLocaleDateString()}),(0,s.jsx)(T,{className:"px-6 py-5",children:(0,s.jsxs)(x.$,{variant:"ghost",size:"sm",onClick:()=>b(e.user_id),disabled:!e.user_id,className:"h-9 border border-transparent text-[#D7E3FF] hover:border-[rgba(75,142,255,0.35)] hover:bg-[rgba(75,142,255,0.12)]",children:[(0,s.jsx)(w.A,{className:"mr-2 h-4 w-4"}),"View Details"]})})]},e.subscription_id))})]})}),(0,s.jsxs)("div",{className:"flex flex-col gap-3 text-sm text-[rgba(207,207,207,0.55)] sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsx)("div",{children:W?"Showing ".concat(J,"-").concat(Y," of ").concat(n," results"):"No matching subscriptions"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(x.$,{variant:"ghost",size:"sm",onClick:()=>c(l-1),disabled:1===l,className:"h-9 border border-[rgba(255,255,255,0.12)] text-[rgba(207,207,207,0.8)] disabled:border-transparent disabled:text-[rgba(207,207,207,0.3)]",children:(0,s.jsx)(N.A,{className:"h-4 w-4"})}),(0,s.jsxs)("span",{className:"text-xs uppercase tracking-[0.18em] text-[rgba(207,207,207,0.45)]",children:["Page ",l," of ",V]}),(0,s.jsx)(x.$,{variant:"ghost",size:"sm",onClick:()=>c(l+1),disabled:l===V,className:"h-9 border border-[rgba(255,255,255,0.12)] text-[rgba(207,207,207,0.8)] disabled:border-transparent disabled:text-[rgba(207,207,207,0.3)]",children:(0,s.jsx)(k.A,{className:"h-4 w-4"})})]})]})]})})]})}var O=t(52056),$=t(65993),V=t(18720);class W extends a.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){this.setState({error:e,errorInfo:r}),V.oR.error("An unexpected error occurred in the admin dashboard")}render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback;let e=this.state.retryCount<this.maxRetries,r=this.getErrorMessage(this.state.error);return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-white to-violet-50 flex items-center justify-center p-4",children:(0,s.jsxs)(C.Zp,{className:"w-full max-w-md",children:[(0,s.jsxs)(C.aR,{className:"text-center",children:[(0,s.jsx)("div",{className:"mx-auto w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mb-4",children:(0,s.jsx)(O.A,{className:"w-6 h-6 text-red-600"})}),(0,s.jsx)(C.ZB,{className:"text-xl font-semibold text-gray-900",children:"Admin Dashboard Error"}),(0,s.jsx)(C.BT,{className:"text-gray-600",children:r})]}),(0,s.jsxs)(C.Wu,{className:"space-y-4",children:[!1,(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[e&&(0,s.jsxs)(x.$,{onClick:this.handleRetry,className:"w-full",variant:"default",children:[(0,s.jsx)(y.A,{className:"w-4 h-4 mr-2"}),"Try Again (",this.state.retryCount+1,"/",this.maxRetries,")"]}),(0,s.jsxs)(x.$,{onClick:this.handleReset,variant:"outline",className:"w-full",children:[(0,s.jsx)($.A,{className:"w-4 h-4 mr-2"}),"Reset Dashboard"]})]})]})]})})}return this.props.children}getErrorMessage(e){if(!e)return"An unexpected error occurred";let r=e.message.toLowerCase();if(r.includes("401"))return"Authentication failed. Please check your admin credentials.";if(r.includes("403"))return"Access forbidden. You do not have permission to access this resource.";if(r.includes("404"))return"Resource not found. The requested data may have been moved or deleted.";if(r.includes("503"))return"Service temporarily unavailable. Please try again later.";if(r.includes("network")||r.includes("fetch"))return"Network error. Please check your internet connection and try again.";else return"An unexpected error occurred. Please try refreshing the page."}constructor(e){super(e),this.maxRetries=3,this.handleRetry=()=>{this.state.retryCount<this.maxRetries?(this.setState(e=>({hasError:!1,error:null,errorInfo:null,retryCount:e.retryCount+1})),V.oR.info("Retrying... (".concat(this.state.retryCount+1,"/").concat(this.maxRetries,")"))):V.oR.error("Maximum retry attempts reached")},this.handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null,retryCount:0}),V.oR.success("Error boundary reset")},this.state={hasError:!1,error:null,errorInfo:null,retryCount:0}}}var J=t(42529),Y=t(78874),Z=t(33738);let G={connected:{icon:J.A,iconWrapper:"border-[rgba(63,191,140,0.35)] bg-[rgba(63,191,140,0.16)] text-[#7AE7B4]",iconClass:"text-[#7AE7B4]",badgeClass:"border-[rgba(63,191,140,0.35)] text-[#C8F3E2]",label:"Connected"},checking:{icon:y.A,iconWrapper:"border-[rgba(248,183,77,0.35)] bg-[rgba(248,183,77,0.16)] text-[#FBE3B5]",iconClass:"text-[#FBE3B5]",badgeClass:"border-[rgba(248,183,77,0.35)] text-[#FBE3B5]",label:"Checking…",spin:!0},error:{icon:O.A,iconWrapper:"border-[rgba(255,107,107,0.32)] bg-[rgba(255,107,107,0.18)] text-[#FFD1D1]",iconClass:"text-[#FFD1D1]",badgeClass:"border-[rgba(255,107,107,0.32)] text-[#FFD1D1]",label:"Connection Error"},disconnected:{icon:Y.A,iconWrapper:"border-[rgba(255,107,107,0.32)] bg-[rgba(255,107,107,0.18)] text-[#FFD1D1]",iconClass:"text-[#FFD1D1]",badgeClass:"border-[rgba(255,107,107,0.32)] text-[#FFD1D1]",label:"Disconnected"},offline:{icon:Z.A,iconWrapper:"border-[rgba(255,107,107,0.32)] bg-[rgba(255,107,107,0.18)] text-[#FFD1D1]",iconClass:"text-[#FFD1D1]",badgeClass:"border-[rgba(255,107,107,0.32)] text-[#FFD1D1]",label:"Offline"}},K=e=>e?"".concat(e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})):"Never";function X(e){var r,t,n;let{baseUrl:i="https://edge.radly.app",checkInterval:l=3e4,showDetails:o=!1,className:c=""}=e,[d,u]=(0,a.useState)("checking"),[h,m]=(0,a.useState)(null),[b,g]=(0,a.useState)(""),[f,v]=(0,a.useState)(null),[j,w]=(0,a.useState)(!0),N=null!=(r=G[j?d:"offline"])?r:G.error,k=N.icon,F=(0,a.useCallback)(async()=>{try{u("checking"),g("");let e=new AbortController,r=setTimeout(()=>e.abort(),1e4),t=await fetch("".concat(i,"/health"),{method:"GET",signal:e.signal,headers:{"Content-Type":"application/json","X-Request-Id":crypto.randomUUID()}});if(clearTimeout(r),t.ok){let e=await t.json();v(e),u("connected"),m(new Date),"unhealthy"===e.status&&V.oR.warning("Backend service is reporting as unhealthy")}else throw Error("Health check failed with status ".concat(t.status))}catch(r){let e=r instanceof Error?r.message:"Unknown error";g(e),u("error"),m(new Date),e.includes("aborted")||e.includes("timeout")?V.oR.error("Connection timeout - backend may be slow to respond"):e.includes("Failed to fetch")?V.oR.error("Cannot connect to backend server"):V.oR.error("Connection error: ".concat(e))}},[i]),C=(0,a.useCallback)(()=>{"checking"!==d&&F()},[F,d]);(0,a.useEffect)(()=>{F();let e=setInterval(F,l);return()=>clearInterval(e)},[F,l]),(0,a.useEffect)(()=>{let e=()=>{w(!0),F()},r=()=>{w(!1),u("disconnected"),V.oR.error("You are offline")};return window.addEventListener("online",e),window.addEventListener("offline",r),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",r)}},[F]);let E=j&&"error"!==d&&"disconnected"!==d?null:(t=j,n=b,t?ee(n):"Offline mode: the app cannot reach the backend. Reconnect to the internet and retry.");return(0,s.jsxs)("div",{className:(0,p.cn)("aurora-card border border-[rgba(255,255,255,0.08)] p-5 sm:p-6 backdrop-blur-xl transition-colors",c),children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:(0,p.cn)("flex h-12 w-12 items-center justify-center rounded-2xl border",N.iconWrapper),children:(0,s.jsx)(k,{className:(0,p.cn)("h-5 w-5",N.iconClass,N.spin?"animate-spin":void 0)})}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,s.jsx)("span",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-[rgba(207,207,207,0.55)]",children:"Backend Link"}),(0,s.jsx)(A.E,{className:(0,p.cn)("border px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.22em] bg-transparent",N.badgeClass),children:(()=>{if(!j)return"Offline";switch(d){case"connected":return(null==f?void 0:f.status)==="unhealthy"?"Service Degraded":"Connected";case"disconnected":return"Disconnected";case"checking":return"Checking…";case"error":return"Connection Error";default:return"Unknown"}})()}),(null==f?void 0:f.status)==="unhealthy"&&(0,s.jsx)(A.E,{className:"border-[rgba(255,183,77,0.4)] bg-[rgba(255,183,77,0.12)] px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.22em] text-[#FBE3B5]",children:"Unhealthy"})]}),(0,s.jsx)("p",{className:"text-sm text-[rgba(207,207,207,0.65)]",children:j?"connected"===d?(null==f?void 0:f.status)==="unhealthy"?"The service responded but flagged itself as unhealthy.":"Backend responded within acceptable thresholds.":"checking"===d?"Pinging the /health endpoint…":"disconnected"===d?"No response from the backend service.":b?ee(b):"Encountered an unexpected error while checking the backend.":"You appear to be offline. Check your network connection."}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-[11px] uppercase tracking-[0.18em] text-[rgba(207,207,207,0.45)]",children:[(0,s.jsxs)("span",{children:["Last check: ",K(h)]}),(0,s.jsx)("span",{children:"Endpoint: /health"}),(null==f?void 0:f.version)&&(0,s.jsxs)("span",{children:["Build ",f.version]})]})]})]}),(0,s.jsx)("div",{className:"flex items-center gap-2 self-start",children:(0,s.jsxs)(x.$,{variant:"ghost",size:"sm",onClick:C,disabled:"checking"===d,className:"border border-[rgba(255,255,255,0.12)] text-[rgba(207,207,207,0.8)] hover:border-[#4B8EFF]/40 hover:text-white",children:[(0,s.jsx)(y.A,{className:(0,p.cn)("mr-2 h-4 w-4","checking"===d?"animate-spin":void 0)}),"Retry"]})})]}),E&&(0,s.jsx)("div",{className:"mt-4 rounded-xl border border-[rgba(255,107,107,0.28)] bg-[rgba(255,107,107,0.12)] p-4 text-sm text-[#FFD1D1]",children:E}),o&&f&&(0,s.jsxs)("div",{className:"mt-4 grid gap-4 rounded-xl border border-[rgba(255,255,255,0.06)] bg-[rgba(12,16,28,0.65)] p-4 text-sm text-[rgba(207,207,207,0.65)] sm:grid-cols-2",children:[(0,s.jsx)(Q,{label:"Reported Status",value:f.status}),(0,s.jsx)(Q,{label:"Reported At",value:new Date(f.timestamp).toLocaleString()}),(0,s.jsx)(Q,{label:"API Base",value:i}),(0,s.jsx)(Q,{label:"Last Check",value:K(h)})]})]})}function Q(e){let{label:r,value:t}=e;return t?(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-[11px] uppercase tracking-[0.16em] text-[rgba(207,207,207,0.45)]",children:r}),(0,s.jsx)("p",{className:"text-sm text-white",children:t})]}):null}function ee(e){return e.includes("timeout")||e.includes("aborted")?"Connection timeout. The backend server may be slow to respond.":e.includes("Failed to fetch")?"Cannot connect to the backend server. Please check if the service is running.":e.includes("401")?"Authentication failed. Please check your admin credentials.":e.includes("403")?"Access forbidden. You do not have permission to access the health endpoint.":e.includes("404")?"Health endpoint not found. The backend may not support health checks.":e.includes("503")?"Service temporarily unavailable. The backend server is experiencing issues.":e||"Unknown connection error occurred."}function er(){var e,r;let t=(0,n.useRouter)(),{logout:g}=(0,L.b)(),[p,y]=(0,a.useState)({limit:10,offset:0}),[v,j]=(0,a.useState)(1),{data:w,isLoading:N,error:k,refetch:F}=function(e){let{adminKey:r,apiKey:t}=(0,L.b)();return(0,P.I)({queryKey:["admin","subscriptions",e],queryFn:async()=>{if(!r||!t)throw Error("Admin credentials not available");return new q({adminKey:r,apiKey:t}).listSubscriptions(e)},enabled:!!(r&&t),staleTime:3e5,retry:(e,r)=>!(r.message.includes("401")||r.message.includes("403")||r.message.includes("404"))&&e<2,retryDelay:e=>Math.min(1e3*2**e,3e4)})}(p),{data:A,isLoading:C,error:E}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,{adminKey:r,apiKey:t}=(0,L.b)();return(0,P.I)({queryKey:["admin","analytics","revenue",e],queryFn:async()=>{if(!r||!t)throw Error("Admin credentials not available");return new q({adminKey:r,apiKey:t}).getRevenueAnalytics(e)},enabled:!!(r&&t),staleTime:6e5,refetchOnWindowFocus:!1,retry:(e,r)=>!(r.message.includes("401")||r.message.includes("403")||r.message.includes("404"))&&e<2,retryDelay:e=>Math.min(1e3*2**e,3e4)})}(30),R=k||E,_=(0,a.useCallback)(e=>{y(r=>({...r,search:e,offset:0})),j(1)},[]),D=(0,a.useCallback)((e,r)=>{y(t=>({...t,[e]:r||void 0,offset:0})),j(1)},[]),S=(0,a.useCallback)(e=>{let r=(e-1)*(p.limit||10);y(e=>({...e,offset:r})),j(e)},[p.limit]),M=(0,a.useCallback)(()=>{F(),V.oR.success("Data refreshed")},[F]),T=(0,a.useCallback)(()=>{V.oR.info("CSV export feature coming soon")},[]),U=(0,a.useCallback)(e=>{if(!e)return void V.oR.error("Cannot view user: user ID not available");t.push("/admin/users/".concat(e))},[t]),B=(0,a.useCallback)(()=>{g(),t.push("/admin/login"),V.oR.success("Logged out successfully")},[g,t]);(0,a.useEffect)(()=>{k&&V.oR.error("Failed to load subscriptions: ".concat(k.message))},[k]),(0,a.useEffect)(()=>{E&&V.oR.error("Failed to load revenue analytics: ".concat(E.message))},[E]);let z=[{title:"Total Subscriptions",value:N?"...":(null==w?void 0:w.total)||0,icon:i.A,description:"All time subscriptions",isLoading:N},{title:"Active Subscriptions",value:N?"...":(null==w||null==(e=w.subscriptions)?void 0:e.filter(e=>"active"===e.status).length)||0,icon:l.A,description:"Currently active",isLoading:N},{title:"Monthly Revenue",value:C?"...":null==(r=null==A?void 0:A.total_revenue)||isNaN(r)?"$0":"$".concat(r.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})),icon:o.A,description:"This month",isLoading:C},{title:"New Users (7 days)",value:"12",icon:c.A,description:"New signups this week",isLoading:!1}],I=k?"Failed to load subscriptions: ".concat(k.message):E?"Failed to load revenue data: ".concat(E.message):"";return(0,s.jsx)(b.f,{children:(0,s.jsx)(W,{children:(0,s.jsx)("div",{className:"min-h-screen bg-[var(--ds-bg-gradient)] text-white",children:(0,s.jsx)("div",{className:"relative mx-auto max-w-6xl px-4 sm:px-6 lg:px-8 py-12 neon-page-stack",children:(0,s.jsxs)("div",{className:"neon-shell space-y-8 p-6 sm:p-8 md:p-10 backdrop-blur-xl",children:[(0,s.jsx)(X,{className:"border border-[rgba(75,142,255,0.18)]"}),(0,s.jsxs)("header",{className:"flex flex-col gap-6 md:flex-row md:items-start md:justify-between",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-[linear-gradient(135deg,#2653FF_0%,#4B8EFF_55%,#8F82FF_100%)] shadow-[0_22px_48px_rgba(52,84,207,0.38)]",children:(0,s.jsx)(d.A,{className:"h-6 w-6 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-[rgba(207,207,207,0.55)]",children:"Radly Control Room"}),(0,s.jsx)("h1",{className:"text-3xl font-semibold text-white",children:"Admin Dashboard"})]})]}),(0,s.jsx)("p",{className:"max-w-xl text-sm text-[rgba(207,207,207,0.65)]",children:"Monitor subscription health, revenue, and customer usage without leaving the neon shell."})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center",children:[(0,s.jsxs)(x.$,{variant:"ghost",onClick:()=>t.push("/admin/metrics"),className:"h-11 rounded-xl border border-[rgba(75,142,255,0.35)] bg-[rgba(75,142,255,0.16)] px-5 text-[#D7E3FF] hover:border-[rgba(75,142,255,0.45)] hover:bg-[rgba(75,142,255,0.22)]",children:[(0,s.jsx)(u,{className:"mr-2 h-4 w-4"}),"Metrics Dashboard"]}),(0,s.jsxs)(x.$,{variant:"ghost",onClick:B,className:"h-11 rounded-xl border border-[rgba(255,255,255,0.12)] px-5 text-[rgba(207,207,207,0.8)] hover:border-[rgba(255,107,107,0.32)] hover:text-[#FFD1D1]",children:[(0,s.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]}),R&&(0,s.jsx)("div",{className:"rounded-2xl border border-[rgba(255,107,107,0.32)] bg-[rgba(255,107,107,0.12)] p-5 sm:p-6",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"mt-1 flex h-8 w-8 items-center justify-center rounded-full border border-[rgba(255,107,107,0.32)] bg-[rgba(255,107,107,0.18)] text-[#FFD1D1]",children:(0,s.jsx)(m.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-base font-semibold text-white",children:"Connection error"}),(0,s.jsx)("p",{className:"text-sm text-[#FFD1D1]",children:I})]})]}),(0,s.jsx)(x.$,{variant:"ghost",size:"sm",onClick:()=>F(),className:"h-9 rounded-lg border border-[rgba(255,255,255,0.12)] px-4 text-[#FFD1D1] hover:border-[rgba(255,107,107,0.45)] hover:bg-[rgba(255,107,107,0.12)]",children:"Retry"})]})}),(0,s.jsx)("section",{children:(0,s.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 xl:grid-cols-4",children:z.map(e=>(0,s.jsx)(f,{...e},e.title))})}),(0,s.jsx)("section",{children:N?(0,s.jsxs)("div",{className:"aurora-card border border-[rgba(255,255,255,0.08)] p-10 text-center text-sm text-[rgba(207,207,207,0.65)]",children:[(0,s.jsx)("p",{className:"text-lg font-medium text-white",children:"Loading subscriptions…"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-[rgba(207,207,207,0.55)]",children:"Fetching the latest customer data. This should only take a moment."})]}):k?(0,s.jsx)("div",{className:"rounded-2xl border border-[rgba(255,107,107,0.32)] bg-[rgba(255,107,107,0.12)] p-5 sm:p-6",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"mt-1 flex h-8 w-8 items-center justify-center rounded-full border border-[rgba(255,107,107,0.32)] bg-[rgba(255,107,107,0.18)] text-[#FFD1D1]",children:(0,s.jsx)(m.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-base font-semibold text-white",children:"Error loading subscriptions"}),(0,s.jsx)("p",{className:"text-sm text-[#FFD1D1]",children:k.message})]})]}),(0,s.jsx)(x.$,{variant:"ghost",size:"sm",onClick:()=>F(),className:"h-9 rounded-lg border border-[rgba(255,255,255,0.12)] px-4 text-[#FFD1D1] hover:border-[rgba(255,107,107,0.45)] hover:bg-[rgba(255,107,107,0.12)]",children:"Retry"})]})}):(0,s.jsx)(H,{subscriptions:(null==w?void 0:w.subscriptions)||[],isLoading:N,total:(null==w?void 0:w.total)||0,currentPage:v,pageSize:p.limit||10,onPageChange:S,onSearch:_,onFilterChange:D,onRefresh:M,onExport:T,onViewUser:U})})]})})})})})}},39867:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(71847).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},42529:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(71847).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},52056:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(71847).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},57828:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(71847).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},64269:(e,r,t)=>{"use strict";t.d(r,{cn:()=>n});var s=t(2821),a=t(75889);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.QP)((0,s.$)(r))}},65142:(e,r,t)=>{"use strict";t.d(r,{p:()=>o});var s=t(95155),a=t(12115),n=t(83101),i=t(64269);let l=(0,n.F)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"),o=a.forwardRef((e,r)=>{let{className:t,type:a,...n}=e;return(0,s.jsx)("input",{type:a,className:(0,i.cn)(l(),t),ref:r,...n})});o.displayName="Input"},65993:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(71847).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},78874:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(71847).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},84926:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(71847).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},86651:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(71847).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},86948:(e,r,t)=>{"use strict";t.d(r,{BT:()=>c,Wu:()=>d,ZB:()=>o,Zp:()=>i,aR:()=>l});var s=t(95155),a=t(12115),n=t(64269);let i=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});i.displayName="Card";let l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...a})});l.displayName="CardHeader";let o=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("h3",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});o.displayName="CardTitle";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("p",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",t),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",t),...a})});d.displayName="CardContent",a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},89559:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(71847).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},90368:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(71847).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},91169:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(71847).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},91761:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(71847).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])}},e=>{e.O(0,[5707,6559,6743,8720,2454,2149,6692,8441,1255,7358],()=>e(e.s=7248)),_N_E=e.O()}]);