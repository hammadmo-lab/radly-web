(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4960],{3998:(e,t,a)=>{"use strict";a.d(t,{$:()=>c});var r=a(95155),s=a(12115),l=a(32467),i=a(83101),n=a(64269);let o=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-semibold ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"button-primary-gradient",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"button-outline-glass",secondary:"button-secondary-soft",ghost:"text-foreground hover:bg-[rgba(255,255,255,0.08)] hover:text-foreground",link:"text-info underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:a,variant:s,size:i,asChild:c=!1,...d}=e,m=c?l.DX:"button";return(0,r.jsx)(m,{className:(0,n.cn)(o({variant:s,size:i,className:a})),ref:t,...d})});c.displayName="Button"},11186:(e,t,a)=>{"use strict";a.d(t,{bq:()=>u,eb:()=>h,gC:()=>g,l6:()=>d,yv:()=>m});var r=a(95155),s=a(12115),l=a(18261),i=a(24033),n=a(12108),o=a(5917),c=a(64269);let d=l.bL;l.YJ;let m=l.WT,u=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(l.l9,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[s,(0,r.jsx)(l.In,{asChild:!0,children:(0,r.jsx)("span",{children:(0,r.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})})]})});u.displayName=l.l9.displayName;let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.PP,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})});x.displayName=l.PP.displayName;let b=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.wn,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(i.A,{className:"h-4 w-4"})})});b.displayName=l.wn.displayName;let g=s.forwardRef((e,t)=>{let{className:a,children:s,position:i="popper",...n}=e;return(0,r.jsx)(l.ZL,{children:(0,r.jsxs)(l.UC,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...n,children:[(0,r.jsx)(x,{}),(0,r.jsx)(l.LM,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(b,{})]})})});g.displayName=l.UC.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.JU,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})}).displayName=l.JU.displayName;let h=s.forwardRef((e,t)=>{let{className:a,children:s,...i}=e;return(0,r.jsxs)(l.q7,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(l.VF,{children:(0,r.jsx)(o.A,{className:"h-4 w-4"})})}),(0,r.jsx)(l.p4,{children:s})]})});h.displayName=l.q7.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.wv,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=l.wv.displayName},16041:(e,t,a)=>{"use strict";a.d(t,{f:()=>n});var r=a(95155),s=a(12115),l=a(20063),i=a(37723);function n(e){let{children:t}=e,{isAuthenticated:a,isInitialized:n}=(0,i.b)(),o=(0,l.useRouter)();return((0,s.useEffect)(()=>{n&&!a&&o.push("/admin/login")},[a,n,o]),n&&a)?(0,r.jsx)(r.Fragment,{children:t}):(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}},37723:(e,t,a)=>{"use strict";a.d(t,{T:()=>n,b:()=>o});var r=a(95155),s=a(12115),l=a(18720);let i=(0,s.createContext)(void 0);function n(e){let{children:t}=e,[a,n]=(0,s.useState)(null),[o,c]=(0,s.useState)(null),[d,m]=(0,s.useState)(!1);(0,s.useEffect)(()=>{try{let e=localStorage.getItem("admin_key"),t=localStorage.getItem("api_key");e&&t&&(n(e),c(t))}catch(e){}finally{m(!0)}},[]);let u=(0,s.useCallback)(()=>{try{n(null),c(null),localStorage.removeItem("admin_key"),localStorage.removeItem("api_key"),l.oR.success("Logged out successfully")}catch(e){}},[]),x=!!(a&&o);return(0,r.jsx)(i.Provider,{value:{adminKey:a,apiKey:o,isAuthenticated:x,isInitialized:d,login:(e,t)=>{n(e),c(t);try{localStorage.setItem("admin_key",e),localStorage.setItem("api_key",t)}catch(e){}},logout:u},children:t})}function o(){let e=(0,s.useContext)(i);if(!e)throw Error("useAdminAuth must be used within AdminAuthProvider");return e}},46767:(e,t,a)=>{"use strict";a.d(t,{Bc:()=>n,ZI:()=>d,k$:()=>c,m_:()=>o});var r=a(95155),s=a(12115),l=a(47520),i=a(64269);let n=l.Kq,o=l.bL,c=s.forwardRef((e,t)=>(0,r.jsx)(l.l9,{ref:t,...e}));c.displayName=l.l9.displayName;let d=s.forwardRef((e,t)=>{let{className:a,sideOffset:s=4,...n}=e;return(0,r.jsx)(l.UC,{ref:t,sideOffset:s,className:(0,i.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})});d.displayName=l.UC.displayName},57667:(e,t,a)=>{"use strict";a.d(t,{l:()=>s});var r=a(16010);function s(){return(0,r.createBrowserClient)("https://bsldtgivgtyzacwyvcfh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJzbGR0Z2l2Z3R5emFjd3l2Y2ZoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5MzQ1NzMsImV4cCI6MjA3NTUxMDU3M30.vjHPo6WEASxYBOAGYmZ93o5n9RhZvANSlLhaT-wagTs")}},64269:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var r=a(2821),s=a(75889);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},75908:(e,t,a)=>{Promise.resolve().then(a.bind(a,93919))},93919:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ep});var r=a(95155),s=a(12115),l=a(16041),i=a(89559),n=a(35626),o=a(26983),c=a(39867),d=a(3998),m=a(11186),u=a(22454),x=a(57667);async function b(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,x.l)(),{data:s}=await r.auth.getSession(),l=null==(t=s.session)?void 0:t.access_token,i=new Headers(a.headers||{});i.has("content-type")||i.set("content-type","application/json"),i.set("x-client-key","0f0a24adba9edfede4bc7413f85967224db6d1501c16f5213e901048cf4eb445"),i.set("X-Request-Id",crypto.randomUUID()),e.startsWith("/admin/")&&i.set("x-admin-key","7bd9c5638a66d5c9c03651533b2d7c92baa0ec16658081d0bf445c1575391b12"),l&&i.set("authorization","Bearer ".concat(l));let n=await fetch("".concat("https://edge.radly.app","/v1").concat(e),{...a,headers:i,credentials:"include"});if(401===n.status){let e=await n.text().catch(()=>"");throw Error("401 Unauthorized: ".concat(e||"missing/invalid token"))}return n}async function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"5m",t=await b("/admin/metrics/dashboard?range=".concat(e));if(!t.ok)throw Error("Failed to fetch dashboard metrics: "+await t.text().catch(()=>"no body"));return t.json()}var h=a(20063),p=a(80021),f=a(64269),v=a(1524),j=a(26921),N=a(7125);function y(e){let t,{change:a,changeAbsolute:s,period:l="vs previous",format:i="percentage",size:n="md",className:o,showIcon:c=!0,inverse:d=!1}=e;t=.5>Math.abs(a)?"neutral":a>0?"up":"down";let m=d?"down"===t||"neutral"===t:"up"===t||"neutral"===t,u={sm:"h-3 w-3",md:"h-4 w-4",lg:"h-5 w-5"},x="neutral"===t?"text-[rgba(207,207,207,0.65)]":m?"text-[#7AE7B4]":"text-[#FF9F9F]";return(0,r.jsxs)("div",{className:(0,f.cn)("inline-flex items-center gap-2 rounded-full border font-semibold uppercase tracking-[0.16em]",{sm:"text-[11px] px-2 py-1",md:"text-xs px-3 py-1.5",lg:"text-sm px-3.5 py-2"}[n],"neutral"===t?"border-[rgba(255,255,255,0.12)] bg-[rgba(18,22,36,0.75)] text-[rgba(207,207,207,0.75)]":m?"border-[rgba(63,191,140,0.35)] bg-[rgba(63,191,140,0.18)] text-[#C8F3E2]":"border-[rgba(255,107,107,0.32)] bg-[rgba(255,107,107,0.18)] text-[#FFD1D1]",o),children:[(()=>{if(!c)return null;let e=(0,f.cn)(u[n],x);return"up"===t?(0,r.jsx)(v.A,{className:e}):"down"===t?(0,r.jsx)(j.A,{className:e}):(0,r.jsx)(N.A,{className:e})})(),(0,r.jsx)("span",{children:(()=>{let e="".concat(a>0?"+":"").concat(Math.abs(a).toFixed(1),"%");if("percentage"===i)return e;if("absolute"===i&&void 0!==s){let e=s>0?"+":"";return"".concat(e).concat(s.toFixed(2))}if("both"===i&&void 0!==s){let t=s>0?"+":"";return"".concat(e," (").concat(t).concat(s.toFixed(2),")")}return e})()}),l&&(0,r.jsx)("span",{className:"text-[rgba(207,207,207,0.55)] first-letter:uppercase normal-case tracking-normal",children:l})]})}var w=a(23258),F=a(31607);function _(e){let{data:t,color:a="#10b981",height:l=40,showArea:i=!0}=e,n=(0,s.useMemo)(()=>({labels:t.map((e,t)=>t.toString()),datasets:[{data:t,borderColor:a,backgroundColor:i?"".concat(a,"33"):"transparent",borderWidth:2,fill:i,tension:.4,pointRadius:0,pointHoverRadius:0}]}),[t,a,i]),o=(0,s.useMemo)(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{enabled:!1}},scales:{x:{display:!1},y:{display:!1}},interaction:{mode:"index",intersect:!1}}),[]);return t&&0!==t.length?(0,r.jsx)("div",{style:{height:l},children:(0,r.jsx)(w.N1,{data:n,options:o})}):(0,r.jsx)("div",{style:{height:l},className:"bg-gray-100 rounded"})}F.t1.register(F.PP,F.kc,F.FN,F.No,F.dN);var k=a(46767);function C(e){let{title:t,value:a,unit:s,status:l="success",icon:i,className:n,change:o,changeAbsolute:c,period:d,trendInverse:m=!1,target:u,targetLabel:x="Target",sparkline:b,subtitle:g,description:h,min:v,max:j}=e;return(0,r.jsxs)("div",{className:(0,f.cn)("p-5 rounded-lg border-2 transition-all duration-200 hover:shadow-lg bg-white",{success:"bg-white border-green-200 hover:border-green-300",warning:"bg-white border-amber-200 hover:border-amber-300",danger:"bg-white border-red-200 hover:border-red-300"}[l],n),children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,r.jsx)("div",{className:(0,f.cn)("w-2 h-2 rounded-full",{success:"bg-green-500",warning:"bg-amber-500",danger:"bg-red-500"}[l])}),(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-700",children:t}),h&&(0,r.jsx)(k.Bc,{children:(0,r.jsxs)(k.m_,{children:[(0,r.jsx)(k.k$,{asChild:!0,children:(0,r.jsx)("button",{className:"inline-flex items-center justify-center",type:"button",children:(0,r.jsx)(p.A,{className:"h-3.5 w-3.5 text-gray-400 cursor-help"})})}),(0,r.jsx)(k.ZI,{className:"max-w-xs",children:(0,r.jsx)("p",{className:"text-xs",children:h})})]})})]}),i&&(0,r.jsx)("div",{className:"text-gray-400",children:i})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,r.jsx)("span",{className:"text-3xl font-bold text-gray-900",children:a}),s&&(0,r.jsx)("span",{className:"text-lg text-gray-500",children:s})]}),g&&(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:g})]}),void 0!==o&&(0,r.jsx)("div",{className:"mb-3",children:(0,r.jsx)(y,{change:o,changeAbsolute:c,period:d,size:"sm",inverse:m})}),b&&b.length>0&&(0,r.jsx)("div",{className:"mb-3",children:(0,r.jsx)(_,{data:b,color:"success"===l?"#10b981":"warning"===l?"#f59e0b":"#ef4444",height:32})}),(0,r.jsx)("div",{className:"flex items-center justify-between text-xs text-gray-500 pt-3 border-t border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[void 0!==u&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{className:"text-gray-400",children:[x,": "]}),(0,r.jsx)("span",{className:"font-medium text-gray-600",children:u})]}),void 0!==v&&void 0!==j&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-400",children:"Range: "}),(0,r.jsxs)("span",{className:"font-medium text-gray-600",children:[v.toFixed(1)," - ",j.toFixed(1)]})]})]})})]})}function A(e){let{children:t,className:a,cols:s={default:1,sm:2,md:3,lg:4}}=e,l={default:"grid-cols-".concat(s.default||1),sm:s.sm?"sm:grid-cols-".concat(s.sm):"",md:s.md?"md:grid-cols-".concat(s.md):"",lg:s.lg?"lg:grid-cols-".concat(s.lg):"",xl:s.xl?"xl:grid-cols-".concat(s.xl):""};return(0,r.jsx)("div",{className:(0,f.cn)("grid gap-4 sm:gap-6",l.default,l.sm,l.md,l.lg,l.xl,a),children:t})}var D=a(17910),E=a(85710),B=a(91761),R=a(52056);function S(e){return e&&e.data&&e.data.result?e.data.result.map(e=>({name:e.metric.stage||e.metric.provider||e.metric.category||"unknown",value:parseFloat(e.value[1]),timestamp:e.value[0],labels:e.metric})):[]}function L(e,t,a){let r=e-t,s=0!==t?r/t*100:0,l=.5>Math.abs(s)?"neutral":s>0?"up":"down";return{current:e,previous:t,change:s,changeAbsolute:r,trend:l,sparkline:a,timestamp:Date.now()}}function P(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;if(!e||!e.data||!e.data.result)return[];let r=e.data.result[0];return(t&&(r=e.data.result.find(e=>e.metric.stage===t||e.metric.provider===t||e.metric.category===t)||r),r&&r.values)?r.values.slice(-a).map(e=>{let[,t]=e;return parseFloat(t)}):[]}function I(e,t){return e>=t.success?"success":e>=t.warning?"warning":"danger"}function M(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}function q(e){return e<1?"".concat((1e3*e).toFixed(0),"ms"):e<60?"".concat(e.toFixed(2),"s"):"".concat((e/60).toFixed(1),"m")}function z(e){return"".concat(e.toFixed(1),"%")}function T(e){return({dequeue:"#8b5cf6",validation:"#06b6d4",llm_call:"#f59e0b",post_processing:"#10b981",storage:"#3b82f6"})[e]||"#6b7280"}function U(e){return({openai:"#74aa9c",anthropic:"#d4a574",gemini:"#4285f4",claude:"#d4a574"})[e.toLowerCase()]||"#6b7280"}function W(e){return({timeout:"#ef4444",rate_limit:"#f59e0b",validation:"#3b82f6",internal:"#8b5cf6",external:"#06b6d4"})[e.toLowerCase()]||"#6b7280"}function J(){return{sla_compliance:{success:99,warning:95,critical:90},queue_saturation:{success:60,warning:75,critical:85},error_rate:{success:1,warning:2,critical:5},cache_hit_rate:{success:85,warning:70,critical:50},response_time:{success:1,warning:3,critical:5}}}function Z(e){var t,a,r,s;let l=[];if(!e)return l;let i=e.thresholds||J(),n=(null==(t=S(e.queue_saturation)[0])?void 0:t.value)||0;n>=i.queue_saturation.critical?l.push({type:"error",message:"Queue saturation critical at ".concat(z(n)),metric:"queue_saturation",value:n,threshold:i.queue_saturation.critical,recommendation:"Scale up workers immediately or pause new job intake. Check for stuck jobs.",timestamp:Date.now()}):n>=i.queue_saturation.warning&&l.push({type:"warning",message:"Queue saturation elevated at ".concat(z(n)),metric:"queue_saturation",value:n,threshold:i.queue_saturation.warning,recommendation:"Monitor queue closely. Consider scaling workers if trend continues.",timestamp:Date.now()});let o=(null==(a=S(e.sla_compliance)[0])?void 0:a.value)||0;o<i.sla_compliance.critical?l.push({type:"error",message:"SLA compliance critical at ".concat(z(o)),metric:"sla_compliance",value:o,threshold:i.sla_compliance.critical,recommendation:"Investigate slow jobs immediately. Check LLM provider latency and worker health.",timestamp:Date.now()}):o<i.sla_compliance.warning&&l.push({type:"warning",message:"SLA compliance below target at ".concat(z(o)),metric:"sla_compliance",value:o,threshold:i.sla_compliance.warning,recommendation:"Review job stage timings to identify bottlenecks.",timestamp:Date.now()});let c=(null==(r=S(e.error_rate)[0])?void 0:r.value)||0;c>=i.error_rate.critical?l.push({type:"error",message:"Error rate critical at ".concat(z(c)),metric:"error_rate",value:c,threshold:i.error_rate.critical,recommendation:"Check error categories. May indicate LLM provider issues or configuration errors.",timestamp:Date.now()}):c>=i.error_rate.warning&&l.push({type:"warning",message:"Error rate elevated at ".concat(z(c)),metric:"error_rate",value:c,threshold:i.error_rate.warning,recommendation:"Monitor error categories and retry success rate.",timestamp:Date.now()});let d=(null==(s=S(e.cache_hit_rate)[0])?void 0:s.value)||0;d<i.cache_hit_rate.critical?l.push({type:"warning",message:"Cache hit rate low at ".concat(z(d)),metric:"cache_hit_rate",value:d,threshold:i.cache_hit_rate.critical,recommendation:"Check Redis health. Low cache hits increase LLM costs and latency.",timestamp:Date.now()}):d<i.cache_hit_rate.warning&&l.push({type:"info",message:"Cache hit rate could be improved: ".concat(z(d)),metric:"cache_hit_rate",value:d,threshold:i.cache_hit_rate.warning,recommendation:"Review cache TTL settings and cache key strategies.",timestamp:Date.now()});let m=S(e.rate_limits).reduce((e,t)=>e+t.value,0);return m>10&&l.push({type:"warning",message:"High rate limit hits: ".concat(m," in period"),metric:"rate_limits",value:m,threshold:10,recommendation:"Consider increasing rate limits with LLM providers or implementing better request distribution.",timestamp:Date.now()}),l.sort((e,t)=>{let a={error:0,warning:1,info:2};return a[e.type]-a[t.type]})}function H(e){var t,a,l,i;let{data:n}=e,o=n.thresholds||J(),c=(null==(t=S(n.sla_compliance)[0])?void 0:t.value)||0,d=(null==(a=S(n.queue_saturation)[0])?void 0:a.value)||0,m=(null==(l=S(n.llm_cost_hourly)[0])?void 0:l.value)||0,u=(null==(i=S(n.error_rate)[0])?void 0:i.value)||0,x=(0,s.useMemo)(()=>P(n.job_stages_timeseries,void 0,15),[n.job_stages_timeseries]),b=(0,s.useMemo)(()=>P(n.queue_rates_timeseries,void 0,15),[n.queue_rates_timeseries]),g=(0,s.useMemo)(()=>P(n.llm_cost_timeseries,void 0,15),[n.llm_cost_timeseries]),h=(0,s.useMemo)(()=>x&&x.length>=2?L(c,x[x.length-2],x):null,[c,x]),p=(0,s.useMemo)(()=>b&&b.length>=2?L(d,b[b.length-2],b):null,[d,b]),f=(0,s.useMemo)(()=>g&&g.length>=2?L(m,g[g.length-2],g):null,[m,g]),v=(0,s.useMemo)(()=>{let e=S(n.job_stages);return 0===e.length?0:e.reduce((e,t)=>e+t.value,0)},[n.job_stages]);return(0,r.jsxs)(A,{cols:{default:1,sm:2,lg:4},className:"mb-8",children:[(0,r.jsx)(C,{title:"SLA Compliance",value:z(c),status:I(c,{success:o.sla_compliance.success,warning:o.sla_compliance.warning}),icon:(0,r.jsx)(D.A,{className:"h-5 w-5"}),change:null==h?void 0:h.change,changeAbsolute:null==h?void 0:h.changeAbsolute,period:"vs previous period",target:"".concat(o.sla_compliance.success,"%"),targetLabel:"Target",sparkline:x,description:"Percentage of jobs completed within SLA timeframe (P95 < 60s)",subtitle:v>0?"Avg response: ".concat(v.toFixed(2),"s"):void 0}),(0,r.jsx)(C,{title:"Queue Saturation",value:z(d),status:I(d,{success:o.queue_saturation.success,warning:o.queue_saturation.warning}),icon:(0,r.jsx)(E.A,{className:"h-5 w-5"}),change:null==p?void 0:p.change,changeAbsolute:null==p?void 0:p.changeAbsolute,period:"vs previous period",trendInverse:!0,target:"<".concat(o.queue_saturation.warning,"%"),targetLabel:"Safe threshold",sparkline:b,description:"Current queue utilization percentage. High saturation may cause delays."}),(0,r.jsx)(C,{title:"Hourly LLM Cost",value:M(m),status:m>100?"warning":"success",icon:(0,r.jsx)(B.A,{className:"h-5 w-5"}),change:null==f?void 0:f.change,changeAbsolute:null==f?void 0:f.changeAbsolute,period:"vs previous hour",trendInverse:!0,sparkline:g,description:"Total cost of LLM API calls in the current hour across all providers",subtitle:n.cost_efficiency?"Per job: ".concat(M(n.cost_efficiency.costPerJob)):void 0}),(0,r.jsx)(C,{title:"Error Rate",value:z(u),status:I(u,{success:o.error_rate.success,warning:o.error_rate.warning}),icon:(0,r.jsx)(R.A,{className:"h-5 w-5"}),trendInverse:!0,target:"<".concat(o.error_rate.warning,"%"),targetLabel:"Target",description:"Percentage of jobs that failed due to errors in the selected time period"})]})}function $(e){let{children:t,title:a,className:s,height:l="h-80"}=e;return(0,r.jsxs)("div",{className:(0,f.cn)("aurora-card border border-[rgba(255,255,255,0.08)] p-5 sm:p-6 backdrop-blur-xl",s),children:[(0,r.jsx)("h3",{className:"mb-4 text-base font-semibold text-white sm:text-lg",children:a}),(0,r.jsx)("div",{className:(0,f.cn)("overflow-x-auto rounded-2xl border border-[rgba(255,255,255,0.06)] bg-[rgba(12,16,28,0.55)] p-2",l),children:(0,r.jsx)("div",{className:"h-full min-w-[300px]",children:t})})]})}function O(e){let{data:t}=e,a=S(t),s="rgba(215,227,255,0.78)",l={labels:a.map(e=>e.name),datasets:[{data:a.map(e=>e.value),backgroundColor:a.map(e=>T(e.name)),borderColor:a.map(e=>T(e.name)),borderWidth:1}]};return(0,r.jsxs)($,{title:"Job Stage Timing (P95)",children:[(0,r.jsx)(w.yP,{data:l,options:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Job Stage Timing (P95)",font:{size:16,weight:"bold"},color:"#D7E3FF"},tooltip:{backgroundColor:"rgba(12,16,28,0.9)",titleColor:"#FFFFFF",bodyColor:"#D7E3FF",callbacks:{label:function(e){return"".concat(e.parsed.x.toFixed(3),"s (").concat(q(e.parsed.x),")")}}}},scales:{x:{beginAtZero:!0,title:{display:!0,text:"Duration (seconds)",color:s},ticks:{callback:function(e){return q(e)},color:s},grid:{color:"rgba(75,142,255,0.18)",drawBorder:!1}},y:{title:{display:!0,text:"Stage",color:s},ticks:{color:s},grid:{display:!1}}}}}),(0,r.jsxs)("div",{className:"mt-5 grid grid-cols-1 gap-3 text-sm text-[rgba(207,207,207,0.65)] sm:grid-cols-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center rounded-full border border-[rgba(63,191,140,0.35)] bg-[rgba(63,191,140,0.16)] px-4 py-2 sm:justify-start",children:[(0,r.jsx)("span",{className:"mr-2 inline-flex h-2 w-2 rounded-full bg-[#3FBF8C]"}),(0,r.jsx)("span",{className:"text-xs uppercase tracking-[0.18em] text-[#C8F3E2]",children:"Good (< 1s)"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-center rounded-full border border-[rgba(248,183,77,0.35)] bg-[rgba(248,183,77,0.16)] px-4 py-2 sm:justify-start",children:[(0,r.jsx)("span",{className:"mr-2 inline-flex h-2 w-2 rounded-full bg-[#F8B74D]"}),(0,r.jsx)("span",{className:"text-xs uppercase tracking-[0.18em] text-[#FBE3B5]",children:"Warning (1-5s)"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-center rounded-full border border-[rgba(255,107,107,0.32)] bg-[rgba(255,107,107,0.18)] px-4 py-2 sm:justify-start",children:[(0,r.jsx)("span",{className:"mr-2 inline-flex h-2 w-2 rounded-full bg-[#FF6B6B]"}),(0,r.jsx)("span",{className:"text-xs uppercase tracking-[0.18em] text-[#FFD1D1]",children:"Critical (> 5s)"})]})]})]})}function Q(e){let{tokensData:t,costData:a}=e,s=S(t),l=S(a),i="rgba(215,227,255,0.78)",n={labels:s.map(e=>e.name),datasets:[{data:s.map(e=>e.value),backgroundColor:s.map(e=>U(e.name)),borderColor:s.map(e=>U(e.name)),borderWidth:2,borderRadius:8}]},o={labels:l.map(e=>e.name),datasets:[{data:l.map(e=>e.value),backgroundColor:l.map(e=>U(e.name)),borderColor:l.map(e=>U(e.name)),borderWidth:2}]};return(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[(0,r.jsx)("div",{className:"aurora-card border border-[rgba(255,255,255,0.08)] p-5 sm:p-6",children:(0,r.jsx)("div",{className:"h-80 rounded-2xl border border-[rgba(255,255,255,0.06)] bg-[rgba(12,16,28,0.55)] p-3",children:(0,r.jsx)(w.yP,{data:n,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1,labels:{color:i}},title:{display:!0,text:"Token Usage by Provider",font:{size:16,weight:"bold"},color:"#D7E3FF"},tooltip:{backgroundColor:"rgba(12,16,28,0.92)",titleColor:"#FFFFFF",bodyColor:"#D7E3FF",callbacks:{label:function(e){return"".concat(e.label,": ").concat(e.parsed.y.toLocaleString()," tokens")}}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Tokens",color:i},ticks:{callback:function(e){return e.toLocaleString()},color:i},grid:{color:"rgba(75,142,255,0.18)",drawBorder:!1}},x:{ticks:{color:i},grid:{display:!1}}}}})})}),(0,r.jsx)("div",{className:"aurora-card border border-[rgba(255,255,255,0.08)] p-5 sm:p-6",children:(0,r.jsx)("div",{className:"h-80 rounded-2xl border border-[rgba(255,255,255,0.06)] bg-[rgba(12,16,28,0.55)] p-3",children:(0,r.jsx)(w.nu,{data:o,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:i,padding:18}},title:{display:!0,text:"Cost Breakdown by Provider",font:{size:16,weight:"bold"},color:"#D7E3FF"},tooltip:{backgroundColor:"rgba(12,16,28,0.92)",titleColor:"#FFFFFF",bodyColor:"#D7E3FF",callbacks:{label:function(e){let t=e.dataset.data.reduce((e,t)=>e+t,0),a=(e.parsed/t*100).toFixed(1);return"".concat(e.label,": ").concat(M(e.parsed)," (").concat(a,"%)")}}}}}})})})]})}function V(e){var t,a;let{errorCategories:s,cacheHitRate:l,retrySuccessRate:i}=e,n=S(s),o=(null==(t=S(l)[0])?void 0:t.value)||0,c=(null==(a=S(i)[0])?void 0:a.value)||0,d="rgba(215,227,255,0.78)",m={labels:n.map(e=>e.name),datasets:[{data:n.map(e=>e.value),backgroundColor:n.map(e=>W(e.name)),borderColor:n.map(e=>W(e.name)),borderWidth:2}]},u=e=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:e,font:{size:16,weight:"bold"},color:"#D7E3FF"}},scales:{y:{beginAtZero:!0,max:100,ticks:{callback:function(e){return"".concat(e,"%")},color:d},grid:{color:"rgba(75,142,255,0.18)",drawBorder:!1}},x:{ticks:{color:d},grid:{display:!1}}}}),x=(e,t,a,r)=>({labels:[e],datasets:[{data:[t],backgroundColor:t>=a?"#3FBF8C":t>=r?"#F8B74D":"#FF6B6B",borderColor:t>=a?"rgba(63,191,140,0.9)":t>=r?"rgba(248,183,77,0.85)":"rgba(255,107,107,0.85)",borderWidth:2,borderRadius:10}]});return(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[(0,r.jsx)("div",{className:"aurora-card border border-[rgba(255,255,255,0.08)] p-5 sm:p-6",children:(0,r.jsx)("div",{className:"h-80 rounded-2xl border border-[rgba(255,255,255,0.06)] bg-[rgba(12,16,28,0.55)] p-3",children:(0,r.jsx)(w.nu,{data:m,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:d,padding:18}},title:{display:!0,text:"Error Categories",font:{size:16,weight:"bold"},color:"#D7E3FF"},tooltip:{backgroundColor:"rgba(12,16,28,0.92)",titleColor:"#FFFFFF",bodyColor:"#D7E3FF",callbacks:{label:function(e){let t=e.dataset.data.reduce((e,t)=>e+t,0),a=(e.parsed/t*100).toFixed(1);return"".concat(e.label,": ").concat(e.parsed," errors (").concat(a,"%)")}}}}}})})}),(0,r.jsxs)("div",{className:"aurora-card border border-[rgba(255,255,255,0.08)] p-5 sm:p-6",children:[(0,r.jsx)("div",{className:"h-80 rounded-2xl border border-[rgba(255,255,255,0.06)] bg-[rgba(12,16,28,0.55)] p-3",children:(0,r.jsx)(w.yP,{data:x("Cache Hit Rate",o,80,60),options:u("Cache Hit Rate")})}),(0,r.jsxs)("div",{className:"mt-4 text-center text-sm text-[rgba(207,207,207,0.65)]",children:[(0,r.jsx)("div",{className:"text-3xl font-semibold text-white",children:z(o)}),(0,r.jsx)("div",{className:"mt-1 uppercase tracking-[0.18em] text-[rgba(207,207,207,0.45)]",children:"Current Hit Rate"})]})]}),(0,r.jsxs)("div",{className:"aurora-card border border-[rgba(255,255,255,0.08)] p-5 sm:p-6",children:[(0,r.jsx)("div",{className:"h-80 rounded-2xl border border-[rgba(255,255,255,0.06)] bg-[rgba(12,16,28,0.55)] p-3",children:(0,r.jsx)(w.yP,{data:x("Retry Success Rate",c,70,50),options:u("Retry Success Rate")})}),(0,r.jsxs)("div",{className:"mt-4 text-center text-sm text-[rgba(207,207,207,0.65)]",children:[(0,r.jsx)("div",{className:"text-3xl font-semibold text-white",children:z(c)}),(0,r.jsx)("div",{className:"mt-1 uppercase tracking-[0.18em] text-[rgba(207,207,207,0.45)]",children:"Success Rate"})]})]})]})}function Y(e){var t;let{queueRates:a,queueSaturation:s}=e,l=S(a),i=S(s),n="rgba(215,227,255,0.78)",o="rgba(75,142,255,0.18)",c={labels:l.map((e,t)=>"T".concat(t+1)),datasets:[{label:"Enqueue Rate",data:l.map(e=>e.value),borderColor:"#4B8EFF",backgroundColor:"rgba(75,142,255,0.18)",pointRadius:3,tension:.25},{label:"Dequeue Rate",data:l.map(e=>.95*e.value),borderColor:"#3FBF8C",backgroundColor:"rgba(63,191,140,0.16)",pointRadius:3,tension:.25}]},d=(null==(t=i[0])?void 0:t.value)||0,m={labels:["Current Saturation"],datasets:[{data:[d],backgroundColor:d>=80?"#FF6B6B":d>=60?"#F8B74D":"#3FBF8C",borderColor:d>=80?"rgba(255,107,107,0.85)":d>=60?"rgba(248,183,77,0.85)":"rgba(63,191,140,0.9)",borderWidth:2,borderRadius:8}]};return(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[(0,r.jsx)("div",{className:"aurora-card border border-[rgba(255,255,255,0.08)] p-5 sm:p-6",children:(0,r.jsx)("div",{className:"h-80 rounded-2xl border border-[rgba(255,255,255,0.06)] bg-[rgba(12,16,28,0.55)] p-3",children:(0,r.jsx)(w.N1,{data:c,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:n}},title:{display:!0,text:"Queue Processing Rates",font:{size:16,weight:"bold"},color:"#D7E3FF"},tooltip:{backgroundColor:"rgba(12,16,28,0.92)",titleColor:"#FFFFFF",bodyColor:"#D7E3FF",callbacks:{label:function(e){return"".concat(e.dataset.label,": ").concat(e.parsed.y.toFixed(2)," jobs/sec")}}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Jobs per Second",color:n},ticks:{color:n},grid:{color:o,drawBorder:!1}},x:{title:{display:!0,text:"Time",color:n},ticks:{color:n},grid:{color:"rgba(75,142,255,0.08)"}}}}})})}),(0,r.jsxs)("div",{className:"aurora-card border border-[rgba(255,255,255,0.08)] p-5 sm:p-6",children:[(0,r.jsx)("div",{className:"h-80 rounded-2xl border border-[rgba(255,255,255,0.06)] bg-[rgba(12,16,28,0.55)] p-3",children:(0,r.jsx)(w.yP,{data:m,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Queue Saturation",font:{size:16,weight:"bold"},color:"#D7E3FF"},tooltip:{backgroundColor:"rgba(12,16,28,0.92)",titleColor:"#FFFFFF",bodyColor:"#D7E3FF",callbacks:{label:function(e){return"Saturation: ".concat(z(e.parsed.y))}}}},scales:{y:{beginAtZero:!0,max:100,title:{display:!0,text:"Saturation (%)",color:n},ticks:{callback:function(e){return"".concat(e,"%")},color:n},grid:{color:o,drawBorder:!1}},x:{ticks:{color:n},grid:{display:!1}}}}})}),(0,r.jsxs)("div",{className:"mt-5 text-center text-sm text-[rgba(207,207,207,0.65)]",children:[(0,r.jsx)("div",{className:"text-3xl font-semibold text-white",children:z(d)}),(0,r.jsx)("div",{className:"mt-1 uppercase tracking-[0.18em] text-[rgba(207,207,207,0.45)]",children:"Current Saturation"})]})]})]})}function G(e){var t;let{data:a}=e,s=(null==(t=S(a)[0])?void 0:t.value)||0,l=Math.max(20-s,0),i=s/20*100,n="rgba(215,227,255,0.78)",o=i>=90?{label:"Critical",className:"text-[#FFD1D1]",fill:"bg-[linear-gradient(90deg,#FF6B6B_0%,#FF9F6B_100%)]"}:i>=70?{label:"Warning",className:"text-[#FBE3B5]",fill:"bg-[linear-gradient(90deg,#F8B74D_0%,#FF8A4F_100%)]"}:{label:"Healthy",className:"text-[#C8F3E2]",fill:"bg-[linear-gradient(90deg,#3FBF8C_0%,#6EE7B7_100%)]"};return(0,r.jsxs)("div",{className:"aurora-card border border-[rgba(255,255,255,0.08)] p-5 sm:p-6",children:[(0,r.jsx)("div",{className:"h-80 rounded-2xl border border-[rgba(255,255,255,0.06)] bg-[rgba(12,16,28,0.55)] p-3",children:(0,r.jsx)(w.yP,{data:{labels:["Connection Pool"],datasets:[{label:"Available",data:[l],backgroundColor:"rgba(63,191,140,0.2)",borderColor:"#3FBF8C",borderWidth:2,borderRadius:12},{label:"In Use",data:[s],backgroundColor:"rgba(75,142,255,0.22)",borderColor:"#4B8EFF",borderWidth:2,borderRadius:12}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:n}},title:{display:!0,text:"Database Connection Pool Usage",font:{size:16,weight:"bold"},color:"#D7E3FF"},tooltip:{backgroundColor:"rgba(12,16,28,0.92)",titleColor:"#FFFFFF",bodyColor:"#D7E3FF",callbacks:{label:function(e){return"".concat(e.dataset.label,": ").concat(e.parsed.y," connections")}}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Connections",color:n},ticks:{color:n},grid:{color:"rgba(75,142,255,0.18)",drawBorder:!1}},x:{ticks:{color:n},grid:{display:!1}}}}})}),(0,r.jsxs)("div",{className:"mt-6 grid grid-cols-3 gap-4 text-center text-sm text-[rgba(207,207,207,0.65)]",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-semibold text-white",children:s}),(0,r.jsx)("div",{className:"mt-1 uppercase tracking-[0.18em]",children:"In Use"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-semibold text-white",children:l}),(0,r.jsx)("div",{className:"mt-1 uppercase tracking-[0.18em]",children:"Available"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-2xl font-semibold text-white",children:[i.toFixed(1),"%"]}),(0,r.jsx)("div",{className:"mt-1 uppercase tracking-[0.18em]",children:"Usage"})]})]}),(0,r.jsxs)("div",{className:"mt-5",children:[(0,r.jsxs)("div",{className:"mb-2 flex items-center justify-between text-xs uppercase tracking-[0.18em] text-[rgba(207,207,207,0.55)]",children:[(0,r.jsx)("span",{children:"Pool Health"}),(0,r.jsx)("span",{className:o.className,children:o.label})]}),(0,r.jsx)("div",{className:"h-2.5 w-full rounded-full border border-[rgba(255,255,255,0.12)] bg-[rgba(12,16,28,0.7)]",children:(0,r.jsx)("div",{className:(0,f.cn)("h-full rounded-full shadow-[0_8px_18px_rgba(75,142,255,0.25)]",o.fill),style:{width:"".concat(Math.min(i,100),"%")}})})]})]})}F.t1.register(F.PP,F.kc,F.E8,F.hE,F.m_,F.s$),F.t1.register(F.PP,F.kc,F.E8,F.hE,F.m_,F.s$,F.Bs),F.t1.register(F.Bs,F.m_,F.s$,F.kc,F.PP,F.E8,F.hE),F.t1.register(F.PP,F.kc,F.FN,F.No,F.E8,F.hE,F.m_,F.s$),F.t1.register(F.PP,F.kc,F.E8,F.hE,F.m_,F.s$);var X=a(6132),K=a(23327),ee=a(17666),et=a(12108),ea=a(24033),er=a(42529);let es={error:{container:"border-[rgba(255,107,107,0.32)] bg-[rgba(255,107,107,0.12)]",iconWrapper:"border-[rgba(255,107,107,0.32)] bg-[rgba(255,107,107,0.18)] text-[#FFD1D1]",text:"text-[#FFD1D1]",accent:"#FFD1D1",label:"Critical",icon:X.A},warning:{container:"border-[rgba(248,183,77,0.35)] bg-[rgba(248,183,77,0.16)]",iconWrapper:"border-[rgba(248,183,77,0.35)] bg-[rgba(248,183,77,0.18)] text-[#FBE3B5]",text:"text-[#FBE3B5]",accent:"#FBE3B5",label:"Warning",icon:R.A},info:{container:"border-[rgba(75,142,255,0.35)] bg-[rgba(75,142,255,0.16)]",iconWrapper:"border-[rgba(75,142,255,0.35)] bg-[rgba(75,142,255,0.18)] text-[#D7E3FF]",text:"text-[#D7E3FF]",accent:"#D7E3FF",label:"Info",icon:K.A}};function el(e){var t;let{alert:a}=e,[l,i]=(0,s.useState)(!1),n=null!=(t=es[a.type])?t:es.info,o=n.icon;return(0,r.jsx)("div",{className:(0,f.cn)("rounded-2xl border p-4 sm:p-5 transition-all duration-200 hover:-translate-y-0.5 hover:shadow-[0_14px_32px_rgba(20,28,45,0.55)]",n.container),children:(0,r.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:(0,f.cn)("flex h-9 w-9 items-center justify-center rounded-xl border",n.iconWrapper),children:(0,r.jsx)(o,{className:"h-4 w-4"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:(0,f.cn)("text-xs font-semibold uppercase tracking-[0.22em]",n.text),children:n.label}),(0,r.jsx)("span",{className:"text-[11px] uppercase tracking-[0.18em] text-[rgba(255,255,255,0.55)]",children:new Date(a.timestamp).toLocaleTimeString()})]}),(0,r.jsx)("p",{className:"mt-2 text-sm text-white",children:a.message})]})]}),a.recommendation&&(0,r.jsxs)("div",{className:"pl-12 sm:pl-12",children:[(0,r.jsxs)(d.$,{variant:"ghost",size:"sm",onClick:()=>i(e=>!e),className:"h-auto px-0 text-xs font-medium text-[rgba(255,255,255,0.75)] hover:text-white",children:[(0,r.jsx)(ee.A,{className:"mr-2 h-3.5 w-3.5 text-[#FBE3B5]"}),l?"Hide recommendation":"Show recommendation",l?(0,r.jsx)(et.A,{className:"ml-2 h-3 w-3 text-[rgba(255,255,255,0.65)]"}):(0,r.jsx)(ea.A,{className:"ml-2 h-3 w-3 text-[rgba(255,255,255,0.65)]"})]}),l&&(0,r.jsxs)("div",{className:"mt-3 rounded-xl border border-[rgba(255,255,255,0.12)] bg-[rgba(12,16,28,0.7)] p-3 text-sm text-[rgba(207,207,207,0.75)]",children:[(0,r.jsx)("div",{className:"mb-1 text-xs font-semibold uppercase tracking-[0.18em] text-[rgba(207,207,207,0.55)]",children:"Recommended Action"}),a.recommendation]})]})]}),(0,r.jsxs)("div",{className:"rounded-xl border border-[rgba(255,255,255,0.12)] bg-[rgba(12,16,28,0.5)] px-4 py-3 text-xs uppercase tracking-[0.18em] text-[rgba(207,207,207,0.55)]",children:[(0,r.jsxs)("div",{children:["Value:"," ",(0,r.jsx)("span",{className:"font-semibold text-white",children:a.value.toFixed(1)})]}),(0,r.jsxs)("div",{className:"mt-1",children:["Threshold:"," ",(0,r.jsx)("span",{className:"font-semibold text-white",children:a.threshold.toFixed(1)})]})]})]})})}function ei(e){let{metrics:t}=e,a=Z(t),[l,i]=(0,s.useState)(!1),n=0===a.length?[{message:"Queue saturation spike",resolvedAt:Date.now()-108e5,duration:"15 minutes"}]:[];if(0===a.length)return(0,r.jsxs)("div",{className:"aurora-card border border-[rgba(255,255,255,0.08)] p-6 sm:p-7",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-6 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-2xl border border-[rgba(63,191,140,0.35)] bg-[rgba(63,191,140,0.18)] text-[#C8F3E2]",children:(0,r.jsx)(er.A,{className:"h-5 w-5"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-white",children:"System Health: Excellent"}),(0,r.jsx)("p",{className:"text-sm text-[rgba(207,207,207,0.65)]",children:"No active alerts reported."})]})]}),(0,r.jsx)("div",{className:"text-5xl",children:"✨"})]}),n.length>0&&(0,r.jsxs)("div",{className:"mt-6 border-t border-[rgba(255,255,255,0.06)] pt-5",children:[(0,r.jsxs)(d.$,{variant:"ghost",size:"sm",onClick:()=>i(e=>!e),className:"h-auto px-0 text-xs font-medium text-[rgba(255,255,255,0.75)] hover:text-white",children:[(0,r.jsx)(o.A,{className:"mr-2 h-3.5 w-3.5 text-[#D7E3FF]"}),l?"Hide recent resolved alerts":"Show recent resolved alerts",l?(0,r.jsx)(et.A,{className:"ml-2 h-3 w-3 text-[rgba(255,255,255,0.65)]"}):(0,r.jsx)(ea.A,{className:"ml-2 h-3 w-3 text-[rgba(255,255,255,0.65)]"})]}),l&&(0,r.jsx)("div",{className:"mt-3 space-y-3",children:n.map((e,t)=>(0,r.jsxs)("div",{className:"rounded-xl border border-[rgba(255,255,255,0.12)] bg-[rgba(12,16,28,0.6)] p-3 text-sm text-[rgba(207,207,207,0.75)]",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(er.A,{className:"h-4 w-4 text-[#7AE7B4]"}),(0,r.jsx)("span",{children:e.message})]}),(0,r.jsxs)("span",{className:"text-xs uppercase tracking-[0.18em] text-[rgba(207,207,207,0.45)]",children:["Resolved ",new Date(e.resolvedAt).toLocaleTimeString()]})]}),(0,r.jsxs)("div",{className:"mt-1 ml-6 text-xs text-[rgba(207,207,207,0.45)]",children:["Duration: ",e.duration]})]},t))})]})]});let c=a.filter(e=>"error"===e.type).length,m=a.filter(e=>"warning"===e.type).length;return(0,r.jsxs)("div",{className:"aurora-card border border-[rgba(255,255,255,0.08)] p-6 sm:p-7",children:[(0,r.jsxs)("div",{className:"mb-5 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-white",children:["Active Alerts (",a.length,")"]}),(0,r.jsx)("p",{className:"text-sm text-[rgba(207,207,207,0.65)]",children:"Prioritize critical issues to keep the system stable."})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-xs uppercase tracking-[0.18em]",children:[c>0&&(0,r.jsxs)("span",{className:"rounded-full border border-[rgba(255,107,107,0.32)] bg-[rgba(255,107,107,0.18)] px-3 py-1 font-semibold text-[#FFD1D1]",children:[c," Critical"]}),m>0&&(0,r.jsxs)("span",{className:"rounded-full border border-[rgba(248,183,77,0.35)] bg-[rgba(248,183,77,0.16)] px-3 py-1 font-semibold text-[#FBE3B5]",children:[m," Warning"]})]})]}),(0,r.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,r.jsx)(el,{alert:e},"".concat(e.type,"-").concat(e.timestamp)))})]})}var en=a(91169),eo=a(78874);function ec(e){var t;let{userJobSuccess:a,rateLimits:s}=e,l=S(a),i=S(s),n=(null==(t=l[0])?void 0:t.value)||0,o=i.reduce((e,t)=>e+t.value,0),c=n>=95?"bg-[linear-gradient(90deg,#3FBF8C_0%,#6EE7B7_100%)] shadow-[0_10px_26px_rgba(63,191,140,0.32)]":n>=85?"bg-[linear-gradient(90deg,#F8B74D_0%,#FF8A4F_100%)] shadow-[0_10px_26px_rgba(248,183,77,0.26)]":"bg-[linear-gradient(90deg,#FF6B6B_0%,#FF9F6B_100%)] shadow-[0_10px_26px_rgba(255,107,107,0.28)]";return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"aurora-card border border-[rgba(255,255,255,0.08)] p-5 sm:p-6",children:[(0,r.jsxs)("div",{className:"mb-5 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-2xl border border-[rgba(75,142,255,0.35)] bg-[rgba(75,142,255,0.16)] text-[#D7E3FF]",children:(0,r.jsx)(en.A,{className:"h-5 w-5"})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-white",children:"User Job Success Rate"})]}),(0,r.jsx)("div",{className:"text-3xl font-semibold text-white",children:z(n)})]}),(0,r.jsx)("div",{className:"h-3.5 w-full rounded-full border border-[rgba(255,255,255,0.12)] bg-[rgba(12,16,28,0.7)]",children:(0,r.jsx)("div",{className:"h-full rounded-full ".concat(c),style:{width:"".concat(Math.min(n,100),"%")}})}),(0,r.jsxs)("div",{className:"mt-3 flex items-center justify-between text-xs uppercase tracking-[0.18em] text-[rgba(207,207,207,0.45)]",children:[(0,r.jsx)("span",{children:"0%"}),(0,r.jsx)("span",{className:"text-[rgba(207,207,207,0.75)]",children:n>=95?"Excellent":n>=85?"Good":"Needs Attention"}),(0,r.jsx)("span",{children:"100%"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,r.jsx)(C,{title:"Rate Limits Hit",value:o.toLocaleString(),unit:"requests",status:o>100?"warning":"success",icon:(0,r.jsx)(eo.A,{className:"h-5 w-5"}),description:"Total rate-limit triggers across providers in the selected window"}),(0,r.jsx)(C,{title:"Success Rate Trend",value:"+2.3%",status:"success",change:2.3,period:"vs last hour",icon:(0,r.jsx)(v.A,{className:"h-5 w-5"}),description:"Change in job success rate compared to the previous interval"})]}),i.length>0&&(0,r.jsxs)("div",{className:"aurora-card border border-[rgba(255,255,255,0.08)] p-5 sm:p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Rate Limits by Provider"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-[rgba(207,207,207,0.65)]",children:"Providers triggering throttles most frequently in this window."}),(0,r.jsx)("div",{className:"mt-4 space-y-3",children:i.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-[rgba(255,255,255,0.08)] bg-[rgba(12,16,28,0.6)] p-3 text-sm text-[rgba(207,207,207,0.75)]",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"inline-flex h-3 w-3 rounded-full bg-[#FF6B6B]"}),(0,r.jsx)("span",{className:"font-medium text-white",children:e.name})]}),(0,r.jsxs)("span",{children:[e.value.toLocaleString()," hits"]})]},t))})]})]})}function ed(){return(0,r.jsx)("div",{className:"aurora-card flex h-96 items-center justify-center border border-[rgba(255,255,255,0.08)] p-10 text-center",children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full border border-[rgba(75,142,255,0.35)] bg-[rgba(75,142,255,0.16)] text-[#D7E3FF]",children:(0,r.jsx)(i.A,{className:"h-5 w-5 animate-spin"})}),(0,r.jsx)("p",{className:"text-lg font-semibold text-white",children:"Loading metrics…"}),(0,r.jsx)("p",{className:"text-sm text-[rgba(207,207,207,0.65)]",children:"Fetching real-time telemetry from Prometheus and Supabase logs."})]})})}var em=a(61362),eu=a(50906);let ex={healthy:{iconWrapper:"border-[rgba(63,191,140,0.35)] bg-[rgba(63,191,140,0.18)] text-[#7AE7B4]",border:"border-[rgba(63,191,140,0.28)]",badge:"text-[#C8F3E2]",label:"All Systems Operational",description:"Every service responded within healthy thresholds."},degraded:{iconWrapper:"border-[rgba(248,183,77,0.35)] bg-[rgba(248,183,77,0.16)] text-[#FBE3B5]",border:"border-[rgba(248,183,77,0.28)]",badge:"text-[#FBE3B5]",label:"System Degraded",description:"Some metrics need attention to avoid regressions."},critical:{iconWrapper:"border-[rgba(255,107,107,0.32)] bg-[rgba(255,107,107,0.18)] text-[#FFD1D1]",border:"border-[rgba(255,107,107,0.32)]",badge:"text-[#FFD1D1]",label:"Critical Alerts Active",description:"Immediate action required to stabilize the system."}};function eb(e){let{alerts:t,uptime:a,className:s}=e,l=t.filter(e=>"error"===e.type),i=t.filter(e=>"warning"===e.type),n=l.length>0?"critical":i.length>2?"degraded":"healthy",o=ex[n],c="critical"===n?X.A:"degraded"===n?R.A:em.A;return(0,r.jsx)("div",{className:(0,f.cn)("aurora-card border p-6 sm:p-7 transition-shadow hover:shadow-[0_18px_42px_rgba(20,28,45,0.5)]",o.border,s),children:(0,r.jsxs)("div",{className:"flex flex-col gap-6 lg:flex-row lg:items-start lg:justify-between",children:[(0,r.jsxs)("div",{className:"flex flex-1 items-start gap-4",children:[(0,r.jsx)("div",{className:(0,f.cn)("flex h-12 w-12 items-center justify-center rounded-2xl border",o.iconWrapper),children:(0,r.jsx)(c,{className:"h-6 w-6"})}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:(0,f.cn)("text-2xl font-semibold text-white",o.badge),children:o.label}),(0,r.jsx)("p",{className:"mt-1 text-sm text-[rgba(207,207,207,0.65)]",children:o.description})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-xs uppercase tracking-[0.18em] text-[rgba(207,207,207,0.45)]",children:[(0,r.jsxs)("span",{className:"flex items-center gap-2 text-[rgba(207,207,207,0.6)]",children:[(0,r.jsx)(eu.A,{className:"h-4 w-4 text-[#4B8EFF]"}),"Uptime:"," ",(0,r.jsx)("span",{className:"font-semibold text-white",children:function(e){if(!e)return"N/A";let t=Math.floor(e/86400),a=Math.floor(e%86400/3600);if(t>0)return"".concat(t,"d ").concat(a,"h");let r=Math.floor(e%3600/60);return"".concat(a,"h ").concat(r,"m")}(a)})]}),l.length>0&&(0,r.jsxs)("span",{className:"flex items-center gap-2 text-[#FFD1D1]",children:[(0,r.jsx)("span",{className:"inline-flex h-2 w-2 rounded-full bg-[#FF6B6B]"}),l.length," Critical"]}),i.length>0&&(0,r.jsxs)("span",{className:"flex items-center gap-2 text-[#FBE3B5]",children:[(0,r.jsx)("span",{className:"inline-flex h-2 w-2 rounded-full bg-[#F8B74D]"}),i.length," Warning"]})]})]})]}),"healthy"===n&&0===t.length&&(0,r.jsxs)("div",{className:"flex flex-col items-end gap-2 text-right text-[rgba(207,207,207,0.65)]",children:[(0,r.jsx)("div",{className:"text-4xl",children:"✨"}),(0,r.jsx)("span",{className:"text-xs uppercase tracking-[0.18em]",children:"Perfect health"})]})]})})}let eg=[{value:"5m",label:"Last 5 minutes"},{value:"15m",label:"Last 15 minutes"},{value:"1h",label:"Last hour"},{value:"6h",label:"Last 6 hours"},{value:"24h",label:"Last 24 hours"}];function eh(){var e;let[t,a]=(0,s.useState)("5m"),[l,x]=(0,s.useState)(new Date),b=(0,h.useRouter)(),{data:p,isLoading:f,error:v,refetch:j}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"5m";return(0,u.I)({queryKey:["metrics-dashboard",e],queryFn:()=>g(e),refetchInterval:3e4,staleTime:25e3,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)})}(t);(0,s.useEffect)(()=>{p&&x(new Date)},[p]);let N=()=>{j()};return f?(0,r.jsx)(ed,{}):v?(0,r.jsxs)("div",{className:"rounded-2xl border border-[rgba(255,107,107,0.32)] bg-[rgba(255,107,107,0.12)] p-6 text-[#FFD1D1]",children:[(0,r.jsx)("div",{className:"text-lg font-semibold text-white",children:"Error loading metrics"}),(0,r.jsx)("div",{className:"mt-2 text-sm",children:v.message.includes("404")?"The metrics dashboard endpoint is not yet implemented on the backend. Please contact your administrator.":v.message}),(0,r.jsxs)("div",{className:"mt-4 text-xs uppercase tracking-[0.18em] text-[rgba(255,209,209,0.7)]",children:["Expected endpoint: ",(0,r.jsx)("code",{className:"ml-1 font-mono text-[rgba(255,209,209,0.9)]",children:"/v1/admin/metrics/dashboard"})]}),(0,r.jsxs)(d.$,{onClick:N,className:"mt-6 h-10 rounded-lg border border-[rgba(255,255,255,0.12)] bg-transparent px-4 text-[#FFD1D1] hover:border-[rgba(255,107,107,0.45)] hover:bg-[rgba(255,107,107,0.12)]",children:[(0,r.jsx)(i.A,{className:"mr-2 h-4 w-4"}),"Retry"]})]}):p?(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-5 lg:flex-row lg:items-center lg:justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)(d.$,{variant:"ghost",onClick:()=>b.push("/admin"),className:"h-11 rounded-xl border border-[rgba(255,255,255,0.12)] px-4 text-[rgba(207,207,207,0.8)] hover:border-[#4B8EFF]/40 hover:text-white",children:[(0,r.jsx)(n.A,{className:"h-4 w-4"}),"Back to Admin"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-semibold text-white",children:"Metrics Dashboard"}),(0,r.jsxs)("div",{className:"mt-1 flex items-center text-sm text-[rgba(207,207,207,0.55)]",children:[(0,r.jsx)(o.A,{className:"mr-2 h-4 w-4 text-[#4B8EFF]"}),"Last updated: ",(0,r.jsx)("span",{className:"ml-1 font-medium text-white",children:l.toLocaleTimeString()})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[(0,r.jsxs)(m.l6,{value:t,onValueChange:a,children:[(0,r.jsx)(m.bq,{className:"h-11 w-48 rounded-xl border-[rgba(255,255,255,0.12)] bg-[rgba(18,22,36,0.85)] text-[rgba(207,207,207,0.75)] hover:border-[#4B8EFF]/40",children:(0,r.jsx)(m.yv,{})}),(0,r.jsx)(m.gC,{className:"border border-[rgba(255,255,255,0.12)] bg-[rgba(12,14,24,0.95)] text-white",children:eg.map(e=>(0,r.jsx)(m.eb,{value:e.value,children:e.label},e.value))})]}),(0,r.jsxs)(d.$,{onClick:N,variant:"ghost",size:"sm",className:"h-10 rounded-xl border border-[rgba(255,255,255,0.12)] px-4 text-[rgba(207,207,207,0.8)] hover:border-[#4B8EFF]/40 hover:text-white",children:[(0,r.jsx)(i.A,{className:"mr-2 h-4 w-4"}),"Refresh"]}),(0,r.jsxs)(d.$,{onClick:()=>{if(!p)return;let e=new Blob([JSON.stringify({timestamp:new Date().toISOString(),timeRange:t,metrics:p},null,2)],{type:"application/json"}),a=URL.createObjectURL(e),r=document.createElement("a");r.href=a,r.download="radly-metrics-".concat(t,"-").concat(Date.now(),".json"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a)},variant:"ghost",size:"sm",className:"h-10 rounded-xl border border-[rgba(75,142,255,0.35)] bg-[rgba(75,142,255,0.16)] px-4 text-[#D7E3FF] hover:border-[rgba(75,142,255,0.45)] hover:bg-[rgba(75,142,255,0.22)]",children:[(0,r.jsx)(c.A,{className:"mr-2 h-4 w-4"}),"Export"]})]})]}),(0,r.jsx)(eb,{alerts:Z(p),uptime:null==(e=p.system_health)?void 0:e.uptime}),(0,r.jsx)(H,{data:p}),(0,r.jsx)(ei,{metrics:p}),(0,r.jsx)(O,{data:p.job_stages}),(0,r.jsx)(Q,{tokensData:p.llm_tokens,costData:p.llm_cost_hourly}),(0,r.jsx)(V,{errorCategories:p.error_categories,cacheHitRate:p.cache_hit_rate,retrySuccessRate:p.retry_success_rate}),(0,r.jsx)(Y,{queueRates:p.queue_rates,queueSaturation:p.queue_saturation}),(0,r.jsx)(G,{data:p.db_pool_usage}),(0,r.jsx)(ec,{userJobSuccess:p.user_job_success,rateLimits:p.rate_limits})]}):(0,r.jsxs)("div",{className:"aurora-card border border-[rgba(255,255,255,0.08)] p-10 text-center text-sm text-[rgba(207,207,207,0.65)]",children:[(0,r.jsx)("p",{className:"text-lg font-semibold text-white",children:"No metrics data available"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-[rgba(207,207,207,0.55)]",children:"Try refreshing the dashboard or verify that the metrics backend is reporting."})]})}function ep(){return(0,r.jsx)(l.f,{children:(0,r.jsx)("div",{className:"min-h-screen bg-[var(--ds-bg-gradient)] text-white",children:(0,r.jsx)("div",{className:"relative mx-auto max-w-6xl px-4 sm:px-6 lg:px-8 py-12 neon-page-stack",children:(0,r.jsx)("div",{className:"neon-shell space-y-8 p-6 sm:p-8 md:p-10 backdrop-blur-xl",children:(0,r.jsx)(eh,{})})})})})}}},e=>{e.O(0,[5647,5707,6010,6743,8720,2454,2149,6692,2060,4123,8441,1255,7358],()=>e(e.s=75908)),_N_E=e.O()}]);