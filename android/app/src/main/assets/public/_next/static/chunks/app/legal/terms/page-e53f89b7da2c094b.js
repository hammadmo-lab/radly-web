(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3592],{3998:(e,t,a)=>{"use strict";a.d(t,{$:()=>o});var i=a(95155),r=a(12115),s=a(32467),n=a(83101),c=a(64269);let l=(0,n.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-semibold ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"button-primary-gradient",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"button-outline-glass",secondary:"button-secondary-soft",ghost:"text-foreground hover:bg-[rgba(255,255,255,0.08)] hover:text-foreground",link:"text-info underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,t)=>{let{className:a,variant:r,size:n,asChild:o=!1,...d}=e,u=o?s.DX:"button";return(0,i.jsx)(u,{className:(0,c.cn)(l({variant:r,size:n,className:a})),ref:t,...d})});o.displayName="Button"},7797:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var i=a(95155),r=a(12115),s=a(20063),n=a(3998),c=a(86948),l=a(91162),o=a(13077),d=a(18720),u=a(6504),m=a(22133),h=a(89715),f=a(42529);function p(){let[e,t]=(0,r.useState)(""),[a,p]=(0,r.useState)(!1),[g,_]=(0,r.useState)(!1),b=(0,s.useRouter)();(0,r.useEffect)(()=>{fetch("/content/terms.md",{headers:{"X-Request-Id":crypto.randomUUID()}}).then(e=>{if(!e.ok)throw Error("HTTP ".concat(e.status));return e.text()}).then(e=>t(e)).catch(e=>{t("# Terms of Use\nLast updated: 2025-01-08\n\nBy using Radly you agree to the Terms of Use. (Full text to be inserted.)\n\nThis is a placeholder. Please contact support if you need the complete terms.")})},[]);let x=async()=>{_(!0);try{let e=await (0,o.getSupabaseClient)(),{data:{user:t}}=await e.auth.getUser();if(!t){d.oR.error("You must be signed in to accept terms"),b.push("/login");return}await (0,l.b6)(t.id,{accepted_terms_at:new Date().toISOString()}),d.oR.success("Terms accepted successfully!"),b.push("/app/templates")}catch(e){d.oR.error("Failed to accept terms")}finally{_(!1)}};return(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-muted to-background",children:[(0,i.jsx)("header",{className:"border-b border-border bg-card/80 backdrop-blur-sm",children:(0,i.jsx)("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:(0,i.jsx)(h.A,{className:"w-5 h-5 text-primary-foreground"})}),(0,i.jsx)("span",{className:"text-xl font-bold text-primary",children:"Radly"})]})})}),(0,i.jsx)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:(0,i.jsxs)(c.Zp,{children:[(0,i.jsxs)(c.aR,{children:[(0,i.jsx)(c.ZB,{className:"text-2xl",children:"Terms of Service"}),(0,i.jsx)(c.BT,{children:"Please read and accept our terms of service to continue using Radly"})]}),(0,i.jsxs)(c.Wu,{children:[(0,i.jsx)("div",{className:"prose prose-sm max-w-none mb-8",children:(0,i.jsx)(u.oz,{remarkPlugins:[m.A],children:e})}),(0,i.jsxs)("div",{className:"border-t pt-6",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,i.jsx)("input",{type:"checkbox",id:"accept-terms",checked:a,onChange:e=>p(e.target.checked),className:"w-4 h-4 text-primary border-border rounded focus:ring-ring"}),(0,i.jsx)("label",{htmlFor:"accept-terms",className:"text-sm font-medium text-foreground",children:"I have read and agree to the Terms of Service"})]}),(0,i.jsxs)("div",{className:"flex space-x-4",children:[(0,i.jsxs)(n.$,{onClick:x,disabled:!a||g,variant:"default",className:"flex items-center space-x-2",children:[(0,i.jsx)(f.A,{className:"w-4 h-4"}),(0,i.jsx)("span",{children:"I Accept"})]}),(0,i.jsx)(n.$,{variant:"outline",onClick:()=>b.push("/login"),children:"Cancel"})]})]})]})]})})]})}},13077:(e,t,a)=>{"use strict";a.d(t,{getSupabaseClient:()=>l});var i=a(11993),r=a(16010),s=a(32587),n=a(4077);class c{static getInstance(){return c.instance||(c.instance=new c),c.instance}async initialize(){if(!this.initialized)return this.initializationPromise||(this.initializationPromise=this._doInitialize()),this.initializationPromise}async _doInitialize(){try{if(!s.Capacitor.isNativePlatform()){this.initialized=!0;return}let{keys:e}=await n.Preferences.keys();for(let t of e.filter(e=>e.startsWith(this.STORAGE_PREFIX)))try{let{value:e}=await n.Preferences.get({key:t});if(e){let a=t.substring(this.STORAGE_PREFIX.length);this.cache.set(a,e)}}catch(e){}this.initialized=!0}catch(e){this.initialized=!0}}getItem(e){return this.initialized&&this.cache.get(e)||null}setItem(e,t){this.initialized&&(this.cache.set(e,t),this._persistToStorage(e,t).catch(e=>{}))}removeItem(e){this.initialized&&(this.cache.delete(e),this._removeFromStorage(e).catch(e=>{}))}async _persistToStorage(e,t){if(!s.Capacitor.isNativePlatform())return;let a=this.STORAGE_PREFIX+e;try{await n.Preferences.set({key:a,value:t})}catch(e){throw e}}async _removeFromStorage(e){if(!s.Capacitor.isNativePlatform())return;let t=this.STORAGE_PREFIX+e;try{await n.Preferences.remove({key:t})}catch(e){throw e}}async clear(){if(this.cache.clear(),s.Capacitor.isNativePlatform())try{let{keys:e}=await n.Preferences.keys();for(let t of e.filter(e=>e.startsWith(this.STORAGE_PREFIX)))await n.Preferences.remove({key:t})}catch(e){}}getDebugInfo(){return{initialized:this.initialized,cacheSize:this.cache.size,cachedKeys:Array.from(this.cache.keys()),platform:s.Capacitor.isNativePlatform()?"capacitor":"web",prefix:this.STORAGE_PREFIX}}constructor(){this.cache=new Map,this.initialized=!1,this.initializationPromise=null,this.STORAGE_PREFIX="sb-"}}async function l(){if(a.g.__supabase_client&&a.g.__supabase_client_initialized)return a.g.__supabase_client;if(a.g.__supabase_client_initialized){let e=0;for(;!a.g.__supabase_client&&e<50;)await new Promise(e=>setTimeout(e,100)),e++;if(a.g.__supabase_client)return a.g.__supabase_client;throw Error("Supabase client initialization timeout")}a.g.__supabase_client_initialized=!0;try{let e,t,s=(()=>{var e;let t=window.Capacitor;return!!(null==t||null==(e=t.isNativePlatform)?void 0:e.call(t))})();if(s){let e=c.getInstance();await e.initialize(),t=function(){let e=c.getInstance();return e.initialize().catch(e=>{}),{getItem:t=>e.getItem(t),setItem:(t,a)=>e.setItem(t,a),removeItem:t=>e.removeItem(t)}}()}return e=s?(0,i.UU)("https://bsldtgivgtyzacwyvcfh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJzbGR0Z2l2Z3R5emFjd3l2Y2ZoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5MzQ1NzMsImV4cCI6MjA3NTUxMDU3M30.vjHPo6WEASxYBOAGYmZ93o5n9RhZvANSlLhaT-wagTs",{auth:{storage:t,persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!1,debug:!0}}):(0,r.createBrowserClient)("https://bsldtgivgtyzacwyvcfh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJzbGR0Z2l2Z3R5emFjd3l2Y2ZoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5MzQ1NzMsImV4cCI6MjA3NTUxMDU3M30.vjHPo6WEASxYBOAGYmZ93o5n9RhZvANSlLhaT-wagTs",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!1,flowType:"pkce",debug:!1}}),a.g.__supabase_client=e,e.__isSingleton=!0,e.__createdAt=new Date().toISOString(),e.__platform=s?"capacitor":"web",e}catch(e){throw a.g.__supabase_client_initialized=!1,e}}void 0===a.g&&(globalThis.global=globalThis)},58044:(e,t,a)=>{Promise.resolve().then(a.bind(a,7797))},64269:(e,t,a)=>{"use strict";a.d(t,{cn:()=>s});var i=a(2821),r=a(75889);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,i.$)(t))}},86948:(e,t,a)=>{"use strict";a.d(t,{BT:()=>o,Wu:()=>d,ZB:()=>l,Zp:()=>n,aR:()=>c});var i=a(95155),r=a(12115),s=a(64269);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,i.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});n.displayName="Card";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,i.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",a),...r})});c.displayName="CardHeader";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,i.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});l.displayName="CardTitle";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,i.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",a),...r})});o.displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,i.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",a),...r})});d.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,i.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},91162:(e,t,a)=>{"use strict";a.d(t,{Sk:()=>r,b6:()=>s,eU:()=>n});var i=a(13077);async function r(e){try{var t,a,r;let s=await (0,i.getSupabaseClient)(),{data:{user:n},error:c}=await s.auth.getUser();if(c||!n)throw Error("User not found");return{id:e,email:n.email||"",default_signature_name:(null==(t=n.user_metadata)?void 0:t.default_signature_name)||"",default_signature_date_format:(null==(a=n.user_metadata)?void 0:a.default_signature_date_format)||"MM/DD/YYYY",accepted_terms_at:null==(r=n.user_metadata)?void 0:r.accepted_terms_at,subscription:null,updated_at:n.updated_at||new Date().toISOString()}}catch(t){return{id:e,email:"",default_signature_name:"",default_signature_date_format:"MM/DD/YYYY",subscription:null,updated_at:new Date().toISOString()}}}async function s(e,t){try{let e=await (0,i.getSupabaseClient)(),{error:a}=await e.auth.updateUser({data:{default_signature_name:t.default_signature_name,default_signature_date_format:t.default_signature_date_format,accepted_terms_at:t.accepted_terms_at}});if(a)throw Error("Failed to update user data: ".concat(a.message))}catch(e){throw e}}let n={retry:(e,t)=>!(t.message.includes("401")||t.message.includes("403")||t.message.includes("404"))&&e<2,retryDelay:e=>Math.min(1e3*2**e,3e4),staleTime:3e5}}},e=>{e.O(0,[5707,6010,4968,8720,695,8441,1255,7358],()=>e(e.s=58044)),_N_E=e.O()}]);