(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2498],{6191:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},20063:(e,t,s)=>{"use strict";var a=s(47260);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},20243:(e,t,s)=>{"use strict";s.d(t,{E:()=>l});var a=s(95155),r=s(64269);function l(e){let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",t),...s})}},27937:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},35299:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},51309:(e,t,s)=>{Promise.resolve().then(s.bind(s,72822))},57667:(e,t,s)=>{"use strict";s.d(t,{l:()=>r});var a=s(16010);function r(){return(0,a.createBrowserClient)("https://bsldtgivgtyzacwyvcfh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJzbGR0Z2l2Z3R5emFjd3l2Y2ZoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5MzQ1NzMsImV4cCI6MjA3NTUxMDU3M30.vjHPo6WEASxYBOAGYmZ93o5n9RhZvANSlLhaT-wagTs")}},57828:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},65993:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},72822:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>A,dynamic:()=>E});var a=s(95155),r=s(12115),l=s(3998),i=s(65142),n=s(11186),c=s(89715),d=s(6191),o=s(86651),u=s(57828),h=s(90368),m=s(27937),x=s(52619),b=s.n(x),p=s(20063),g=s(51056),f=s(57667),v=s(8971),j=s(62785),y=s(20243),N=s(35299),w=s(89559),k=s(1733);function C(e){let{onRefresh:t,children:s,enabled:l=!0,threshold:i=80}=e,{containerRef:n,isPulling:c,isRefreshing:d,pullDistance:o,progress:u}=function(e){let{onRefresh:t,threshold:s=80,enabled:a=!0}=e,[l,i]=(0,r.useState)(!1),[n,c]=(0,r.useState)(!1),[d,o]=(0,r.useState)(0),u=(0,r.useRef)(0),h=(0,r.useRef)(null),m=(0,r.useCallback)(e=>{a&&!n&&0===window.scrollY&&(u.current=e.touches[0].clientY)},[a,n]),x=(0,r.useCallback)(e=>{if(!a||n||0===u.current)return;let t=e.touches[0].clientY-u.current;t>0&&0===window.scrollY&&(o(Math.min(t,1.5*s)),t>s?i(!0):i(!1),t>10&&e.preventDefault())},[a,n,s]),b=(0,r.useCallback)(async()=>{if(a&&!n){if(l&&d>s){c(!0);try{await t()}catch(e){}finally{c(!1)}}i(!1),o(0),u.current=0}},[a,l,n,d,s,t]);return(0,r.useEffect)(()=>{let e=h.current;if(e&&a)return e.addEventListener("touchstart",m,{passive:!0}),e.addEventListener("touchmove",x,{passive:!1}),e.addEventListener("touchend",b,{passive:!0}),()=>{e.removeEventListener("touchstart",m),e.removeEventListener("touchmove",x),e.removeEventListener("touchend",b)}},[a,m,x,b]),{containerRef:h,isPulling:l,isRefreshing:n,pullDistance:d,progress:Math.min(d/s,1)}}({onRefresh:t,enabled:l,threshold:i});return(0,a.jsxs)("div",{ref:n,className:"relative min-h-screen",children:[(c||d)&&(0,a.jsx)(k.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute top-0 left-0 right-0 flex justify-center items-center",style:{transform:"translateY(".concat(Math.min(o-40,40),"px)")},children:(0,a.jsx)("div",{className:"bg-background/90 backdrop-blur-sm rounded-full p-3 shadow-lg border",children:d?(0,a.jsx)(N.A,{className:"w-6 h-6 animate-spin text-primary"}):(0,a.jsx)(k.P.div,{animate:{rotate:180*u},children:(0,a.jsx)(w.A,{className:"w-6 h-6 text-primary"})})})}),(0,a.jsx)("div",{style:{transform:d?"translateY(60px)":"translateY(".concat(Math.min(.4*o,60),"px)"),transition:d||!c?"transform 0.3s ease":"none"},children:s})]})}let _=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";if("vibrate"in navigator)try{navigator.vibrate({light:10,medium:20,heavy:30,success:[10,50,10],warning:[20,100,20],error:[30,50,30,50,30]}[e])}catch(e){}},E="force-dynamic",S={done:{label:"Completed",badgeClass:"bg-[rgba(63,191,140,0.18)] border border-[rgba(63,191,140,0.32)] text-[#C8F3E2]"},running:{label:"Generating",badgeClass:"bg-[rgba(75,142,255,0.16)] border border-[rgba(75,142,255,0.35)] text-[#D7E3FF]"},queued:{label:"Queued",badgeClass:"bg-[rgba(248,183,77,0.16)] border border-[rgba(248,183,77,0.35)] text-[#FBE3B5]"},error:{label:"Failed",badgeClass:"bg-[rgba(255,107,107,0.18)] border border-[rgba(255,107,107,0.28)] text-[#FFD1D1]"}};function A(){let e=(0,p.useRouter)(),{userId:t}=(0,v.L)(),[s,x]=(0,r.useState)(!0),[N,w]=(0,r.useState)([]),[k,E]=(0,r.useState)(null),[A,M]=(0,r.useState)(0),[R,F]=(0,r.useState)(""),[I,L]=(0,r.useState)("newest"),[z,P]=(0,r.useState)(1);(0,r.useEffect)(()=>{(0,f.l)().auth.getSession().then(t=>{let{data:s}=t;s.session||e.push("/login")})},[e]);let Y=(0,r.useCallback)(()=>t?"radly_recent_jobs_local_".concat(t):null,[t]),q=(0,r.useCallback)(async()=>{try{if(x(!0),E(null),!t){w([]),E(null);return}let e=Y();if(!e){w([]),E(null);return}let s=JSON.parse(localStorage.getItem(e)||"[]");if(s.length>0){let e=s.map(e=>({job_id:e.job_id,status:e.status||"queued",template_id:e.template_id||e.title||"—"}));w(e),E(null)}else w([]),E(null)}catch(e){e instanceof Error&&e.message,w([]),E(null)}finally{x(!1)}},[t,Y]),J=(0,r.useCallback)(async(e,t)=>{try{let s=Y();if(!s)return;let a=JSON.parse(localStorage.getItem(s)||"[]").map(s=>s.job_id===e?{...s,status:t}:s);localStorage.setItem(s,JSON.stringify(a)),w(s=>s.map(s=>s.job_id===e?{...s,status:t}:s))}catch(e){}},[Y]);(0,r.useEffect)(()=>{q()},[q]),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{baseInterval:s=12e3,maxInterval:a=6e4,pauseWhenHidden:l=!0,immediate:i=!0,cleanupOnError:n=!0,backoffMultiplier:c=1.5,resetBackoffOnSuccess:d=!0}=t,[o,u]=(0,r.useState)(!0),[h,m]=(0,r.useState)(!0),[x,b]=(0,r.useState)(s),p=(0,r.useRef)(null),g=(0,r.useRef)(0),f=(0,r.useRef)(!0),v=(0,r.useCallback)(()=>{p.current&&(clearTimeout(p.current),p.current=null)},[]),j=(0,r.useCallback)(()=>{f.current&&o&&(h||!l)&&(v(),p.current=setTimeout(async()=>{if(f.current)try{await e(),d&&(g.current=0,b(s)),j()}catch(e){if(g.current++,b(Math.min(s*Math.pow(c,g.current),a)),n)return void u(!1);j()}},x))},[e,o,h,l,x,s,a,c,d,n,v]);(0,r.useEffect)(()=>{if(!l)return;let e=()=>{let e=!document.hidden;m(e),e&&o?j():e||v()};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[l,o,j,v]),(0,r.useEffect)(()=>(f.current=!0,()=>{f.current=!1,v()}),[v]),(0,r.useEffect)(()=>(o&&(h||!l)?(i&&Promise.resolve(e()).catch(console.error),j()):v(),v),[o,h,l,i,e,j,v]),(0,r.useCallback)(async()=>{try{await e(),d&&(g.current=0,b(s))}catch(e){}},[e,d,s]),(0,r.useCallback)(()=>{u(!1),v()},[v]),(0,r.useCallback)(()=>{u(!0)},[])}(e,{baseInterval:1e4,maxInterval:12e4,backoffMultiplier:2,...t})}(async()=>{let e=N.filter(e=>"queued"===e.status||"running"===e.status);if(e.length>0){let t=await Promise.allSettled(e.map(e=>(0,g.ax)(e.job_id))),s=!1;t.forEach((t,a)=>{let r=e[a];if("fulfilled"===t.status){let e=t.value;e.status!==r.status&&J(r.job_id,e.status)}else s=!0}),s?M(e=>e+1):M(0)}},{immediate:!1});let{filteredAndSortedRows:B,totalPages:O,paginatedRows:Z}=(0,r.useMemo)(()=>{let e=N.filter(e=>{var t;if(!R)return!0;let s=R.toLowerCase();return e.job_id.toLowerCase().includes(s)||(null==(t=e.template_id)?void 0:t.toLowerCase().includes(s))||e.status.toLowerCase().includes(s)});e.sort((e,t)=>{if("newest"===I)return t.job_id.localeCompare(e.job_id);if("oldest"===I)return e.job_id.localeCompare(t.job_id);if("status"===I){var s,a;let r={running:0,queued:1,done:2,error:3};return(null!=(s=r[e.status])?s:999)-(null!=(a=r[t.status])?a:999)}return 0});let t=Math.ceil(e.length/20),s=(z-1)*20,a=e.slice(s,s+20);return{filteredAndSortedRows:e,totalPages:t,paginatedRows:a}},[N,R,I,z,20]),D=(0,r.useCallback)(async()=>{_("light"),await q(),_("success")},[q]);return s?(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)(y.E,{className:"h-4 w-32 mb-4"}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)(y.E,{className:"h-7 w-48"}),(0,a.jsx)(y.E,{className:"h-9 w-20"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,a.jsx)(y.E,{className:"h-10 flex-1"}),(0,a.jsx)(y.E,{className:"h-10 w-full sm:w-[180px]"})]}),(0,a.jsx)("ul",{className:"space-y-3",children:[1,2,3,4,5].map(e=>(0,a.jsx)("li",{className:"rounded-lg border p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsx)(y.E,{className:"h-5 w-64"}),(0,a.jsx)(y.E,{className:"h-4 w-40"}),(0,a.jsx)(y.E,{className:"h-3 w-72"})]}),(0,a.jsx)(y.E,{className:"h-9 w-32"})]})},e))})]}):k?(0,a.jsxs)("div",{className:"p-6 text-red-600",children:[k,(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)(l.$,{variant:"outline",onClick:q,children:"Retry"})})]}):N.length?(0,a.jsx)(C,{onRefresh:D,enabled:!s,children:(0,a.jsxs)("div",{className:"neon-shell space-y-6 p-5 sm:p-8 md:p-10",children:[(0,a.jsx)(j.Q,{items:[{label:"Reports"}]}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-semibold text-white",children:"Your Recent Reports"}),(0,a.jsx)("p",{className:"text-sm text-[rgba(207,207,207,0.65)] mt-1",children:"Track generated studies, monitor statuses, and jump back into results instantly."})]}),(0,a.jsx)(l.$,{variant:"outline",size:"sm",className:"h-10 px-4 text-[#4B8EFF] border-[#4B8EFF]/40 hover:bg-[rgba(75,142,255,0.12)]",onClick:()=>{_("light"),q()},"aria-label":"Refresh reports list",children:"Refresh"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(o.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-[rgba(207,207,207,0.5)]","aria-hidden":"true"}),(0,a.jsx)(i.p,{placeholder:"Search by job ID, template, or status...",value:R,onChange:e=>{F(e.target.value),P(1)},className:"pl-9 bg-[rgba(18,22,36,0.8)] border border-[rgba(255,255,255,0.08)] text-white placeholder:text-[rgba(207,207,207,0.45)] focus-visible:ring-[#4B8EFF]","aria-label":"Search reports"})]}),(0,a.jsxs)(n.l6,{value:I,onValueChange:e=>L(e),children:[(0,a.jsx)(n.bq,{className:"w-full sm:w-[200px] bg-[rgba(18,22,36,0.8)] border border-[rgba(255,255,255,0.08)] text-white","aria-label":"Sort reports",children:(0,a.jsx)(n.yv,{placeholder:"Sort by..."})}),(0,a.jsxs)(n.gC,{className:"bg-[rgba(10,12,20,0.95)] border border-[rgba(255,255,255,0.08)] text-white",children:[(0,a.jsx)(n.eb,{value:"newest",children:"Newest First"}),(0,a.jsx)(n.eb,{value:"oldest",children:"Oldest First"}),(0,a.jsx)(n.eb,{value:"status",children:"By Status"})]})]})]}),R&&(0,a.jsxs)("div",{className:"text-sm text-[rgba(207,207,207,0.6)]",children:["Found ",B.length," ",1===B.length?"report":"reports"]}),A>=3&&(0,a.jsx)("div",{className:"aurora-card border border-[rgba(248,183,77,0.28)] bg-[rgba(54,42,22,0.65)] p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"mt-0.5 text-[#F8B74D]",children:"⚠️"}),(0,a.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-white",children:"Status updates delayed"}),(0,a.jsx)("p",{className:"text-sm text-[rgba(248,183,77,0.85)]",children:"We're having trouble fetching the latest job status. Reports are still processing; try refreshing to sync again."})]})]})}),(0,a.jsx)("ul",{className:"space-y-4",children:Z.map(e=>{var t,s;let r=null!=(t=S[e.status])?t:S.queued;return(0,a.jsx)("li",{className:"aurora-card border border-[rgba(255,255,255,0.05)] p-5 sm:p-6 transition-all duration-300 hover:-translate-y-1 hover:border-[rgba(75,142,255,0.35)] hover:shadow-[0_18px_42px_rgba(20,28,45,0.55)]",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg font-semibold text-white tracking-tight",children:(null!=(s=e.template_id)?s:"Untitled Report").replace(/_/g," ")}),(0,a.jsx)("span",{className:"text-xs font-medium px-3 py-1 rounded-full ".concat(r.badgeClass),children:r.label})]}),(0,a.jsxs)("div",{className:"text-xs text-[rgba(207,207,207,0.55)]",children:[(0,a.jsx)("span",{className:"uppercase tracking-[0.28em] text-[rgba(207,207,207,0.4)] mr-2",children:"Job ID"}),(0,a.jsx)("span",{className:"font-mono text-[rgba(207,207,207,0.75)] truncate block sm:inline",children:e.job_id})]})]}),(0,a.jsxs)(b(),{href:"/app/report/".concat(e.job_id),className:"inline-flex items-center justify-center gap-2 px-5 py-3 rounded-lg bg-[linear-gradient(90deg,#2653FF_0%,#4B8EFF_100%)] text-white shadow-[0_10px_24px_rgba(75,142,255,0.35)] hover:shadow-[0_16px_28px_rgba(75,142,255,0.45)] transition-all touch-target",onClick:()=>_("light"),children:[(0,a.jsx)(u.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"View Report"})]})]})},e.job_id)})}),O>1&&(0,a.jsxs)("div",{className:"flex flex-col gap-4 border-t border-[rgba(255,255,255,0.06)] pt-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-[rgba(207,207,207,0.6)]",children:["Page ",z," of ",O," (",B.length," total ",1===B.length?"report":"reports",")"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(l.$,{variant:"outline",size:"sm",className:"h-9 px-3 text-[rgba(207,207,207,0.8)] border-[rgba(255,255,255,0.12)] hover:text-white",onClick:()=>P(e=>Math.max(1,e-1)),disabled:1===z,"aria-label":"Go to previous page",children:(0,a.jsx)(h.A,{className:"h-4 w-4"})}),(0,a.jsx)(l.$,{variant:"outline",size:"sm",className:"h-9 px-3 text-[rgba(207,207,207,0.8)] border-[rgba(255,255,255,0.12)] hover:text-white",onClick:()=>P(e=>Math.min(O,e+1)),disabled:z===O,"aria-label":"Go to next page",children:(0,a.jsx)(m.A,{className:"h-4 w-4"})})]})]})]})}):(0,a.jsxs)("div",{className:"p-6 text-center space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center",children:(0,a.jsx)(c.A,{className:"w-8 h-8 text-muted-foreground"})}),(0,a.jsxs)("div",{className:"text-muted-foreground",children:[(0,a.jsx)("p",{className:"text-lg font-semibold mb-2",children:"No reports yet"}),(0,a.jsx)("p",{className:"text-sm max-w-md mx-auto",children:"Your generated reports will appear here after generation completes. Start by selecting a template and generating your first report."})]})]}),(0,a.jsxs)(l.$,{onClick:()=>e.push("/app/templates"),className:"gap-2",children:[(0,a.jsx)(d.A,{className:"h-4 w-4"}),"Generate Your First Report"]})]})}},86651:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},89559:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},89715:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},90368:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])}},e=>{e.O(0,[5707,2619,6010,6559,2149,6692,7815,8441,1255,7358],()=>e(e.s=51309)),_N_E=e.O()}]);